var Og=Object.defineProperty;var Ng=(e,t,r)=>t in e?Og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ae=(e,t,r)=>Ng(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function Cg(e,t){return typeof e=="string"?Ed(e,t):t}function Ed(e,t){switch(e.toLowerCase()){case"1":case"true":case"yes":case"t":case"y":return!0;case"0":case"false":case"no":case"f":case"n":return!1}return t}var xs=()=>typeof window<"u",Lg=e=>{const t=new URL(e||"","http://localhost/").searchParams.get("bot");return Ed(t||"",!1)},Dg=()=>{var e;return!!((e=window.APP_SHELL_CONFIG)!=null&&e.IS_CRAWLER)},xg=(e,t)=>xs()?Dg()||Lg(e||window.location.href):!1,_d=/Mobile App - (Marketplace|Shared)/,kg=e=>_d.test(e["user-agent"]||"")||Cg(e["x-web-view"],!1),Pg=()=>{var e;return((e=window.APP_SHELL_CONFIG)==null?void 0:e.IS_WEB_VIEW)===!0||_d.test(navigator.userAgent)},ks=e=>xs()?Pg():e?kg(e):!1,Ug=()=>window.APP_SHELL===!0,Mg=e=>xs()?Ug():!1,se={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},bt=console,hr={};Object.keys(se).forEach(function(e){hr[e]=bt[e]});var wn="Datadog Browser SDK:",K={debug:hr.debug.bind(bt,wn),log:hr.log.bind(bt,wn),info:hr.info.bind(bt,wn),warn:hr.warn.bind(bt,wn),error:hr.error.bind(bt,wn)},bo="https://docs.datadoghq.com",yd="".concat(bo,"/real_user_monitoring/browser/troubleshooting"),So="More details:";function bd(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return e.apply(void 0,r)}catch(i){K.error(t,i)}}}function Zt(e){return e!==0&&Math.random()*100<=e}function Xi(e,t){return+e.toFixed(t)}function Fg(e){return cn(e)&&e>=0&&e<=100}function cn(e){return typeof e=="number"}var Ne=1e3,Be=60*Ne,Sd=60*Be,Vg=24*Sd,Bg=365*Vg;function Dt(e){return{relative:e,timeStamp:zg(e)}}function Gg(e){return{relative:wo(e),timeStamp:e}}function zg(e){var t=At()-performance.now();return t>Jn()?Math.round(ln(t,e)):jg(e)}function Hg(){return Math.round(At()-ln(Jn(),performance.now()))}function Y(e){return cn(e)?Xi(e*1e6,0):e}function At(){return new Date().getTime()}function ne(){return At()}function ft(){return performance.now()}function Te(){return{relative:ft(),timeStamp:ne()}}function wd(){return{relative:0,timeStamp:Jn()}}function Ie(e,t){return t-e}function ln(e,t){return e+t}function wo(e){return e-Jn()}function jg(e){return Math.round(ln(Jn(),e))}function qg(e){return e<Bg}var na;function Jn(){return na===void 0&&(na=performance.timing.navigationStart),na}var Mt=1024,Td=1024*Mt,Kg=/[^\u0000-\u007F]/;function Ps(e){return Kg.test(e)?window.TextEncoder!==void 0?new TextEncoder().encode(e).length:new Blob([e]).size:e.length}function $g(e){for(var t=e.reduce(function(s,c){return s+c.length},0),r=new Uint8Array(t),n=0,i=0,o=e;i<o.length;i++){var a=o[i];r.set(a,n),n+=a.length}return r}function Fe(e,t){return e.indexOf(t)!==-1}function To(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(n){return t.push(n)});else for(var r=0;r<e.length;r++)t.push(e[r]);return t}function tr(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r))return n}}function Wg(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(t(n,r,e))return n}}function Id(e,t){Array.prototype.forEach.call(e,t)}function Jr(e){return Object.keys(e).map(function(t){return e[t]})}function Us(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function Zn(e,t){return e.slice(0,t.length)===t}function Yg(e,t){return e.slice(-t.length)===t}function P(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}),e}function Vn(e){return P({},e)}function Bn(e,t){return Object.keys(e).some(function(r){return e[r]===t})}function rr(e){return Object.keys(e).length===0}function Xg(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=t(e[o])}return r}function Vt(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function nr(e,t){var r=Vt(),n;return r.Zone&&typeof r.Zone.__symbol__=="function"&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}var Jg=function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Ji,Ad=!1;function Zg(e){Ji=e}function Qg(e){Ad=e}function em(e,t,r){var n=r.value;r.value=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=Ji?C(n):n;return a.apply(this,i)}}function C(e){return function(){return Rr(e,this,arguments)}}function Rr(e,t,r){try{return e.apply(t,r)}catch(n){if(Va(n),Ji)try{Ji(n)}catch(i){Va(i)}}}function Va(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ad&&K.error.apply(K,Jg(["[MONITOR]"],e,!1))}function Ee(e,t){return nr(Vt(),"setTimeout")(C(e),t)}function ut(e){nr(Vt(),"clearTimeout")(e)}function dn(e,t){return nr(Vt(),"setInterval")(C(e),t)}function Io(e){nr(Vt(),"clearInterval")(e)}var X=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var r=this;return this.observers.push(t),this.observers.length===1&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:function(){r.observers=r.observers.filter(function(n){return t!==n}),!r.observers.length&&r.onLastUnsubscribe&&r.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(r){return r(t)})},e}();function Rd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new X(function(r){var n=e.map(function(i){return i.subscribe(function(o){return r.notify(o)})});return function(){return n.forEach(function(i){return i.unsubscribe()})}})}function Bt(e,t,r){var n=r&&r.leading!==void 0?r.leading:!0,i=r&&r.trailing!==void 0?r.trailing:!0,o=!1,a,s;return{throttled:function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];if(o){a=c;return}n?e.apply(void 0,c):a=c,o=!0,s=Ee(function(){i&&a&&e.apply(void 0,a),o=!1,a=void 0},t)},cancel:function(){ut(s),o=!1,a=void 0}}}function q(){}function Ae(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,Ae)}var Zi=/([\w-]+)\s*=\s*([^;]+)/g;function Gn(e,t){for(Zi.lastIndex=0;;){var r=Zi.exec(e);if(r){if(r[1]===t)return r[2]}else break}}function tm(e){var t=new Map;for(Zi.lastIndex=0;;){var r=Zi.exec(e);if(r)t.set(r[1],r[2]);else break}return t}function Od(e,t,r){r===void 0&&(r="");var n=e.charCodeAt(t-1),i=n>=55296&&n<=56319,o=i?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(r)}function rm(){return Ms()===0}function nm(){return Ms()===1}function im(){return Ms()===2}var Ei;function Ms(){return Ei??(Ei=om())}function om(e){var t;e===void 0&&(e=window);var r=e.navigator.userAgent;return e.chrome||/HeadlessChrome/.test(r)?1:((t=e.navigator.vendor)===null||t===void 0?void 0:t.indexOf("Apple"))===0||/safari/i.test(r)&&!/chrome|android/i.test(r)?2:e.document.documentMode?0:3}function Qn(e,t,r,n){var i=new Date;i.setTime(i.getTime()+r);var o="expires=".concat(i.toUTCString()),a=n&&n.crossSite?"none":"strict",s=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"",u=n&&n.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(a).concat(s).concat(c).concat(u)}function Fs(e){return Gn(document.cookie,e)}var ia;function Wt(e){return ia||(ia=tm(document.cookie)),ia.get(e)}function Nd(e,t){Qn(e,"",0,t)}function am(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(Ae()),r="test";Qn(t,r,Be,e);var n=Fs(t)===r;return Nd(t,e),n}catch(i){return K.error(i),!1}}var oa;function sm(){if(oa===void 0){for(var e="dd_site_test_".concat(Ae()),t="test",r=window.location.hostname.split("."),n=r.pop();r.length&&!Fs(e);)n="".concat(r.pop(),".").concat(n),Qn(e,t,Ne,{domain:n});Nd(e,{domain:n}),oa=n}return oa}var fn="_dd_s",Dr=4*Sd,Cd=15*Be,Ld=/^([a-zA-Z]+)=([a-z0-9-]+)$/,Vs="&",um="1";function vr(){return{isExpired:um}}function Mi(e){return rr(e)}function Dd(e){return!Mi(e)}function Qi(e){return e.isExpired!==void 0||!cm(e)}function cm(e){return(e.created===void 0||At()-Number(e.created)<Dr)&&(e.expire===void 0||At()<Number(e.expire))}function xd(e){e.expire=String(At()+Cd)}function Bs(e){return Us(e).map(function(t){var r=t[0],n=t[1];return"".concat(r,"=").concat(n)}).join(Vs)}function kd(e){var t={};return lm(e)&&e.split(Vs).forEach(function(r){var n=Ld.exec(r);if(n!==null){var i=n[1],o=n[2];t[i]=o}}),t}function lm(e){return!!e&&(e.indexOf(Vs)!==-1||Ld.test(e))}var dm="_dd",fm="_dd_r",pm="_dd_l",hm="rum",vm="logs";function gm(e){var t=Wt(fn);if(!t){var r=Wt(dm),n=Wt(fm),i=Wt(pm),o={};r&&(o.id=r),i&&/^[01]$/.test(i)&&(o[vm]=i),n&&/^[012]$/.test(n)&&(o[hm]=n),Dd(o)&&(xd(o),e.persistSession(o))}}function mm(e){var t=Sm(e);return am(t)?{type:"Cookie",cookieOptions:t}:void 0}function Em(e){var t={isLockEnabled:nm(),persistSession:_m(e),retrieveSession:bm,expireSession:function(){return ym(e)}};return gm(t),t}function _m(e){return function(t){Qn(fn,Bs(t),Cd,e)}}function ym(e){Qn(fn,Bs(vr()),Dr,e)}function bm(){var e=Fs(fn);return kd(e)}function Sm(e){var t={};return t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=sm()),t}var wm="_dd_test_";function Tm(){try{var e=Ae(),t="".concat(wm).concat(e);localStorage.setItem(t,e);var r=localStorage.getItem(t);return localStorage.removeItem(t),e===r?{type:"LocalStorage"}:void 0}catch{return}}function Im(){return{isLockEnabled:!1,persistSession:Pd,retrieveSession:Am,expireSession:Rm}}function Pd(e){localStorage.setItem(fn,Bs(e))}function Am(){var e=localStorage.getItem(fn);return kd(e)}function Rm(){Pd(vr())}var Om=10,Nm=100,Ud=[],Fi;function gr(e,t,r){var n;r===void 0&&(r=0);var i=t.isLockEnabled,o=t.persistSession,a=t.expireSession,s=function(d){return o(P({},d,{lock:u}))},c=function(){var d=t.retrieveSession(),p=d.lock;return d.lock&&delete d.lock,{session:d,lock:p}};if(Fi||(Fi=e),e!==Fi){Ud.push(e);return}if(i&&r>=Nm){Gu(t);return}var u,l=c();if(i){if(l.lock){_i(e,t,r);return}if(u=Ae(),s(l.session),l=c(),l.lock!==u){_i(e,t,r);return}}var f=e.process(l.session);if(i&&(l=c(),l.lock!==u)){_i(e,t,r);return}if(f&&(Qi(f)?a():(xd(f),i?s(f):o(f))),i&&!(f&&Qi(f))){if(l=c(),l.lock!==u){_i(e,t,r);return}o(l.session),f=l.session}(n=e.after)===null||n===void 0||n.call(e,f||l.session),Gu(t)}function _i(e,t,r){Ee(function(){gr(e,t,r+1)},Om)}function Gu(e){Fi=void 0;var t=Ud.shift();t&&gr(t,e)}var zu=Ne;function Cm(e){var t=mm(e);return!t&&e.allowFallbackToLocalStorage&&(t=Tm()),t}function Lm(e,t,r){var n=new X,i=new X,o=new X,a=e.type==="Cookie"?Em(e.cookieOptions):Im(),s=a.expireSession,c=dn(h,zu),u;g();var l=Bt(function(){gr({process:function(b){if(!Mi(b)){var R=v(b);return m(R),R}},after:function(b){Dd(b)&&!I()&&E(b),u=b}},a)},zu),f=l.throttled,d=l.cancel;function p(){gr({process:function(b){return I()?v(b):void 0}},a)}function h(){gr({process:function(b){return Qi(b)?vr():void 0},after:v},a)}function v(b){return Qi(b)&&(b=vr()),I()&&(S(b)?_():(o.notify({previousState:u,newState:b}),u=b)),b}function g(){gr({process:function(b){if(Mi(b))return vr()},after:function(b){u=b}},a)}function m(b){if(Mi(b))return!1;var R=r(b[t]),N=R.trackingType,x=R.isTracked;b[t]=N,delete b.isExpired,x&&!b.id&&(b.id=Ae(),b.created=String(At()))}function I(){return u[t]!==void 0}function S(b){return u.id!==b.id||u[t]!==b[t]}function _(){u=vr(),i.notify()}function E(b){u=b,n.notify()}function y(b){gr({process:function(R){return P({},R,b)},after:v},a)}return{expandOrRenewSession:f,expandSession:p,getSession:function(){return u},renewObservable:n,expireObservable:i,sessionStateUpdateObservable:o,restartSession:g,expire:function(){d(),s(),v(vr())},stop:function(){Io(c)},updateSessionState:y}}var Ba={GRANTED:"granted",NOT_GRANTED:"not-granted"};function Md(e){var t=new X;return{tryToInit:function(r){e||(e=r)},update:function(r){e=r,t.notify()},isGranted:function(){return e===Ba.GRANTED},observable:t}}function xr(e,t,r){if(typeof e!="object"||e===null)return JSON.stringify(e);var n=qr(Object.prototype),i=qr(Array.prototype),o=qr(Object.getPrototypeOf(e)),a=qr(e);try{return JSON.stringify(e,t,r)}catch{return"<error: unable to serialize object>"}finally{n(),i(),o(),a()}}function qr(e){var t=e,r=t.toJSON;return r?(delete t.toJSON,function(){t.toJSON=r}):q}function Gs(e){return Ao(e,location.href).href}function Dm(e){try{return!!Ao(e)}catch{return!1}}function xm(e){var t=Ao(e).pathname;return t[0]==="/"?t:"/".concat(t)}function Ao(e,t){var r=km();if(r)try{return t!==void 0?new r(e,t):new r(e)}catch(a){throw new Error("Failed to construct URL: ".concat(String(a)," ").concat(xr({url:e,base:t})))}if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,i=n.createElement("a");if(t!==void 0){n=document.implementation.createHTMLDocument("");var o=n.createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(i)}return i.href=e,i}var Hu=URL,yi;function km(){if(yi===void 0)try{var e=new Hu("http://test/path");yi=e.href==="http://test/path"}catch{yi=!1}return yi?Hu:void 0}var Fd="datad0g.com",Pm="dd0g-gov.com",Yt="datadoghq.com",Um="datadoghq.eu",Mm="ddog-gov.com",Vd="pci.browser-intake-datadoghq.com";function xn(e,t,r){var n=Fm(e,t);return{build:function(i,o){var a=Bm(e,t,r,i,o);return n(a)},urlPrefix:n(""),trackType:t}}function Fm(e,t){var r="/api/v2/".concat(t),n=e.proxy;if(typeof n=="string"){var i=Gs(n);return function(a){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(a)))}}if(typeof n=="function")return function(a){return n({path:r,parameters:a})};var o=Vm(t,e);return function(a){return"https://".concat(o).concat(r,"?").concat(a)}}function Vm(e,t){var r=t.site,n=r===void 0?Yt:r,i=t.internalAnalyticsSubdomain;if(e==="logs"&&t.usePciIntake&&n===Yt)return Vd;if(i&&n===Yt)return"".concat(i,".").concat(Yt);if(n===Pm)return"http-intake.logs.".concat(n);var o=n.split("."),a=o.pop();return"browser-intake-".concat(o.join("-"),".").concat(a)}function Bm(e,t,r,n,i){var o=e.clientToken,a=e.internalAnalyticsSubdomain,s=i.retry,c=i.encoding,u=["sdk_version:".concat("5.25.0"),"api:".concat(n)].concat(r);s&&u.push("retry_count:".concat(s.count),"retry_after:".concat(s.lastFailureStatus));var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("5.25.0")),"dd-evp-origin=browser","dd-request-id=".concat(Ae())];return c&&l.push("dd-evp-encoding=".concat(c)),t==="rum"&&l.push("batch_time=".concat(ne())),a&&l.reverse(),l.join("&")}var Gm=200;function zm(e){var t=e.env,r=e.service,n=e.version,i=e.datacenter,o=[];return t&&o.push(bi("env",t)),r&&o.push(bi("service",r)),n&&o.push(bi("version",n)),i&&o.push(bi("datacenter",i)),o}var Hm=/[^a-z0-9_:./-]/;function bi(e,t){var r=Gm-e.length-1;(t.length>r||Hm.test(t))&&K.warn("".concat(e," value doesn't meet tag requirements and will be sanitized. ").concat(So," ").concat(bo,"/getting_started/tagging/#defining-tags"));var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function jm(e){var t=e.site||Yt,r=zm(e),n=qm(e,r),i=$m(n,t),o=Km(e,i,r);return P({isIntakeUrl:function(a){return i.some(function(s){return a.indexOf(s)===0})},replica:o,site:t},n)}function qm(e,t){return{logsEndpointBuilder:xn(e,"logs",t),rumEndpointBuilder:xn(e,"rum",t),sessionReplayEndpointBuilder:xn(e,"replay",t)}}function Km(e,t,r){if(e.replica){var n=P({},e,{site:Yt,clientToken:e.replica.clientToken}),i={logsEndpointBuilder:xn(n,"logs",r),rumEndpointBuilder:xn(n,"rum",r)};return t.push.apply(t,Jr(i).map(function(o){return o.urlPrefix})),P({applicationId:e.replica.applicationId},i)}}function $m(e,t){var r=Jr(e).map(function(n){return n.urlPrefix});return t===Yt&&r.push("https://".concat(Vd,"/")),r}var kn={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"},Ga={ALL:"all",SAMPLED:"sampled"};function aa(e,t){return e!=null&&typeof e!="string"?(K.error("".concat(t," must be defined as a string")),!1):!0}function Wm(e){return e&&typeof e=="string"&&!/(datadog|ddog|datad0g|dd0g)/.test(e)?(K.error("Site should be a valid Datadog site. ".concat(So," ").concat(bo,"/getting_started/site/.")),!1):!0}function Kr(e,t){return e!==void 0&&!Fg(e)?(K.error("".concat(t," Sample Rate should be a number between 0 and 100")),!1):!0}function Bd(e){var t,r,n,i,o;if(!e||!e.clientToken){K.error("Client Token is not configured, we will not send any data.");return}if(!(!Wm(e.site)||!Kr(e.sessionSampleRate,"Session")||!Kr(e.telemetrySampleRate,"Telemetry")||!Kr(e.telemetryConfigurationSampleRate,"Telemetry Configuration")||!Kr(e.telemetryUsageSampleRate,"Telemetry Usage")||!aa(e.version,"Version")||!aa(e.env,"Env")||!aa(e.service,"Service"))){if(e.trackingConsent!==void 0&&!Bn(Ba,e.trackingConsent)){K.error('Tracking Consent should be either "granted" or "not-granted"');return}return P({beforeSend:e.beforeSend&&bd(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Cm(e),sessionSampleRate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(r=e.telemetrySampleRate)!==null&&r!==void 0?r:20,telemetryConfigurationSampleRate:(n=e.telemetryConfigurationSampleRate)!==null&&n!==void 0?n:5,telemetryUsageSampleRate:(i=e.telemetryUsageSampleRate)!==null&&i!==void 0?i:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:(o=e.trackingConsent)!==null&&o!==void 0?o:Ba.GRANTED,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16*Mt,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*Ne,batchMessagesLimit:50,messageBytesLimit:256*Mt},jm(e))}}function Gd(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:e.telemetryUsageSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents,tracking_consent:e.trackingConsent}}var Ft;(function(e){e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e.TOLERANT_RESOURCE_TIMINGS="tolerant_resource_timings",e.REMOTE_CONFIGURATION="remote_configuration",e.UPDATE_VIEW_NAME="update_view_name",e.NULL_INP_TELEMETRY="null_inp_telemetry",e.LONG_ANIMATION_FRAME="long_animation_frame"})(Ft||(Ft={}));var zs=new Set;function zd(e){Array.isArray(e)&&Ym(e.filter(function(t){return Bn(Ft,t)}))}function Ym(e){e.forEach(function(t){zs.add(t)})}function pn(e){return zs.has(e)}function Xm(){return zs}var ei="?";function Rt(e){var t=[],r=sa(e,"stack"),n=String(e);return r&&Zn(r,n)&&(r=r.slice(n.length)),r&&r.split(`
`).forEach(function(i){var o=Qm(i)||tE(i)||nE(i)||aE(i);o&&(!o.func&&o.line&&(o.func=ei),t.push(o))}),{message:sa(e,"message"),name:sa(e,"name"),stack:t}}var Hd="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Zr="(?::(\\d+))",Jm=new RegExp("^\\s*at (.*?) ?\\(".concat(Hd).concat(Zr,"?").concat(Zr,"?\\)?\\s*$"),"i"),Zm=new RegExp("\\((\\S*)".concat(Zr).concat(Zr,"\\)"));function Qm(e){var t=Jm.exec(e);if(t){var r=t[2]&&t[2].indexOf("native")===0,n=t[2]&&t[2].indexOf("eval")===0,i=Zm.exec(t[2]);return n&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{args:r?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||ei,line:t[3]?+t[3]:void 0,url:r?void 0:t[2]}}}var eE=new RegExp("^\\s*at ?".concat(Hd).concat(Zr,"?").concat(Zr,"??\\s*$"),"i");function tE(e){var t=eE.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:ei,line:t[2]?+t[2]:void 0,url:t[1]}}var rE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function nE(e){var t=rE.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||ei,line:+t[3],url:t[2]}}var iE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,oE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function aE(e){var t=iE.exec(e);if(t){var r=t[3]&&t[3].indexOf(" > eval")>-1,n=oE.exec(t[3]);return r&&n&&(t[3]=n[1],t[4]=n[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||ei,line:t[4]?+t[4]:void 0,url:t[3]}}}function sa(e,t){if(!(typeof e!="object"||!e||!(t in e))){var r=e[t];return typeof r=="string"?r:void 0}}function sE(e,t,r,n){var i=[{url:t,column:n,line:r}],o=cE(e),a=o.name,s=o.message;return{name:a,message:s,stack:i}}var uE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function cE(e){var t,r,n;return{}.toString.call(e)==="[object String]"&&(t=uE.exec(e),r=t[1],n=t[2]),{name:r,message:n}}function Qr(){var e=2,t=new Error,r;if(!t.stack)try{throw t}catch{}return Rr(function(){var n=Rt(t);n.stack=n.stack.slice(e),r=kr(n)}),r}function kr(e){var t=jd(e);return e.stack.forEach(function(r){var n=r.func==="?"?"<anonymous>":r.func,i=r.args&&r.args.length>0?"(".concat(r.args.join(", "),")"):"",o=r.line?":".concat(r.line):"",a=r.line&&r.column?":".concat(r.column):"";t+=`
  at `.concat(n).concat(i," @ ").concat(r.url).concat(o).concat(a)}),t}function jd(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Pe(e,t,r,n){var i=n===void 0?{}:n,o=i.computeHandlingStack,a=e[t];if(typeof a!="function")if(t in e&&Zn(t,"on"))a=q;else return{stop:q};var s=!1,c=function(){if(s)return a.apply(this,arguments);var u=To(arguments),l;Rr(r,null,[{target:this,parameters:u,onPostCall:function(d){l=d},handlingStack:o?Qr():void 0}]);var f=a.apply(this,u);return l&&Rr(l,null,[f]),f};return e[t]=c,{stop:function(){s=!0,e[t]===c&&(e[t]=a)}}}function Tn(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n||!n.set||!n.configurable)return{stop:q};var i=q,o=function(s,c){Ee(function(){o!==i&&r(s,c)},0)},a=function(s){n.set.call(this,s),o(this,s)};return Object.defineProperty(e,t,{set:a}),{stop:function(){var s;((s=Object.getOwnPropertyDescriptor(e,t))===null||s===void 0?void 0:s.set)===a&&Object.defineProperty(e,t,n),o=i}}}var lE=220*Mt,dE="$",fE=3;function te(e,t){t===void 0&&(t=lE);var r=qr(Object.prototype),n=qr(Array.prototype),i=[],o=new WeakMap,a=ua(e,dE,void 0,i,o),s=JSON.stringify(a),c=s?s.length:0;if(c>t){ca(t,"discarded",e);return}for(;i.length>0&&c<t;){var u=i.shift(),l=0;if(Array.isArray(u.source))for(var f=0;f<u.source.length;f++){var d=ua(u.source[f],u.path,f,i,o);if(d!==void 0?c+=JSON.stringify(d).length:c+=4,c+=l,l=1,c>t){ca(t,"truncated",e);break}u.target[f]=d}else for(var f in u.source)if(Object.prototype.hasOwnProperty.call(u.source,f)){var d=ua(u.source[f],u.path,f,i,o);if(d!==void 0&&(c+=JSON.stringify(d).length+l+f.length+fE,l=1),c>t){ca(t,"truncated",e);break}u.target[f]=d}}return r(),n(),a}function ua(e,t,r,n,i){var o=vE(e);if(!o||typeof o!="object")return pE(o);var a=hE(o);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]")return a;var s=e;if(i.has(s))return"[Reference seen at ".concat(i.get(s),"]");var c=r!==void 0?"".concat(t,".").concat(r):t,u=Array.isArray(o)?[]:{};return i.set(s,c),n.push({source:o,target:u,path:c}),u}function pE(e){return typeof e=="bigint"?"[BigInt] ".concat(e.toString()):typeof e=="function"?"[Function] ".concat(e.name||"unknown"):typeof e=="symbol"?"[Symbol] ".concat(e.description||e.toString()):e}function hE(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var t=Object.prototype.toString.call(e),r=t.match(/\[object (.*)\]/);if(r&&r[1])return"[".concat(r[1],"]")}catch{}return"[Unserializable]"}function vE(e){var t=e;if(t&&typeof t.toJSON=="function")try{return t.toJSON()}catch{}return e}function ca(e,t,r){K.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),r)}var qd="No stack, consider using an instance of Error";function Hs(e){var t=e.stackTrace,r=e.originalError,n=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,a=e.source,s=e.handling,c=r instanceof Error,u=gE(t,c,o,r),l=mE(c,t)?kr(t):qd,f=c?$d(r,a):void 0,d=t?t.name:void 0,p=Kd(r);return{startClocks:i,source:a,handling:s,handlingStack:n,originalError:r,type:d,message:u,stack:l,causes:f,fingerprint:p}}function gE(e,t,r,n){return e!=null&&e.message&&(e!=null&&e.name)?e.message:t?"Empty message":"".concat(r," ").concat(xr(te(n)))}function mE(e,t){return t===void 0?!1:e?!0:t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==void 0)}function Kd(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function EE(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function $d(e,t){for(var r=e,n=[];(r==null?void 0:r.cause)instanceof Error&&n.length<10;){var i=Rt(r.cause);n.push({message:r.cause.message,source:t,type:i==null?void 0:i.name,stack:i&&kr(i)}),r=r.cause}return n.length?n:void 0}var Ge={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function Wd(e){var t=function(i,o){var a=Hs({stackTrace:i,originalError:o,startClocks:Te(),nonErrorPrefix:"Uncaught",source:Ge.SOURCE,handling:"unhandled"});e.notify(a)},r=_E(t).stop,n=yE(t).stop;return{stop:function(){r(),n()}}}function _E(e){return Pe(window,"onerror",function(t){var r=t.parameters,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c;s instanceof Error?c=Rt(s):c=sE(n,i,o,a),e(c,s??n)})}function yE(e){return Pe(window,"onunhandledrejection",function(t){var r=t.parameters[0],n=r.reason||"Empty reason",i=Rt(n);e(i,n)})}function Yd(e){var t=P({version:"5.25.0",onReady:function(r){r()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return Qg},enumerable:!1}),t}function Xd(e,t,r){var n=e[t];n&&!n.q&&n.version&&K.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=r,n&&n.q&&n.q.forEach(function(i){return bd(i,"onReady callback threw an error:")()})}function Ro(e,t){t.silentMultipleInit||K.error("".concat(e," is already initialized."))}function Q(e,t,r,n,i){return Ve(e,t,[r],n,i)}function Ve(e,t,r,n,i){var o=i===void 0?{}:i,a=o.once,s=o.capture,c=o.passive,u=C(function(p){!p.isTrusted&&!p.__ddIsTrusted&&!e.allowUntrustedEvents||(a&&d(),n(p))}),l=c?{capture:s,passive:c}:s,f=nr(t,"addEventListener");r.forEach(function(p){return f.call(t,p,u,l)});function d(){var p=nr(t,"removeEventListener");r.forEach(function(h){return p.call(t,h,u,l)})}return{stop:d}}var en={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Jd(e,t){var r=[];Fe(t,en.cspViolation)&&r.push(SE(e));var n=t.filter(function(i){return i!==en.cspViolation});return n.length&&r.push(bE(n)),Rd.apply(void 0,r)}function bE(e){return new X(function(t){if(window.ReportingObserver){var r=C(function(i,o){return i.forEach(function(a){return t.notify(wE(a))})}),n=new window.ReportingObserver(r,{types:e,buffered:!0});return n.observe(),function(){n.disconnect()}}})}function SE(e){return new X(function(t){var r=Q(e,document,"securitypolicyviolation",function(n){t.notify(TE(n))}).stop;return r})}function wE(e){var t=e.type,r=e.body;return Zd({type:r.id,message:"".concat(t,": ").concat(r.message),originalError:e,stack:Qd(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)})}function TE(e){var t="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return Zd({type:e.effectiveDirective,message:"".concat(en.cspViolation,": ").concat(t),originalError:e,csp:{disposition:e.disposition},stack:Qd(e.effectiveDirective,e.originalPolicy?"".concat(t,' of the policy "').concat(Od(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}function Zd(e){return P({startClocks:Te(),source:Ge.REPORT,handling:"unhandled"},e)}function Qd(e,t,r,n,i){return r?kr({name:e,message:t,stack:[{func:"?",url:r,line:n??void 0,column:i??void 0}]}):void 0}function Oo(e,t){var r=window.__ddBrowserSdkExtensionCallback;r&&r({type:e,payload:t})}function sr(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function eo(e,t,r){if(r===void 0&&(r=IE()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(!r.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=eo(i[o],t[o],r);return i}var a=sr(e)==="object"?e:{};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a[s]=eo(a[s],t[s],r));return a}}function No(e){return eo(void 0,e)}function $e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n=0,i=e;n<i.length;n++){var o=i[n];o!=null&&(r=eo(r,o))}return r}function IE(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(r){var n=e.has(r);return n||e.add(r),n}}}var t=[];return{hasAlreadyBeenSeen:function(r){var n=t.indexOf(r)>=0;return n||t.push(r),n}}}function ef(){var e,t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:(e=t.connection)===null||e===void 0?void 0:e.effectiveType}}function AE(e){var t=new Set;return e.forEach(function(r){return t.add(r)}),To(t)}function tf(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}var RE=500;function js(){var e=[],t=function(i){var o=e.push(i);o>RE&&e.splice(0,1)},r=function(i){tf(e,i)},n=function(i){e.forEach(function(o){return o(i)}),e.length=0};return{add:t,remove:r,drain:n}}var Tr={log:"log",configuration:"configuration",usage:"usage"},OE=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],NE=[Mm],rf=js(),hn=function(e){rf.add(function(){return hn(e)})};function nf(e,t){var r,n,i=new X,o=new Set,a=!Fe(NE,t.site)&&Zt(t.telemetrySampleRate),s=(r={},r[Tr.log]=a,r[Tr.configuration]=a&&Zt(t.telemetryConfigurationSampleRate),r[Tr.usage]=a&&Zt(t.telemetryUsageSampleRate),r),c=CE();hn=function(l){var f=xr(l);if(s[l.type]&&o.size<t.maxTelemetryEventsPerPage&&!o.has(f)){var d=u(e,l,c);i.notify(d),Oo("telemetry",d),o.add(f)}},Zg(to);function u(l,f,d){return $e({type:"telemetry",date:ne(),service:l,version:"5.25.0",source:"browser",_dd:{format_version:2},telemetry:$e(f,{runtime_env:d,connectivity:ef()}),experimental_features:To(Xm())},n!==void 0?n():{})}return{setContextProvider:function(l){n=l},observable:i,enabled:a}}function CE(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function of(){rf.drain()}function af(e){return e.site===Fd}function ur(e,t){Va(se.debug,e,t),hn(P({type:Tr.log,message:e,status:"debug"},t))}function to(e,t){hn(P({type:Tr.log,status:"error"},LE(e),t))}function sf(e){hn({type:Tr.configuration,configuration:e})}function Re(e){hn({type:Tr.usage,usage:e})}function LE(e){if(e instanceof Error){var t=Rt(e);return{error:{kind:t.name,stack:kr(DE(t))},message:t.message}}return{error:{stack:qd},message:"".concat("Uncaught"," ").concat(xr(e))}}function DE(e){return e.stack=e.stack.filter(function(t){return!t.url||OE.some(function(r){return Zn(t.url,r)})}),e}var Si=1/0,xE=Be;function vn(e){var t=e.expireDelay,r=e.maxEntries,n=[],i=dn(function(){return o()},xE);function o(){for(var d=ft()-t;n.length>0&&n[n.length-1].endTime<d;)n.pop()}function a(d,p){var h={value:d,startTime:p,endTime:Si,remove:function(){tf(n,h)},close:function(v){h.endTime=v}};return r&&n.length>=r&&n.pop(),n.unshift(h),h}function s(d,p){d===void 0&&(d=Si),p===void 0&&(p={returnInactive:!1});for(var h=0,v=n;h<v.length;h++){var g=v[h];if(g.startTime<=d){if(p.returnInactive||d<=g.endTime)return g.value;break}}}function c(d){var p=n[0];p&&p.endTime===Si&&p.close(d)}function u(d,p){d===void 0&&(d=Si),p===void 0&&(p=0);var h=ln(d,p);return n.filter(function(v){return v.startTime<=h&&d<=v.endTime}).map(function(v){return v.value})}function l(){n=[]}function f(){Io(i)}return{add:a,find:s,closeActive:c,findAll:u,reset:l,stop:f}}var kE=Be,PE=Dr;function uf(e,t,r,n){var i=new X,o=new X,a=Lm(e.sessionStoreStrategyType,t,r),s=vn({expireDelay:PE});a.renewObservable.subscribe(function(){s.add(c(),ft()),i.notify()}),a.expireObservable.subscribe(function(){o.notify(),s.closeActive(ft())}),a.expandOrRenewSession(),s.add(c(),wd().relative),n.observable.subscribe(function(){n.isGranted()?a.expandOrRenewSession():a.expire()}),UE(e,function(){n.isGranted()&&a.expandOrRenewSession()}),ME(e,function(){return a.expandSession()}),FE(e,function(){return a.restartSession()});function c(){return{id:a.getSession().id,trackingType:a.getSession()[t],isReplayForced:!!a.getSession().forcedReplay}}return{findSession:function(u,l){return s.find(u,l)},renewObservable:i,expireObservable:o,sessionStateUpdateObservable:a.sessionStateUpdateObservable,expire:a.expire,updateSessionState:a.updateSessionState}}function UE(e,t){Ve(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0}).stop}function ME(e,t){var r=function(){document.visibilityState==="visible"&&t()};Q(e,document,"visibilitychange",r).stop,dn(r,kE)}function FE(e,t){Q(e,window,"resume",t,{capture:!0}).stop}function cf(e){return e>=500}function lf(e){try{return e.clone()}catch{return}}var VE=80*Mt,BE=32,df=3*Td,GE=Be,ff=Ne;function pf(e,t,r,n,i){t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)?vf(e,t,r,{onSuccess:function(){return gf(0,t,r,n,i)},onFailure:function(){t.queuedPayloads.enqueue(e),hf(t,r,n,i)}}):t.queuedPayloads.enqueue(e)}function hf(e,t,r,n){e.transportStatus===2&&Ee(function(){var i=e.queuedPayloads.first();vf(i,e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=ff,gf(1,e,t,r,n)},onFailure:function(){e.currentBackoffTime=Math.min(GE,e.currentBackoffTime*2),hf(e,t,r,n)}})},e.currentBackoffTime)}function vf(e,t,r,n){var i=n.onSuccess,o=n.onFailure;t.bandwidthMonitor.add(e),r(e,function(a){t.bandwidthMonitor.remove(e),zE(a)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:a.status},o()):(t.transportStatus=0,i())})}function gf(e,t,r,n,i){e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(i({message:"Reached max ".concat(n," events size queued for upload: ").concat(df/Td,"MiB"),source:Ge.AGENT,startClocks:Te()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=mf();o.size()>0;)pf(o.dequeue(),t,r,n,i)}function zE(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||cf(e.status))}function HE(){return{transportStatus:0,currentBackoffTime:ff,bandwidthMonitor:jE(),queuedPayloads:mf(),queueFullReported:!1}}function mf(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=df}}}function jE(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=VE&&this.ongoingRequestCount<BE},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}}}function Ef(e,t,r,n){var i=HE(),o=function(a,s){return $E(e,t,r,a,s)};return{send:function(a){pf(a,i,o,t.trackType,n)},sendOnExit:function(a){qE(e,t,r,a)}}}function qE(e,t,r,n){var i=!!navigator.sendBeacon&&n.bytesCount<r;if(i)try{var o=t.build("beacon",n),a=navigator.sendBeacon(o,n.data);if(a)return}catch(c){KE(c)}var s=t.build("xhr",n);za(e,s,n.data)}var ju=!1;function KE(e){ju||(ju=!0,to(e))}function $E(e,t,r,n,i){var o=WE()&&n.bytesCount<r;if(o){var a=t.build("fetch",n);fetch(a,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(C(function(c){return i==null?void 0:i({status:c.status,type:c.type})}),C(function(){var c=t.build("xhr",n);za(e,c,n.data,i)}))}else{var s=t.build("xhr",n);za(e,s,n.data,i)}}function WE(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function za(e,t,r,n){var i=new XMLHttpRequest;i.open("POST",t,!0),r instanceof Blob&&i.setRequestHeader("Content-Type",r.type),Q(e,i,"loadend",function(){n==null||n({status:i.status})},{once:!0}),i.send(r)}function cr(){var e=YE();if(e)return{getCapabilities:function(){var t;return JSON.parse(((t=e.getCapabilities)===null||t===void 0?void 0:t.call(e))||"[]")},getPrivacyLevel:function(){var t;return(t=e.getPrivacyLevel)===null||t===void 0?void 0:t.call(e)},getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r,n){var i=n?{id:n}:void 0;e.send(JSON.stringify({eventType:t,event:r,view:i}))}}}function _f(e){var t=cr();return!!t&&Fe(t.getCapabilities(),e)}function pt(e){var t;e===void 0&&(e=(t=Vt().location)===null||t===void 0?void 0:t.hostname);var r=cr();return!!r&&r.getAllowedWebViewHosts().some(function(n){return e===n||Yg(e,".".concat(n))})}function YE(){return Vt().DatadogEventBridge}var Xr={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function yf(e){return new X(function(t){var r=Ve(e,window,["visibilitychange","freeze"],function(i){i.type==="visibilitychange"&&document.visibilityState==="hidden"?t.notify({reason:Xr.HIDDEN}):i.type==="freeze"&&t.notify({reason:Xr.FROZEN})},{capture:!0}).stop,n=Q(e,window,"beforeunload",function(){t.notify({reason:Xr.UNLOADING})}).stop;return function(){r(),n()}})}function bf(e){return Fe(Jr(Xr),e)}function XE(e){var t=e.encoder,r=e.request,n=e.flushController,i=e.messageBytesLimit,o={},a=n.flushObservable.subscribe(function(d){return f(d)});function s(d,p,h){n.notifyBeforeAddMessage(p),h!==void 0?(o[h]=d,n.notifyAfterAddMessage()):t.write(t.isEmpty?d:`
`.concat(d),function(v){n.notifyAfterAddMessage(v-p)})}function c(d){return d!==void 0&&o[d]!==void 0}function u(d){var p=o[d];delete o[d];var h=t.estimateEncodedBytesCount(p);n.notifyAfterRemoveMessage(h)}function l(d,p){var h=xr(d),v=t.estimateEncodedBytesCount(h);if(v>=i){K.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(i,"KB. ").concat(So," ").concat(yd,"/#technical-limitations"));return}c(p)&&u(p),s(h,v,p)}function f(d){var p=Jr(o).join(`
`);o={};var h=bf(d.reason),v=h?r.sendOnExit:r.send;if(h&&t.isAsync){var g=t.finishSync();g.outputBytesCount&&v(qu(g));var m=[g.pendingData,p].filter(Boolean).join(`
`);m&&v({data:m,bytesCount:Ps(m)})}else p&&t.write(t.isEmpty?p:`
`.concat(p)),t.finish(function(I){v(qu(I))})}return{flushController:n,add:l,upsert:l,stop:a.unsubscribe}}function qu(e){var t;return typeof e.output=="string"?t=e.output:t=new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}function JE(e){var t=e.messagesLimit,r=e.bytesLimit,n=e.durationLimit,i=e.pageExitObservable,o=e.sessionExpireObservable,a=i.subscribe(function(v){return f(v.reason)}),s=o.subscribe(function(){return f("session_expire")}),c=new X(function(){return function(){a.unsubscribe(),s.unsubscribe()}}),u=0,l=0;function f(v){if(l!==0){var g=l,m=u;l=0,u=0,h(),c.notify({reason:v,messagesCount:g,bytesCount:m})}}var d;function p(){d===void 0&&(d=Ee(function(){f("duration_limit")},n))}function h(){ut(d),d=void 0}return{flushObservable:c,get messagesCount(){return l},notifyBeforeAddMessage:function(v){u+v>=r&&f("bytes_limit"),l+=1,u+=v,p()},notifyAfterAddMessage:function(v){v===void 0&&(v=0),u+=v,l>=t?f("messages_limit"):u>=r&&f("bytes_limit")},notifyAfterRemoveMessage:function(v){u-=v,l-=1,l===0&&h()}}}function qs(e,t,r,n,i,o,a){a===void 0&&(a=XE);var s=u(e,t),c=r&&u(e,r);function u(l,f){var d=f.endpoint,p=f.encoder;return a({encoder:p,request:Ef(l,d,l.batchBytesLimit,n),flushController:JE({messagesLimit:l.batchMessagesLimit,bytesLimit:l.batchBytesLimit,durationLimit:l.flushTimeout,pageExitObservable:i,sessionExpireObservable:o}),messageBytesLimit:l.messageBytesLimit})}return{flushObservable:s.flushController.flushObservable,add:function(l,f){f===void 0&&(f=!0),s.add(l),c&&f&&c.add(r.transformMessage?r.transformMessage(l):l)},upsert:function(l,f){s.upsert(l,f),c&&c.upsert(r.transformMessage?r.transformMessage(l):l,f)},stop:function(){s.stop(),c&&c.stop()}}}function zn(){var e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write:function(r,n){var i=Ps(r);t+=i,e+=r,n&&n(i)},finish:function(r){r(this.finishSync())},finishSync:function(){var r={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,r},estimateEncodedBytesCount:function(r){return r.length}}}var Sf=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,r){var n=this.callbacks[t];n&&n.forEach(function(i){return i(r)})},e.prototype.subscribe=function(t,r){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter(function(i){return r!==i})}}},e}();function Vi(e,t,r){var n=0,i=!1;return{isLimitReached:function(){if(n===0&&Ee(function(){n=0},Be),n+=1,n<=t||i)return i=!1,!1;if(n===t+1){i=!0;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:Ge.AGENT,startClocks:Te()})}finally{i=!1}}return!0}}}function Ks(e,t,r){if(document.readyState===t||document.readyState==="complete")r();else{var n=t==="complete"?"load":"DOMContentLoaded";Q(e,window,n,r,{once:!0})}}var la,$s=new WeakMap;function wf(e){return la||(la=ZE(e)),la}function ZE(e){return new X(function(t){var r=Pe(XMLHttpRequest.prototype,"open",QE).stop,n=Pe(XMLHttpRequest.prototype,"send",function(o){e_(o,e,t)},{computeHandlingStack:!0}).stop,i=Pe(XMLHttpRequest.prototype,"abort",t_).stop;return function(){r(),n(),i()}})}function QE(e){var t=e.target,r=e.parameters,n=r[0],i=r[1];$s.set(t,{state:"open",method:String(n).toUpperCase(),url:Gs(String(i))})}function e_(e,t,r){var n=e.target,i=e.handlingStack,o=$s.get(n);if(o){var a=o;a.state="start",a.startClocks=Te(),a.isAborted=!1,a.xhr=n,a.handlingStack=i;var s=!1,c=Pe(n,"onreadystatechange",function(){n.readyState===XMLHttpRequest.DONE&&u()}).stop,u=function(){if(l(),c(),!s){s=!0;var f=o;f.state="complete",f.duration=Ie(a.startClocks.timeStamp,ne()),f.status=n.status,r.notify(Vn(f))}},l=Q(t,n,"loadend",u).stop;r.notify(a)}}function t_(e){var t=e.target,r=$s.get(t);r&&(r.isAborted=!0)}var da;function Co(){return da||(da=r_()),da}function r_(){return new X(function(e){if(window.fetch){var t=Pe(window,"fetch",function(r){return n_(r,e)},{computeHandlingStack:!0}).stop;return t}})}function n_(e,t){var r=e.parameters,n=e.onPostCall,i=e.handlingStack,o=r[0],a=r[1],s=a&&a.method;s===void 0&&o instanceof Request&&(s=o.method);var c=s!==void 0?String(s).toUpperCase():"GET",u=o instanceof Request?o.url:Gs(String(o)),l=Te(),f={state:"start",init:a,input:o,method:c,startClocks:l,url:u,handlingStack:i};t.notify(f),r[0]=f.input,r[1]=f.init,n(function(d){return i_(t,d,f)})}function i_(e,t,r){var n=r;function i(o){n.state="resolve",P(n,o),e.notify(n)}t.then(C(function(o){i({response:o,responseType:o.type,status:o.status,isAborted:!1})}),C(function(o){var a,s;i({status:0,isAborted:((s=(a=n.init)===null||a===void 0?void 0:a.signal)===null||s===void 0?void 0:s.aborted)||o instanceof DOMException&&o.code===DOMException.ABORT_ERR,error:o})}))}var fa={};function Tf(e){var t=e.map(function(r){return fa[r]||(fa[r]=o_(r)),fa[r]});return Rd.apply(void 0,t)}function o_(e){return new X(function(t){var r=bt[e];return bt[e]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.apply(console,n);var o=Qr();Rr(function(){t.notify(a_(n,e,o))})},function(){bt[e]=r}})}function a_(e,t,r){var n=e.map(function(a){return s_(a)}).join(" "),i;if(t===se.error){var o=tr(e,function(a){return a instanceof Error});i={stack:o?kr(Rt(o)):void 0,fingerprint:Kd(o),causes:o?$d(o,"console"):void 0,startClocks:Te(),message:n,source:Ge.CONSOLE,handling:"handled",handlingStack:r}}return{api:t,message:n,error:i,handlingStack:r}}function s_(e){return typeof e=="string"?te(e):e instanceof Error?jd(Rt(e)):xr(te(e),void 0,2)}function Hn(e){var t={},r=new X,n={getContext:function(){return No(t)},setContext:function(i){sr(i)==="object"?(t=te(i),e.updateCustomerData(t)):n.clearContext(),r.notify()},setContextProperty:function(i,o){t[i]=te(o),e.updateCustomerData(t),r.notify()},removeContextProperty:function(i){delete t[i],e.updateCustomerData(t),r.notify()},clearContext:function(){t={},e.resetCustomerData(),r.notify()},changeObservable:r};return n}var u_="_dd_c",c_=[];function ro(e,t,r,n){var i=l_(r,n);c_.push(Q(e,window,"storage",function(c){var u=c.key;i===u&&o()})),t.changeObservable.subscribe(a),t.setContext($e(s(),t.getContext()));function o(){t.setContext(s())}function a(){localStorage.setItem(i,JSON.stringify(t.getContext()))}function s(){var c=localStorage.getItem(i);return c!==null?JSON.parse(c):{}}}function l_(e,t){return"".concat(u_,"_").concat(e,"_").concat(t)}var d_=3*Mt,f_=16*Mt,p_=200;function If(e){e===void 0&&(e=2);var t=new Map,r=!1;function n(i){if(i===void 0&&(i=0),!(r||e===0)){var o=e===2?d_:f_,a=i;t.forEach(function(s){a+=s.getBytesCount()}),a>o&&(h_(o),r=!0)}}return{createDetachedTracker:function(){var i=Ku(function(){return n(i.getBytesCount())});return i},getOrCreateTracker:function(i){return t.has(i)||t.set(i,Ku(n)),t.get(i)},setCompressionStatus:function(i){e===0&&(e=i,n())},getCompressionStatus:function(){return e},stop:function(){t.forEach(function(i){return i.stop()}),t.clear()}}}function Ku(e){var t=0,r=Bt(function(a){t=Ps(xr(a)),e()},p_),n=r.throttled,i=r.cancel,o=function(){i(),t=0};return{updateCustomerData:function(a){rr(a)?o():n(a)},resetCustomerData:o,getBytesCount:function(){return t},stop:function(){i()}}}function h_(e){K.warn("Customer data exceeds the recommended ".concat(e/Mt,"KiB threshold. ").concat(So," ").concat(yd,"/#customer-data-exceeds-the-recommended-threshold-warning"))}function Af(e,t,r){var n=e.getReader(),i=[],o=0;a();function a(){n.read().then(C(function(c){if(c.done){s();return}r.collectStreamBody&&i.push(c.value),o+=c.value.length,o>r.bytesLimit?s():a()}),C(function(c){return t(c)}))}function s(){n.cancel().catch(q);var c,u;if(r.collectStreamBody){var l;if(i.length===1)l=i[0];else{l=new Uint8Array(o);var f=0;i.forEach(function(d){l.set(d,f),f+=d.length})}c=l.slice(0,r.bytesLimit),u=l.length>r.bytesLimit}t(void 0,c,u)}}var v_="datadog-synthetics-public-id",g_="datadog-synthetics-result-id",m_="datadog-synthetics-injects-rum";function Lo(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||Wt(m_))}function Rf(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||Wt(v_);return typeof e=="string"?e:void 0}function Of(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||Wt(g_);return typeof e=="string"?e:void 0}function no(e){var t=P({},e),r=["id","name","email"];return r.forEach(function(n){n in t&&(t[n]=String(t[n]))}),t}function Nf(e){var t=sr(e)==="object";return t||K.error("Unsupported user:",e),t}function Ws(e){var t=sr(e);return t==="string"||t==="function"||e instanceof RegExp}function Cf(e,t,r){return r===void 0&&(r=!1),e.some(function(n){try{if(typeof n=="function")return n(t);if(n instanceof RegExp)return n.test(t);if(typeof n=="string")return r?Zn(t,n):n===t}catch(i){K.error(i)}return!1})}var it;function io(e,t,r){var n=r.getHandler(),i=Array.isArray(n)?n:[n];return $u[e]>=$u[r.getLevel()]&&Fe(i,t)}var B={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},$u=(it={},it[B.ok]=0,it[B.debug]=1,it[B.info]=2,it[B.notice]=4,it[B.warn]=5,it[B.error]=6,it[B.critical]=7,it[B.alert]=8,it[B.emerg]=9,it);function Do(e,t){var r=t===void 0?{}:t,n=r.includeMessage,i=n===void 0?!1:n;return{stack:e.stack,kind:e.type,message:i?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var E_=function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},jn={console:"console",http:"http",silent:"silent"},__=Object.keys(B),ht=function(){function e(t,r,n,i,o,a){i===void 0&&(i=jn.http),o===void 0&&(o=B.debug),a===void 0&&(a={}),this.handleLogStrategy=t,this.handlerType=i,this.level=o,this.contextManager=Hn(r),this.contextManager.setContext(a),n&&this.contextManager.setContextProperty("logger",{name:n})}return e.prototype.logImplementation=function(t,r,n,i,o){n===void 0&&(n=B.info);var a=te(r),s;if(i!=null){var c=Hs({stackTrace:i instanceof Error?Rt(i):void 0,originalError:i,nonErrorPrefix:"Provided",source:Ge.LOGGER,handling:"handled",startClocks:Te()});s=$e({error:Do(c,{includeMessage:!0})},a)}else s=a;this.handleLogStrategy({message:te(t),context:s,status:n},this,o)},e.prototype.log=function(t,r,n,i){n===void 0&&(n=B.info);var o;io(n,jn.http,this)&&(o=Qr()),this.logImplementation(t,r,n,i,o)},e.prototype.setContext=function(t){this.contextManager.setContext(t)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(t,r){this.contextManager.setContextProperty(t,r)},e.prototype.removeContextProperty=function(t){this.contextManager.removeContextProperty(t)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},E_([em],e.prototype,"logImplementation",null),e}();ht.prototype.ok=Gt(B.ok);ht.prototype.debug=Gt(B.debug);ht.prototype.info=Gt(B.info);ht.prototype.notice=Gt(B.notice);ht.prototype.warn=Gt(B.warn);ht.prototype.error=Gt(B.error);ht.prototype.critical=Gt(B.critical);ht.prototype.alert=Gt(B.alert);ht.prototype.emerg=Gt(B.emerg);function Gt(e){return function(t,r,n){var i;io(e,jn.http,this)&&(i=Qr()),this.logImplementation(t,r,e,n,i)}}function y_(e,t){return{view:{referrer:document.referrer,url:window.location.href},context:e.getContext(),user:t.getContext()}}var b_=32*Mt;function S_(e){e.usePciIntake===!0&&e.site&&e.site!=="datadoghq.com"&&K.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=Bd(e),r=Wu(e.forwardConsoleLogs,Jr(se),"Forward Console Logs"),n=Wu(e.forwardReports,Jr(en),"Forward Reports");if(!(!t||!r||!n))return e.forwardErrorsToLogs&&!Fe(r,se.error)&&r.push(se.error),P({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:b_,sendLogsAfterSessionExpiration:!!e.sendLogsAfterSessionExpiration},t)}function Wu(e,t,r){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(n){return Fe(t,n)}))){K.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:AE(e)}function w_(e){var t=Gd(e);return P({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,send_logs_after_session_expiration:e.sendLogsAfterSessionExpiration},t)}function T_(e,t,r){var n=js(),i,o,a=t.observable.subscribe(s);function s(){if(!(!o||!i||!t.isGranted())){a.unsubscribe();var c=r(i,o);n.drain(c)}}return{init:function(c){if(!c){K.error("Missing configuration");return}if(zd(c.enableExperimentalFeatures),pt()&&(c=I_(c)),i=c,o){Ro("DD_LOGS",c);return}var u=S_(c);u&&(o=u,Co().subscribe(q),t.tryToInit(u.trackingConsent),s())},get initConfiguration(){return i},getInternalContext:q,handleLog:function(c,u,l,f,d){f===void 0&&(f=e()),d===void 0&&(d=ne()),n.add(function(p){return p.handleLog(c,u,l,f,d)})}}}function I_(e){return P({},e,{clientToken:"empty"})}var Yu="logs";function A_(e){var t=If(),r=Hn(t.getOrCreateTracker(2)),n=Hn(t.getOrCreateTracker(1)),i=Md();function o(){return y_(r,n)}var a=T_(o,i,function(u,l){u.storeContextsAcrossPages&&(ro(l,r,Yu,2),ro(l,n,Yu,1));var f=e(u,l,o,i);return a=R_(u,f),f}),s={},c=new ht(function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return a.handleLog.apply(a,u)},t.createDetachedTracker());return Yd({logger:c,init:C(function(u){return a.init(u)}),setTrackingConsent:C(function(u){i.update(u),Re({feature:"set-tracking-consent",tracking_consent:u})}),getGlobalContext:C(function(){return r.getContext()}),setGlobalContext:C(function(u){return r.setContext(u)}),setGlobalContextProperty:C(function(u,l){return r.setContextProperty(u,l)}),removeGlobalContextProperty:C(function(u){return r.removeContextProperty(u)}),clearGlobalContext:C(function(){return r.clearContext()}),createLogger:C(function(u,l){return l===void 0&&(l={}),s[u]=new ht(function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return a.handleLog.apply(a,f)},t.createDetachedTracker(),te(u),l.handler,l.level,te(l.context)),s[u]}),getLogger:C(function(u){return s[u]}),getInitConfiguration:C(function(){return No(a.initConfiguration)}),getInternalContext:C(function(u){return a.getInternalContext(u)}),setUser:C(function(u){Nf(u)&&n.setContext(no(u))}),getUser:C(function(){return n.getContext()}),setUserProperty:C(function(u,l){var f,d=no((f={},f[u]=l,f))[u];n.setContextProperty(u,d)}),removeUserProperty:C(function(u){return n.removeContextProperty(u)}),clearUser:C(function(){return n.clearContext()})})}function R_(e,t){return P({init:function(r){Ro("DD_LOGS",r)},initConfiguration:e},t)}var O_="logs";function N_(e,t){var r=uf(e,O_,function(n){return L_(e,n)},t);return{findTrackedSession:function(n,i){i===void 0&&(i={returnInactive:!1});var o=r.findSession(n,i);return o&&o.trackingType==="1"?{id:o.id}:void 0},expireObservable:r.expireObservable}}function C_(e){var t=Lf(e)==="1",r=t?{}:void 0;return{findTrackedSession:function(){return r},expireObservable:new X}}function Lf(e){return Zt(e.sessionSampleRate)?"1":"0"}function L_(e,t){var r=D_(t)?t:Lf(e);return{trackingType:r,isTracked:r==="1"}}function D_(e){return e==="0"||e==="1"}var Xu=!1;function Bi(e){var t=window;if(Lo()){var r=n(t.DD_RUM_SYNTHETICS);return!r&&!Xu&&(Xu=!0,ur("Logs sent before RUM is injected by the synthetics worker",{testId:Rf(),resultId:Of()})),r}return n(t.DD_RUM);function n(i){if(i&&i.getInternalContext)return i.getInternalContext(e)}}function x_(e,t,r,n,i){var o=__.concat(["custom"]),a={};o.forEach(function(s){a[s]=Vi(s,t.eventRateLimiterThreshold,i)}),r.subscribe(0,function(s){var c,u,l=s.rawLogsEvent,f=s.messageContext,d=f===void 0?void 0:f,p=s.savedCommonContext,h=p===void 0?void 0:p,v=s.domainContext,g=wo(l.date),m=e.findTrackedSession(g);if(!(!m&&(!t.sendLogsAfterSessionExpiration||!e.findTrackedSession(g,{returnInactive:!0})))){var I=h||n(),S=$e({service:t.service,session_id:m?m.id:void 0,usr:rr(I.user)?void 0:I.user,view:I.view},I.context,Bi(g),l,d);((c=t.beforeSend)===null||c===void 0?void 0:c.call(t,S,v))===!1||S.origin!==Ge.AGENT&&((u=a[S.status])!==null&&u!==void 0?u:a.custom).isLimitReached()||r.notify(1,S)}})}var lr,k_=(lr={},lr[se.log]=B.info,lr[se.debug]=B.debug,lr[se.info]=B.info,lr[se.warn]=B.warn,lr[se.error]=B.error,lr);function P_(e,t){var r=Tf(e.forwardConsoleLogs).subscribe(function(n){var i={rawLogsEvent:{date:ne(),message:n.message,origin:Ge.CONSOLE,error:n.error&&Do(n.error),status:k_[n.api]},domainContext:{handlingStack:n.handlingStack}};t.notify(0,i)});return{stop:function(){r.unsubscribe()}}}function U_(e,t){var r=Jd(e,e.forwardReports).subscribe(function(n){var i=n.message,o,a=n.originalError.type==="deprecation"?B.warn:B.error;a===B.error?o=Do(n):n.stack&&(i+=" Found in ".concat(EE(n.stack))),t.notify(0,{rawLogsEvent:{date:ne(),message:i,origin:Ge.REPORT,error:o,status:a}})});return{stop:function(){r.unsubscribe()}}}function M_(e,t){if(!e.forwardErrorsToLogs)return{stop:q};var r=wf(e).subscribe(function(o){o.state==="complete"&&i("xhr",o)}),n=Co().subscribe(function(o){o.state==="resolve"&&i("fetch",o)});function i(o,a){!e.isIntakeUrl(a.url)&&(G_(a)||cf(a.status))&&("xhr"in a?F_(a.xhr,e,s):a.response?B_(a.response,e,s):a.error&&V_(a.error,e,s));function s(c){var u={isAborted:a.isAborted,handlingStack:a.handlingStack};t.notify(0,{rawLogsEvent:{message:"".concat(z_(o)," error ").concat(a.method," ").concat(a.url),date:a.startClocks.timeStamp,error:{stack:c||"Failed to load",handling:void 0},http:{method:a.method,status_code:a.status,url:a.url},status:B.error,origin:Ge.NETWORK},domainContext:u})}}return{stop:function(){r.unsubscribe(),n.unsubscribe()}}}function F_(e,t,r){typeof e.response=="string"?r(Ys(e.response,t)):r(e.response)}function V_(e,t,r){r(Ys(kr(Rt(e)),t))}function B_(e,t,r){var n=lf(e);!n||!n.body?r():window.TextDecoder?H_(n.body,t.requestErrorResponseLengthLimit,function(i,o){r(i?"Unable to retrieve response: ".concat(i):o)}):n.text().then(C(function(i){return r(Ys(i,t))}),C(function(i){return r("Unable to retrieve response: ".concat(i))}))}function G_(e){return e.status===0&&e.responseType!=="opaque"}function Ys(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function z_(e){return e==="xhr"?"XHR":"Fetch"}function H_(e,t,r){Af(e,function(n,i,o){if(n)r(n);else{var a=new TextDecoder().decode(i);o&&(a+="..."),r(void 0,a)}},{bytesLimit:t,collectStreamBody:!0})}function j_(e,t){if(!e.forwardErrorsToLogs)return{stop:q};var r=new X,n=Wd(r).stop,i=r.subscribe(function(o){t.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:Do(o),origin:Ge.SOURCE,status:B.error}})});return{stop:function(){n(),i.unsubscribe()}}}var q_=Sf,ot;function K_(e){function t(r,n,i,o,a){var s=$e(n.getContext(),r.context);if(io(r.status,jn.console,n)&&W_(r,s),io(r.status,jn.http,n)){var c={rawLogsEvent:{date:a||ne(),message:r.message,status:r.status,origin:Ge.LOGGER},messageContext:s,savedCommonContext:o};i&&(c.domainContext={handlingStack:i}),e.notify(0,c)}}return{handleLog:t}}var $_=(ot={},ot[B.ok]=se.debug,ot[B.debug]=se.debug,ot[B.info]=se.info,ot[B.notice]=se.info,ot[B.warn]=se.warn,ot[B.error]=se.error,ot[B.critical]=se.error,ot[B.alert]=se.error,ot[B.emerg]=se.error,ot);function W_(e,t){var r=e.status,n=e.message;hr[$_[r]].call(bt,n,t)}function Y_(e,t,r,n,i){var o=qs(e,{endpoint:e.logsEndpointBuilder,encoder:zn()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:zn()},r,n,i.expireObservable);return t.subscribe(1,function(a){o.add(a)}),o}function X_(e){var t=cr();e.subscribe(1,function(r){t.send("log",r)})}function J_(e){return{get:function(t){var r=e.findTrackedSession(t);if(r)return{session_id:r.id}}}}function Z_(e){return function(t){e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:Ge.AGENT,status:B.error}}),ur("Error reported to customer",{"error.message":t.message})}}function Q_(e,t,r,n,i){var o=nf("browser-logs-sdk",t);o.setContextProvider(function(){var f,d,p,h,v,g;return{application:{id:(f=Bi())===null||f===void 0?void 0:f.application_id},session:{id:(d=i.findTrackedSession())===null||d===void 0?void 0:d.id},view:{id:(h=(p=Bi())===null||p===void 0?void 0:p.view)===null||h===void 0?void 0:h.id},action:{id:(g=(v=Bi())===null||v===void 0?void 0:v.user_action)===null||g===void 0?void 0:g.id}}});var a=[];if(pt()){var s=cr(),c=o.observable.subscribe(function(f){return s.send("internal_telemetry",f)});a.push(function(){return c.unsubscribe()})}else{var u=qs(t,{endpoint:t.rumEndpointBuilder,encoder:zn()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:zn()},r,n,i.expireObservable);a.push(function(){return u.stop()});var l=o.observable.subscribe(function(f){return u.add(f,af(t))});a.push(function(){return l.unsubscribe()})}return of(),sf(w_(e)),{telemetry:o,stop:function(){a.forEach(function(f){return f()})}}}function ey(e,t,r,n){var i=new q_,o=[];i.subscribe(1,function(p){return Oo("logs",p)});var a=Z_(i),s=yf(t),c=t.sessionStoreStrategyType&&!pt()&&!Lo()?N_(t,n):C_(t),u=Q_(e,t,a,s,c).stop;o.push(function(){return u()}),M_(t,i),j_(t,i),P_(t,i),U_(t,i);var l=K_(i).handleLog;if(x_(c,t,i,r,a),pt())X_(i);else{var f=Y_(t,i,a,s,c).stop;o.push(function(){return f()})}var d=J_(c);return{handleLog:l,getInternalContext:d.get,stop:function(){o.forEach(function(p){return p()})}}}var mr=A_(ey);Xd(Vt(),"DD_LOGS",mr);function ty(e,t,r){return{context:e.getContext(),user:t.getContext(),hasReplay:r.isRecording()?!0:void 0}}function ry(){var e=new Map,t=new WeakMap;return{vitalsByName:e,vitalsByReference:t}}function ny(e,t,r){function n(o){return!t.wasInPageStateDuringPeriod("frozen",o.startClocks.relative,o.duration)}function i(o){n(o)&&e.notify(12,oy(o))}return{addDurationVital:i,startDurationVital:function(o,a){return a===void 0&&(a={}),Df(r,o,a)},stopDurationVital:function(o,a){a===void 0&&(a={}),xf(i,r,o,a)}}}function Df(e,t,r){var n=e.vitalsByName,i=e.vitalsByReference;r===void 0&&(r={});var o={name:t,startClocks:Te(),context:r.context,description:r.description},a={__dd_vital_reference:!0};return n.set(t,o),i.set(a,o),a}function xf(e,t,r,n){var i=t.vitalsByName,o=t.vitalsByReference;n===void 0&&(n={});var a=typeof r=="string"?i.get(r):o.get(r);a&&(e(iy(a,a.startClocks,n,Te())),typeof r=="string"?i.delete(r):o.delete(r))}function iy(e,t,r,n){var i;return{name:e.name,type:"duration",startClocks:t,duration:Ie(t.timeStamp,n.timeStamp),context:$e(e.context,r.context),description:(i=r.description)!==null&&i!==void 0?i:e.description}}function oy(e,t){var r={date:e.startClocks.timeStamp,vital:{id:Ae(),type:e.type,name:e.name,duration:Y(e.duration),description:e.description},type:"vital"};return r._dd={vital:{computed_value:!0}},{rawRumEvent:r,startTime:e.startClocks.relative,customerContext:e.context,domainContext:{}}}function ay(e){var t=e;return sr(t)==="object"&&Ws(t.match)&&Array.isArray(t.propagatorTypes)}function sy(e){e.status===0&&!e.isAborted&&(e.traceId=void 0,e.spanId=void 0,e.traceSampled=void 0)}function uy(e,t){return{clearTracingIfNeeded:sy,traceFetch:function(r){return Ju(e,r,t,function(n){var i;if(r.input instanceof Request&&!(!((i=r.init)===null||i===void 0)&&i.headers))r.input=new Request(r.input),Object.keys(n).forEach(function(a){r.input.headers.append(a,n[a])});else{r.init=Vn(r.init);var o=[];r.init.headers instanceof Headers?r.init.headers.forEach(function(a,s){o.push([s,a])}):Array.isArray(r.init.headers)?r.init.headers.forEach(function(a){o.push(a)}):r.init.headers&&Object.keys(r.init.headers).forEach(function(a){o.push([a,r.init.headers[a]])}),r.init.headers=o.concat(Us(n))}})},traceXhr:function(r,n){return Ju(e,r,t,function(i){Object.keys(i).forEach(function(o){n.setRequestHeader(o,i[o])})})}}}function Ju(e,t,r,n){if(!(!cy()||!r.findTrackedSession())){var i=tr(e.allowedTracingUrls,function(o){return Cf([o.match],t.url,!0)});i&&(t.traceSampled=!cn(e.traceSampleRate)||Zt(e.traceSampleRate),!(!t.traceSampled&&e.traceContextInjection!==Ga.ALL)&&(t.traceId=Ha(),t.spanId=Ha(),n(ly(t.traceId,t.spanId,t.traceSampled,i.propagatorTypes))))}}function cy(){return kf()!==void 0}function kf(){return window.crypto||window.msCrypto}function ly(e,t,r,n){var i={};return n.forEach(function(o){switch(o){case"datadog":{P(i,{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampling-priority":r?"1":"0","x-datadog-trace-id":e.toDecimalString()});break}case"tracecontext":{P(i,{traceparent:"00-0000000000000000".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-0").concat(r?"1":"0")});break}case"b3":{P(i,{b3:"".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-").concat(r?"1":"0")});break}case"b3multi":{P(i,{"X-B3-TraceId":e.toPaddedHexadecimalString(),"X-B3-SpanId":t.toPaddedHexadecimalString(),"X-B3-Sampled":r?"1":"0"});break}}}),i}function Ha(){var e=new Uint8Array(8);kf().getRandomValues(e),e[0]=e[0]&127;function t(o){return e[o]*16777216+(e[o+1]<<16)+(e[o+2]<<8)+e[o+3]}function r(o){var a=t(0),s=t(4),c="";do{var u=a%o*4294967296+s;a=Math.floor(a/o),s=Math.floor(u/o),c=(u%o).toString(o)+c}while(a||s);return c}function n(){return r(10)}function i(){var o=r(16);return Array(17-o.length).join("0")+o}return{toDecimalString:n,toPaddedHexadecimalString:i}}var Pf=["tracecontext","datadog"];function dy(e){var t,r;if(!e.applicationId){K.error("Application ID is not configured, no RUM data will be collected.");return}if(!(!Kr(e.sessionReplaySampleRate,"Session Replay")||!Kr(e.traceSampleRate,"Trace"))){if(e.excludedActivityUrls!==void 0&&!Array.isArray(e.excludedActivityUrls)){K.error("Excluded Activity Urls should be an array");return}var n=fy(e);if(n){var i=Bd(e);if(i)return P({applicationId:e.applicationId,version:e.version||void 0,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:(t=e.sessionReplaySampleRate)!==null&&t!==void 0?t:0,startSessionReplayRecordingManually:!!e.startSessionReplayRecordingManually,traceSampleRate:e.traceSampleRate,allowedTracingUrls:n,excludedActivityUrls:(r=e.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:e.workerUrl,compressIntakeRequests:!!e.compressIntakeRequests,trackUserInteractions:!!e.trackUserInteractions,trackViewsManually:!!e.trackViewsManually,trackResources:!!e.trackResources,trackLongTasks:!!e.trackLongTasks,subdomain:e.subdomain,defaultPrivacyLevel:Bn(kn,e.defaultPrivacyLevel)?e.defaultPrivacyLevel:kn.MASK,enablePrivacyForActionName:!!e.enablePrivacyForActionName,customerDataTelemetrySampleRate:1,traceContextInjection:Bn(Ga,e.traceContextInjection)?e.traceContextInjection:Ga.ALL,plugins:e.betaPlugins||[]},i)}}}function fy(e){if(e.allowedTracingUrls===void 0)return[];if(!Array.isArray(e.allowedTracingUrls)){K.error("Allowed Tracing URLs should be an array");return}if(e.allowedTracingUrls.length!==0&&e.service===void 0){K.error("Service needs to be configured when tracing is enabled");return}var t=[];return e.allowedTracingUrls.forEach(function(r){Ws(r)?t.push({match:r,propagatorTypes:Pf}):ay(r)?t.push(r):K.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",r)}),t}function py(e){var t=new Set;return Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0&&e.allowedTracingUrls.forEach(function(r){Ws(r)?Pf.forEach(function(n){return t.add(n)}):sr(r)==="object"&&Array.isArray(r.propagatorTypes)&&r.propagatorTypes.forEach(function(n){return t.add(n)})}),To(t)}function hy(e){var t,r=Gd(e);return P({session_replay_sample_rate:e.sessionReplaySampleRate,start_session_replay_recording_manually:e.startSessionReplayRecordingManually,trace_sample_rate:e.traceSampleRate,trace_context_injection:e.traceContextInjection,action_name_attribute:e.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0,selected_tracing_propagators:py(e),default_privacy_level:e.defaultPrivacyLevel,enable_privacy_for_action_name:e.enablePrivacyForActionName,use_excluded_activity_urls:Array.isArray(e.excludedActivityUrls)&&e.excludedActivityUrls.length>0,use_worker_url:!!e.workerUrl,compress_intake_requests:e.compressIntakeRequests,track_views_manually:e.trackViewsManually,track_user_interactions:e.trackUserInteractions,track_resources:e.trackResources,track_long_task:e.trackLongTasks,plugins:(t=e.betaPlugins)===null||t===void 0?void 0:t.map(function(n){var i;return P({name:n.name},(i=n.getConfigurationTelemetry)===null||i===void 0?void 0:i.call(n))})},r)}var vy="https://d3uc069fcn7uxw.cloudfront.net/configuration";function gy(e,t){Ey(e,function(r){t(my(e,r))})}function my(e,t){return P({},e,t)}function Ey(e,t){var r=new XMLHttpRequest;Q(e,r,"load",function(){r.status===200?t(JSON.parse(r.responseText)):Zu()}),Q(e,r,"error",function(){Zu()}),r.open("GET","".concat(vy,"/").concat(encodeURIComponent(e.remoteConfigurationId),".json")),r.send()}function Zu(){K.error("Error fetching the remote configuration.")}function _y(e,t,r){if(e)for(var n=0,i=e;n<i.length;n++){var o=i[n],a=o[t];a&&a(r)}}function yy(e,t,r,n,i){var o=e.ignoreInitIfSyntheticsWillInjectRum,a=e.startDeflateWorker,s=js(),c,u,l,f,d=r.observable.subscribe(p);function p(){if(!(!l||!f||!r.isGranted())){d.unsubscribe();var g;if(f.trackViewsManually){if(!c)return;s.remove(c.callback),g=c.options}var m=i(f,u,g);s.drain(m)}}function h(g){var m=pt();if(m&&(g=by(g)),l=g,sf(hy(g)),f){Ro("DD_RUM",g);return}var I=dy(g);if(I){if(!m&&!I.sessionStoreStrategyType){K.warn("No storage available for session. We will not send any data.");return}I.compressIntakeRequests&&!m&&a&&(u=a(I,"Datadog RUM",q),!u)||(f=I,Co().subscribe(q),r.tryToInit(I.trackingConsent),p())}}var v=function(g){s.add(function(m){return m.addDurationVital(g)})};return{init:function(g,m){if(!g){K.error("Missing configuration");return}zd(g.enableExperimentalFeatures),l=g,!(o&&Lo())&&(_y(g.betaPlugins,"onInit",{initConfiguration:g,publicApi:m}),g.remoteConfigurationId&&pn(Ft.REMOTE_CONFIGURATION)?gy(g,h):h(g))},get initConfiguration(){return l},getInternalContext:q,stopSession:q,addTiming:function(g,m){m===void 0&&(m=ne()),s.add(function(I){return I.addTiming(g,m)})},startView:function(g,m){m===void 0&&(m=Te());var I=function(S){S.startView(g,m)};s.add(I),c||(c={options:g,callback:I},p())},updateViewName:function(g){s.add(function(m){return m.updateViewName(g)})},addAction:function(g,m){m===void 0&&(m=t()),s.add(function(I){return I.addAction(g,m)})},addError:function(g,m){m===void 0&&(m=t()),s.add(function(I){return I.addError(g,m)})},addFeatureFlagEvaluation:function(g,m){s.add(function(I){return I.addFeatureFlagEvaluation(g,m)})},startDurationVital:function(g,m){return Df(n,g,m)},stopDurationVital:function(g,m){xf(v,n,g,m)},addDurationVital:v}}function by(e){var t,r;return P({},e,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100,defaultPrivacyLevel:(t=e.defaultPrivacyLevel)!==null&&t!==void 0?t:(r=cr())===null||r===void 0?void 0:r.getPrivacyLevel()})}var Qu="rum";function Sy(e,t,r){r===void 0&&(r={});var n=If(0),i=Hn(n.getOrCreateTracker(2)),o=Hn(n.getOrCreateTracker(1)),a=Md(),s=ry();function c(){return ty(i,o,t)}var u=yy(r,c,a,s,function(d,p,h){pn(Ft.UPDATE_VIEW_NAME)&&(f.updateViewName=C(function(g){u.updateViewName(g)})),d.storeContextsAcrossPages&&(ro(d,i,Qu,2),ro(d,o,Qu,1)),n.setCompressionStatus(p?1:2);var v=e(d,t,n,c,h,p&&r.createDeflateEncoder?function(g){return r.createDeflateEncoder(d,p,g)}:zn,a,s);return t.onRumStart(v.lifeCycle,d,v.session,v.viewContexts,p),u=wy(u,v),v}),l=C(function(d){var p=typeof d=="object"?d:{name:d};u.startView(p),Re({feature:"start-view"})}),f=Yd({init:C(function(d){return u.init(d,f)}),setTrackingConsent:C(function(d){a.update(d),Re({feature:"set-tracking-consent",tracking_consent:d})}),setGlobalContext:C(function(d){i.setContext(d),Re({feature:"set-global-context"})}),getGlobalContext:C(function(){return i.getContext()}),setGlobalContextProperty:C(function(d,p){i.setContextProperty(d,p),Re({feature:"set-global-context"})}),removeGlobalContextProperty:C(function(d){return i.removeContextProperty(d)}),clearGlobalContext:C(function(){return i.clearContext()}),getInternalContext:C(function(d){return u.getInternalContext(d)}),getInitConfiguration:C(function(){return No(u.initConfiguration)}),addAction:function(d,p){var h=Qr();Rr(function(){u.addAction({name:te(d),context:te(p),startClocks:Te(),type:"custom",handlingStack:h}),Re({feature:"add-action"})})},addError:function(d,p){var h=Qr();Rr(function(){u.addError({error:d,handlingStack:h,context:te(p),startClocks:Te()}),Re({feature:"add-error"})})},addTiming:C(function(d,p){u.addTiming(te(d),p)}),setUser:C(function(d){Nf(d)&&o.setContext(no(d)),Re({feature:"set-user"})}),getUser:C(function(){return o.getContext()}),setUserProperty:C(function(d,p){var h,v=no((h={},h[d]=p,h))[d];o.setContextProperty(d,v),Re({feature:"set-user"})}),removeUserProperty:C(function(d){return o.removeContextProperty(d)}),clearUser:C(function(){return o.clearContext()}),startView:l,stopSession:C(function(){u.stopSession(),Re({feature:"stop-session"})}),addFeatureFlagEvaluation:C(function(d,p){u.addFeatureFlagEvaluation(te(d),te(p)),Re({feature:"add-feature-flag-evaluation"})}),getSessionReplayLink:C(function(){return t.getSessionReplayLink()}),startSessionReplayRecording:C(function(d){t.start(d),Re({feature:"start-session-replay-recording",force:d&&d.force})}),stopSessionReplayRecording:C(function(){return t.stop()}),addDurationVital:C(function(d,p){Re({feature:"add-duration-vital"}),u.addDurationVital({name:te(d),type:"duration",startClocks:Gg(p.startTime),duration:p.duration,context:te(p&&p.context),description:te(p&&p.description)})}),startDurationVital:C(function(d,p){return Re({feature:"start-duration-vital"}),u.startDurationVital(te(d),{context:te(p&&p.context),description:te(p&&p.description)})}),stopDurationVital:C(function(d,p){Re({feature:"stop-duration-vital"}),u.stopDurationVital(typeof d=="string"?te(d):d,{context:te(p&&p.context),description:te(p&&p.description)})})});return f}function wy(e,t){return P({init:function(r){Ro("DD_RUM",r)},initConfiguration:e.initConfiguration},t)}function Ty(){var e=Uf();return new X(function(t){if(e){var r=new e(C(function(){return t.notify()}));return r.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return r.disconnect()}}})}function Uf(){var e,t=window;if(t.Zone&&(e=nr(t,"MutationObserver"),t.MutationObserver&&e===t.MutationObserver)){var r=new t.MutationObserver(q),n=nr(r,"originalInstance");e=n&&n.constructor}return e||(e=t.MutationObserver),e}var Mf="initial_document",Iy=[["document",function(e){return Mf===e}],["xhr",function(e){return e==="xmlhttprequest"}],["fetch",function(e){return e==="fetch"}],["beacon",function(e){return e==="beacon"}],["css",function(e,t){return/\.css$/i.test(t)}],["js",function(e,t){return/\.js$/i.test(t)}],["image",function(e,t){return Fe(["image","img","icon"],e)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)!==null}],["font",function(e,t){return/\.(woff|eot|woff2|ttf)$/i.exec(t)!==null}],["media",function(e,t){return Fe(["audio","video"],e)||/\.(mp3|mp4)$/i.exec(t)!==null}]];function Ay(e){var t=e.name;if(!Dm(t))return ur('Failed to construct URL for "'.concat(e.name,'"')),"other";for(var r=xm(t),n=0,i=Iy;n<i.length;n++){var o=i[n],a=o[0],s=o[1];if(s(e.initiatorType,r))return a}return"other"}function ec(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=1;r<e.length;r+=1)if(e[r-1]>e[r])return!1;return!0}function Ry(e){return e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch"}function Oy(e){var t=e.duration,r=e.startTime,n=e.responseEnd;return t===0&&r<n?Y(Ie(r,n)):Y(t)}function Ny(e){if(Ff(e)){var t=e.startTime,r=e.fetchStart,n=e.redirectStart,i=e.redirectEnd,o=e.domainLookupStart,a=e.domainLookupEnd,s=e.connectStart,c=e.secureConnectionStart,u=e.connectEnd,l=e.requestStart,f=e.responseStart,d=e.responseEnd,p={download:Vr(t,f,d),first_byte:Vr(t,l,f)};return r<u&&(p.connect=Vr(t,s,u),s<=c&&c<=u&&(p.ssl=Vr(t,c,u))),r<a&&(p.dns=Vr(t,o,a)),t<i&&(p.redirect=Vr(t,n,i)),p}}function Ff(e){if(pn(Ft.TOLERANT_RESOURCE_TIMINGS))return!0;var t=ec(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd),r=Cy(e)?ec(e.startTime,e.redirectStart,e.redirectEnd,e.fetchStart):!0;return t&&r}function Cy(e){return e.redirectEnd>e.startTime}function Vr(e,t,r){if(e<=t&&t<=r)return{duration:Y(Ie(t,r)),start:Y(Ie(e,t))}}function Ly(e){if(e.startTime<e.responseStart){var t=e.encodedBodySize,r=e.decodedBodySize,n=e.transferSize;return{size:r,encoded_body_size:t,decoded_body_size:r,transfer_size:n}}return{size:void 0,encoded_body_size:void 0,decoded_body_size:void 0,transfer_size:void 0}}function Xs(e,t){return t&&!e.isIntakeUrl(t)}var Dy=/data:(.+)?(;base64)?,/g,tc=24e3;function Vf(e){return e.length<=tc?!1:e.substring(0,5)==="data:"?(e=e.substring(0,tc),!0):!1}function Bf(e){return"".concat(e.match(Dy)[0],"[...]")}var H;(function(e){e.EVENT="event",e.FIRST_INPUT="first-input",e.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",e.LAYOUT_SHIFT="layout-shift",e.LONG_TASK="longtask",e.LONG_ANIMATION_FRAME="long-animation-frame",e.NAVIGATION="navigation",e.PAINT="paint",e.RESOURCE="resource"})(H||(H={}));function xo(e,t){return new X(function(r){if(window.PerformanceObserver){var n=function(c){var u=Py(e,c);u.length>0&&r.notify(u)},i,o=!0,a=new PerformanceObserver(C(function(c){o?i=Ee(function(){return n(c.getEntries())}):n(c.getEntries())}));try{a.observe(t)}catch{var s=[H.RESOURCE,H.NAVIGATION,H.LONG_TASK,H.PAINT];if(Fe(s,t.type)){t.buffered&&(i=Ee(function(){return n(performance.getEntriesByType(t.type))}));try{a.observe({entryTypes:[t.type]})}catch{return}}}return o=!1,xy(e),function(){a.disconnect(),ut(i)}}})}var In;function xy(e){return!In&&ky()&&"addEventListener"in performance&&(In=Q(e,performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()})),function(){In==null||In.stop()}}function ky(){return window.performance!==void 0&&"getEntries"in performance}function ti(e){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(e)}function Py(e,t){return t.filter(function(r){return!Uy(e,r)})}function Uy(e,t){return t.entryType===H.RESOURCE&&!Xs(e,t.name)}function rc(){return window.performance!==void 0&&"getEntries"in performance}function My(e,t){var r=[];if(rc()){var n=performance.getEntries();Ee(function(){return pa(e,n)})}if(window.PerformanceObserver){var i=C(function(l){return pa(e,l.getEntries())}),o=[H.LONG_TASK,H.PAINT],a=[H.LARGEST_CONTENTFUL_PAINT,H.FIRST_INPUT,H.LAYOUT_SHIFT,H.EVENT];try{a.forEach(function(l){var f=new window.PerformanceObserver(i);f.observe({type:l,buffered:!0,durationThreshold:40}),r.push(function(){return f.disconnect()})})}catch{o.push.apply(o,a)}var s=new PerformanceObserver(i);try{s.observe({entryTypes:o}),r.push(function(){return s.disconnect()})}catch{}if(rc()&&"addEventListener"in performance){var c=Q(t,performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()}).stop;r.push(c)}}if(!ti(H.FIRST_INPUT)){var u=Fy(t,function(l){pa(e,[l])}).stop;r.push(u)}return{stop:function(){r.forEach(function(l){return l()})}}}function Fy(e,t){var r=At(),n=!1,i=Ve(e,window,["click","mousedown","keydown","touchstart","pointerdown"],function(s){if(s.cancelable){var c={entryType:H.FIRST_INPUT,processingStart:ft(),processingEnd:ft(),startTime:s.timeStamp,duration:0,name:""};s.type==="pointerdown"?o(e,c):a(c)}},{passive:!0,capture:!0}).stop;return{stop:i};function o(s,c){Ve(s,window,["pointerup","pointercancel"],function(u){u.type==="pointerup"&&a(c)},{once:!0})}function a(s){if(!n){n=!0,i();var c=s.processingStart-s.startTime;c>=0&&c<At()-r&&t(s)}}}function pa(e,t){var r=t.filter(function(n){return Bn(H,n.entryType)});r.length&&e.notify(0,r)}function Vy(){var e=Rf(),t=Of();if(e&&t)return{test_id:e,result_id:t,injected:Lo()}}function By(e,t,r){var n=No(e),i=r(n);return Us(t).forEach(function(o){var a=o[0],s=o[1],c=Gy(n,a),u=sr(c);u===s?nc(e,a,te(c)):s==="object"&&(u==="undefined"||u==="null")&&nc(e,a,{})}),i}function Gy(e,t){for(var r=e,n=0,i=t.split(".");n<i.length;n++){var o=i[n];if(!zy(r,o))return;r=r[o]}return r}function nc(e,t,r){for(var n=e,i=t.split("."),o=0;o<i.length;o+=1){var a=i[o];if(!Gf(n))return;o!==i.length-1?n=n[a]:n[a]=r}}function Gf(e){return sr(e)==="object"}function zy(e,t){return Gf(e)&&Object.prototype.hasOwnProperty.call(e,t)}var Br={"view.name":"string","view.url":"string","view.referrer":"string"},An={context:"object"},ha={service:"string",version:"string"},zf;function Hy(e,t,r,n,i,o,a,s,c,u){var l,f;zf=(l={},l.view=Br,l.error=P({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},An,Br,ha),l.resource=P({"resource.url":"string"},pn(Ft.WRITABLE_RESOURCE_GRAPHQL)?{"resource.graphql":"object"}:{},An,Br,ha),l.action=P({"action.target.name":"string"},An,Br,ha),l.long_task=P({},An,Br),l.vital=P({},An,Br),l);var d=(f={},f.error=Vi("error",e.eventRateLimiterThreshold,u),f.action=Vi("action",e.eventRateLimiterThreshold,u),f.vital=Vi("vital",e.eventRateLimiterThreshold,u),f),p=Vy();t.subscribe(12,function(h){var v=h.startTime,g=h.rawRumEvent,m=h.domainContext,I=h.savedCommonContext,S=h.customerContext,_=n.findView(v),E=i.findUrl(v),y=r.findTrackedSession(v);if(y&&_&&E){var b=I||c(),R=o.findActionId(v),N={_dd:{format_version:2,drift:Hg(),configuration:{session_sample_rate:Xi(e.sessionSampleRate,3),session_replay_sample_rate:Xi(e.sessionReplaySampleRate,3)},browser_sdk_version:pt()?"5.25.0":void 0},application:{id:e.applicationId},date:ne(),service:_.service||e.service,version:_.version||e.version,source:"browser",session:{id:y.id,type:p?"synthetics":s.get()?"ci_test":"user"},view:{id:_.id,name:_.name,url:E.url,referrer:E.referrer},action:qy(g)&&R?{id:R}:void 0,synthetics:p,ci_test:s.get(),display:a.get(),connectivity:ef()},x=$e(N,g);x.context=$e(b.context,S),"has_replay"in x.session||(x.session.has_replay=b.hasReplay),x.type==="view"&&(x.session.sampled_for_replay=y.sessionReplay===1),rr(b.user)||(x.usr=b.user),jy(x,e.beforeSend,m,d)&&(rr(x.context)&&delete x.context,t.notify(13,x))}})}function jy(e,t,r,n){var i;if(t){var o=By(e,zf[e.type],function(s){return t(s,r)});if(o===!1&&e.type!=="view")return!1;o===!1&&K.warn("Can't dismiss view events using beforeSend!")}var a=(i=n[e.type])===null||i===void 0?void 0:i.isLimitReached();return!a}function qy(e){return["error","resource","long_task"].indexOf(e.type)!==-1}function Ky(e,t,r,n,i){return{get:function(o){var a=r.findView(o),s=i.findUrl(o),c=t.findTrackedSession(o);if(c&&a&&s){var u=n.findActionId(o);return{application_id:e,session_id:c.id,user_action:u?{id:u}:void 0,view:{id:a.id,name:a.name,referrer:s.referrer,url:s.url}}}}}}var $y=Sf,Wy=Dr;function Yy(e){var t=vn({expireDelay:Wy});e.subscribe(2,function(n){t.add(r(n),n.startClocks.relative)}),e.subscribe(6,function(n){var i=n.endClocks;t.closeActive(i.relative)}),e.subscribe(4,function(n){var i=t.find(n.startClocks.relative);i&&n.name&&(i.name=n.name)}),e.subscribe(10,function(){t.reset()});function r(n){return{service:n.service,version:n.version,id:n.id,name:n.name,startClocks:n.startClocks}}return{findView:function(n){return t.find(n)},stop:function(){t.stop()}}}var ic=1;function Xy(e,t,r){var n=uy(t,r);Jy(e,t,n),Zy(e,t,n)}function Jy(e,t,r){var n=wf(t).subscribe(function(i){var o=i;if(Xs(t,o.url))switch(o.state){case"start":r.traceXhr(o,o.xhr),o.requestIndex=Hf(),e.notify(7,{requestIndex:o.requestIndex,url:o.url});break;case"complete":r.clearTracingIfNeeded(o),e.notify(8,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr,isAborted:o.isAborted,handlingStack:o.handlingStack});break}});return{stop:function(){return n.unsubscribe()}}}function Zy(e,t,r){var n=Co().subscribe(function(i){var o=i;if(Xs(t,o.url))switch(o.state){case"start":r.traceFetch(o),o.requestIndex=Hf(),e.notify(7,{requestIndex:o.requestIndex,url:o.url});break;case"resolve":Qy(o,function(a){r.clearTracingIfNeeded(o),e.notify(8,{duration:a,method:o.method,requestIndex:o.requestIndex,responseType:o.responseType,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"fetch",url:o.url,response:o.response,init:o.init,input:o.input,isAborted:o.isAborted,handlingStack:o.handlingStack})});break}});return{stop:function(){return n.unsubscribe()}}}function Hf(){var e=ic;return ic+=1,e}function Qy(e,t){var r=e.response&&lf(e.response);!r||!r.body?t(Ie(e.startClocks.timeStamp,ne())):Af(r.body,function(){t(Ie(e.startClocks.timeStamp,ne()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function jf(e){return cn(e)&&e<0?void 0:e}function qf(e){var t=e.lifeCycle,r=e.isChildEvent,n=e.onChange,i=n===void 0?q:n,o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},a=t.subscribe(13,function(s){var c;if(!(s.type==="view"||s.type==="vital"||!r(s)))switch(s.type){case"error":o.errorCount+=1,i();break;case"action":o.actionCount+=1,s.action.frustration&&(o.frustrationCount+=s.action.frustration.type.length),i();break;case"long_task":o.longTaskCount+=1,i();break;case"resource":!((c=s._dd)===null||c===void 0)&&c.discarded||(o.resourceCount+=1,i());break}});return{stop:function(){a.unsubscribe()},eventCounts:o}}var Kf=100,eb=100;function Js(e,t,r,n,i){var o=rb(e,t,r);return tb(o,n,i)}function tb(e,t,r){var n,i=!1,o=Ee(C(function(){return u({hadActivity:!1})}),Kf),a=r!==void 0?Ee(C(function(){return u({hadActivity:!0,end:ne()})}),r):void 0,s=e.subscribe(function(l){var f=l.isBusy;ut(o),ut(n);var d=ne();f||(n=Ee(C(function(){return u({hadActivity:!0,end:d})}),eb))}),c=function(){i=!0,ut(o),ut(n),ut(a),s.unsubscribe()};function u(l){i||(c(),t(l))}return{stop:c}}function rb(e,t,r){return new X(function(n){var i=[],o,a=0;i.push(t.subscribe(c),xo(r,{type:H.RESOURCE}).subscribe(function(u){u.some(function(l){return!va(r,l.name)})&&c()}),e.subscribe(7,function(u){va(r,u.url)||(o===void 0&&(o=u.requestIndex),a+=1,c())}),e.subscribe(8,function(u){va(r,u.url)||o===void 0||u.requestIndex<o||(a-=1,c())}));var s=nb(c).stop;return function(){s(),i.forEach(function(u){return u.unsubscribe()})};function c(){n.notify({isBusy:a>0})}})}function va(e,t){return Cf(e.excludedActivityUrls,t)}function nb(e){return Pe(window,"open",e)}function ir(e){return window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,r){return r?t==="\0"?"":"".concat(t.slice(0,-1),"\\").concat(t.charCodeAt(t.length-1).toString(16)," "):"\\".concat(t)})}function $r(e,t){return e.matches?e.matches(t):e.msMatchesSelector?e.msMatchesSelector(t):!1}function ri(e){if(e.parentElement)return e.parentElement;for(;e.parentNode;){if(e.parentNode.nodeType===Node.ELEMENT_NODE)return e.parentNode;e=e.parentNode}return null}function ib(e){if(e.classList)return e.classList;var t=(e.getAttribute("class")||"").trim();return t?t.split(/\s+/):[]}var oc=1,ob=function(){function e(t){var r=this;this.map=new WeakMap,t&&t.forEach(function(n){return r.map.set(n,oc)})}return e.prototype.add=function(t){return this.map.set(t,oc),this},e.prototype.delete=function(t){return this.map.delete(t)},e.prototype.has=function(t){return this.map.has(t)},e}();function $f(e){return e.nodeType===Node.TEXT_NODE}function ab(e){return e.nodeType===Node.COMMENT_NODE}function gn(e){return e.nodeType===Node.ELEMENT_NODE}function ko(e){return gn(e)&&!!e.shadowRoot}function Zs(e){var t=e;return!!t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&gn(t.host)}function sb(e){return e.childNodes.length>0||ko(e)}function Wf(e,t){for(var r=e.firstChild;r;)t(r),r=r.nextSibling;ko(e)&&t(e.shadowRoot)}function Po(e){return Zs(e)?e.host:e.parentNode}var k={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:kn.ALLOW,MASK:kn.MASK,MASK_USER_INPUT:kn.MASK_USER_INPUT},Qs="data-dd-privacy",ub="hidden",cb="dd-privacy-",Xt="***",ac="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",lb={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},db="x";function Ot(e,t,r){if(r&&r.has(e))return r.get(e);var n=Po(e),i=n?Ot(n,t,r):t,o=Xf(e),a=Yf(o,i);return r&&r.set(e,a),a}function Yf(e,t){switch(t){case k.HIDDEN:case k.IGNORE:return t}switch(e){case k.ALLOW:case k.MASK:case k.MASK_USER_INPUT:case k.HIDDEN:case k.IGNORE:return e;default:return t}}function Xf(e){if(gn(e)){if(e.tagName==="BASE")return k.ALLOW;if(e.tagName==="INPUT"){var t=e;if(t.type==="password"||t.type==="email"||t.type==="tel"||t.type==="hidden")return k.MASK;var r=t.getAttribute("autocomplete");if(r&&r.indexOf("cc-")===0)return k.MASK}if($r(e,Wr(k.HIDDEN)))return k.HIDDEN;if($r(e,Wr(k.MASK)))return k.MASK;if($r(e,Wr(k.MASK_USER_INPUT)))return k.MASK_USER_INPUT;if($r(e,Wr(k.ALLOW)))return k.ALLOW;if(pb(e))return k.IGNORE}}function Uo(e,t){switch(t){case k.MASK:case k.HIDDEN:case k.IGNORE:return!0;case k.MASK_USER_INPUT:return $f(e)?sc(e.parentNode):sc(e);default:return!1}}function sc(e){if(!e||e.nodeType!==e.ELEMENT_NODE)return!1;var t=e;if(t.tagName==="INPUT")switch(t.type){case"button":case"color":case"reset":case"submit":return!1}return!!lb[t.tagName]}var fb=function(e){return e.replace(/\S/g,db)};function Jf(e,t,r){var n,i=(n=e.parentElement)===null||n===void 0?void 0:n.tagName,o=e.textContent||"";if(!(t&&!o.trim())){var a=r,s=i==="SCRIPT";if(s)o=Xt;else if(a===k.HIDDEN)o=Xt;else if(Uo(e,a))if(i==="DATALIST"||i==="SELECT"||i==="OPTGROUP"){if(!o.trim())return}else i==="OPTION"?o=Xt:o=fb(o);return o}}function pb(e){if(e.nodeName==="SCRIPT")return!0;if(e.nodeName==="LINK"){var t=i("rel");return/preload|prefetch/i.test(t)&&i("as")==="script"||t==="shortcut icon"||t==="icon"}if(e.nodeName==="META"){var r=i("name"),t=i("rel"),n=i("property");return/^msapplication-tile(image|color)$/.test(r)||r==="application-name"||t==="icon"||t==="apple-touch-icon"||t==="shortcut icon"||r==="keywords"||r==="description"||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(r)||r==="pinterest"||r==="robots"||r==="googlebot"||r==="bingbot"||e.hasAttribute("http-equiv")||r==="author"||r==="generator"||r==="framework"||r==="publisher"||r==="progid"||/^article:/.test(n)||/^product:/.test(n)||r==="google-site-verification"||r==="yandex-verification"||r==="csrf-token"||r==="p:domain_verify"||r==="verify-v1"||r==="verification"||r==="shopify-checkout-api-token"}function i(o){return(e.getAttribute(o)||"").toLowerCase()}return!1}function Wr(e){return"[".concat(Qs,'="').concat(e,'"], .').concat(cb).concat(e)}var eu="data-dd-action-name",hb="Masked Element";function vb(e,t,r){var n=t.enablePrivacyForActionName,i=t.actionNameAttribute,o=uc(e,eu)||i&&uc(e,i);return r===k.MASK?o||hb:o||cc(e,i,gb,n)||cc(e,i,mb,n)||""}function uc(e,t){var r;if(Sb())r=e.closest("[".concat(t,"]"));else for(var n=e;n;){if(n.hasAttribute(t)){r=n;break}n=ri(n)}if(r){var i=r.getAttribute(t);return Qf(Zf(i.trim()))}}var gb=[function(e,t,r){if(bb()){if("labels"in e&&e.labels&&e.labels.length>0)return Hr(e.labels[0],t)}else if(e.id){var n=e.ownerDocument&&tr(e.ownerDocument.querySelectorAll("label"),function(i){return i.htmlFor===e.id});return n&&Hr(n,t,r)}},function(e){if(e.nodeName==="INPUT"){var t=e,r=t.getAttribute("type");if(r==="button"||r==="submit"||r==="reset")return t.value}},function(e,t,r){if(e.nodeName==="BUTTON"||e.nodeName==="LABEL"||e.getAttribute("role")==="button")return Hr(e,t,r)},function(e){return e.getAttribute("aria-label")},function(e,t,r){var n=e.getAttribute("aria-labelledby");if(n)return n.split(/\s+/).map(function(i){return _b(e,i)}).filter(function(i){return!!i}).map(function(i){return Hr(i,t,r)}).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0)return Hr(e.options[0],t)}],mb=[function(e,t,r){return Hr(e,t,r)}],Eb=10;function cc(e,t,r,n){for(var i=e,o=0;o<=Eb&&i&&i.nodeName!=="BODY"&&i.nodeName!=="HTML"&&i.nodeName!=="HEAD";){for(var a=0,s=r;a<s.length;a++){var c=s[a],u=c(i,t,n);if(typeof u=="string"){var l=u.trim();if(l)return Qf(Zf(l))}}if(i.nodeName==="FORM")break;i=ri(i),o+=1}}function Zf(e){return e.replace(/\s+/g," ")}function Qf(e){return e.length>100?"".concat(Od(e,100)," [...]"):e}function _b(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}function Hr(e,t,r){if(!e.isContentEditable){if("innerText"in e){var n=e.innerText,i=function(o){for(var a=e.querySelectorAll(o),s=0;s<a.length;s+=1){var c=a[s];if("innerText"in c){var u=c.innerText;u&&u.trim().length>0&&(n=n.replace(u,""))}}};return yb()||i("script, style"),i("[".concat(eu,"]")),t&&i("[".concat(t,"]")),r&&i("".concat(Wr(k.HIDDEN),", ").concat(Wr(k.MASK))),n}return e.textContent}}function yb(){return!rm()}var ga;function bb(){return ga===void 0&&(ga="labels"in HTMLInputElement.prototype),ga}var ma;function Sb(){return ma===void 0&&(ma="closest"in HTMLElement.prototype),ma}var ep=[eu,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],wb=[rp,Ib],Tb=[rp,Ab,Rb];function ni(e,t){if(Db(e)){for(var r,n=e;n&&n.nodeName!=="HTML";){var i=lc(n,wb,Nb,t,r);if(i)return i;var o=lc(n,Tb,Cb,t,r);r=o||qn(Ob(n),r),n=ri(n)}return r}}function tp(e){return/[0-9]/.test(e)}function Ib(e){if(e.id&&!tp(e.id))return"#".concat(ir(e.id))}function Ab(e){if(e.tagName!=="BODY")for(var t=ib(e),r=0;r<t.length;r+=1){var n=t[r];if(!tp(n))return"".concat(ir(e.tagName),".").concat(ir(n))}}function Rb(e){return ir(e.tagName)}function rp(e,t){if(t){var r=a(t);if(r)return r}for(var n=0,i=ep;n<i.length;n++){var o=i[n],r=a(o);if(r)return r}function a(s){if(e.hasAttribute(s))return"".concat(ir(e.tagName),"[").concat(s,'="').concat(ir(e.getAttribute(s)),'"]')}}function Ob(e){for(var t=ri(e).firstElementChild,r=1;t&&t!==e;)t.tagName===e.tagName&&(r+=1),t=t.nextElementSibling;return"".concat(ir(e.tagName),":nth-of-type(").concat(r,")")}function lc(e,t,r,n,i){for(var o=0,a=t;o<a.length;o++){var s=a[o],c=s(e,n);if(c&&r(e,c,i))return qn(c,i)}}function Nb(e,t,r){return e.ownerDocument.querySelectorAll(qn(t,r)).length===1}function Cb(e,t,r){var n;if(r===void 0)n=function(s){return $r(s,t)};else{var i=Lb()?qn("".concat(t,":scope"),r):qn(t,r);n=function(s){return s.querySelector(i)!==null}}for(var o=ri(e),a=o.firstElementChild;a;){if(a!==e&&n(a))return!1;a=a.nextElementSibling}return!0}function qn(e,t){return t?"".concat(e,">").concat(t):e}var wi;function Lb(){if(wi===void 0)try{document.querySelector(":scope"),wi=!0}catch{wi=!1}return wi}function Db(e){return"isConnected"in e?e.isConnected:e.ownerDocument.documentElement.contains(e)}var np=Ne,xb=100;function kb(e,t){var r=[],n=0,i;o(e);function o(c){c.stopObservable.subscribe(a),r.push(c),ut(i),i=Ee(s,np)}function a(){n===1&&r.every(function(c){return c.isStopped()})&&(n=2,t(r))}function s(){ut(i),n===0&&(n=1,a())}return{tryAppend:function(c){return n!==0?!1:r.length>0&&!Pb(r[r.length-1].event,c.event)?(s(),!1):(o(c),!0)},stop:function(){s()}}}function Pb(e,t){return e.target===t.target&&Ub(e,t)<=xb&&e.timeStamp-t.timeStamp<=np}function Ub(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}function Mb(e,t){var r=t.onPointerDown,n=t.onPointerUp,i,o={selection:!1,input:!1,scroll:!1},a,s=[Q(e,window,"pointerdown",function(c){fc(c)&&(i=dc(),o={selection:!1,input:!1,scroll:!1},a=r(c))},{capture:!0}),Q(e,window,"selectionchange",function(){(!i||!dc())&&(o.selection=!0)},{capture:!0}),Q(e,window,"scroll",function(){o.scroll=!0},{capture:!0,passive:!0}),Q(e,window,"pointerup",function(c){if(fc(c)&&a){var u=o;n(a,c,function(){return u}),a=void 0}},{capture:!0}),Q(e,window,"input",function(){o.input=!0},{capture:!0})];return{stop:function(){s.forEach(function(c){return c.stop()})}}}function dc(){var e=window.getSelection();return!e||e.isCollapsed}function fc(e){return e.target instanceof Element&&e.isPrimary!==!1}var pc=3;function Fb(e,t){if(Vb(e))return t.addFrustration("rage_click"),e.some(hc)&&t.addFrustration("dead_click"),t.hasError&&t.addFrustration("error_click"),{isRage:!0};var r=e.some(function(n){return n.getUserActivity().selection});return e.forEach(function(n){n.hasError&&n.addFrustration("error_click"),hc(n)&&!r&&n.addFrustration("dead_click")}),{isRage:!1}}function Vb(e){if(e.some(function(r){return r.getUserActivity().selection||r.getUserActivity().scroll}))return!1;for(var t=0;t<e.length-(pc-1);t+=1)if(e[t+pc-1].event.timeStamp-e[t].event.timeStamp<=Ne)return!0;return!1}var Bb='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function hc(e){return e.hasPageActivity||e.getUserActivity().input||e.getUserActivity().scroll?!1:!$r(e.event.target,Bb)}var Gb=10*Ne,zb=5*Be;function Hb(e,t,r){var n=vn({expireDelay:zb}),i=new X,o;e.subscribe(10,function(){n.reset()}),e.subscribe(5,u);var a=Mb(r,{onPointerDown:function(l){return jb(r,e,t,l)},onPointerUp:function(l,f,d){var p=l.clickActionBase,h=l.hadActivityOnPointerDown;qb(r,e,t,n,i,c,p,f,d,h)}}).stop,s={findActionId:function(l){return n.findAll(l)}};return{stop:function(){u(),i.notify(),a()},actionContexts:s};function c(l){if(!o||!o.tryAppend(l)){var f=l.clone();o=kb(l,function(d){$b(d,f)})}}function u(){o&&o.stop()}}function jb(e,t,r,n){var i=e.enablePrivacyForActionName?Ot(n.target,e.defaultPrivacyLevel):k.ALLOW;if(i!==k.HIDDEN){var o=Kb(n,i,e),a=!1;return Js(t,r,e,function(s){a=s.hadActivity},Kf),{clickActionBase:o,hadActivityOnPointerDown:function(){return a}}}}function qb(e,t,r,n,i,o,a,s,c,u){var l=ip(t,n,c,a,s);o(l);var f=Js(t,r,e,function(h){h.hadActivity&&h.end<l.startClocks.timeStamp?l.discard():h.hadActivity?l.stop(h.end):u()?l.stop(l.startClocks.timeStamp):l.stop()},Gb).stop,d=t.subscribe(5,function(h){var v=h.endClocks;l.stop(v.timeStamp)}),p=i.subscribe(function(){l.stop()});l.stopObservable.subscribe(function(){d.unsubscribe(),f(),p.unsubscribe()})}function Kb(e,t,r){var n=e.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(n.width),height:Math.round(n.height),selector:ni(e.target,r.actionNameAttribute)},position:{x:Math.round(e.clientX-n.left),y:Math.round(e.clientY-n.top)},name:vb(e.target,r,t)}}function ip(e,t,r,n,i){var o=Ae(),a=Te(),s=t.add(o,a.relative),c=qf({lifeCycle:e,isChildEvent:function(h){return h.action!==void 0&&(Array.isArray(h.action.id)?Fe(h.action.id,o):h.action.id===o)}}),u=0,l,f=[],d=new X;function p(h){u===0&&(l=h,u=1,l?s.close(wo(l)):s.remove(),c.stop(),d.notify())}return{event:i,stop:p,stopObservable:d,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return l!==void 0},getUserActivity:r,addFrustration:function(h){f.push(h)},startClocks:a,isStopped:function(){return u===1||u===2},clone:function(){return ip(e,t,r,n,i)},validate:function(h){if(p(),u===1){var v=c.eventCounts,g=v.resourceCount,m=v.errorCount,I=v.longTaskCount,S=P({type:"click",duration:l&&Ie(a.timeStamp,l),startClocks:a,id:o,frustrationTypes:f,counts:{resourceCount:g,errorCount:m,longTaskCount:I},events:h??[i],event:i},n);e.notify(1,S),u=2}},discard:function(){p(),u=2}}}function $b(e,t){var r=Fb(e,t).isRage;r?(e.forEach(function(n){return n.discard()}),t.stop(ne()),t.validate(e.map(function(n){return n.event}))):(t.discard(),e.forEach(function(n){return n.validate()}))}function Wb(e,t,r,n){e.subscribe(1,function(o){return e.notify(12,vc(o,n))});var i={findActionId:q};return r.trackUserInteractions&&(i=Hb(e,t,r).actionContexts),{addAction:function(o,a){e.notify(12,P({savedCommonContext:a},vc(o,n)))},actionContexts:i}}function vc(e,t){var r=Ti(e)?{action:{id:e.id,loading_time:jf(Y(e.duration)),frustration:{type:e.frustrationTypes},error:{count:e.counts.errorCount},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:void 0,n=Ti(e)?void 0:e.context,i=$e({action:{id:Ae(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:"action",view:{in_foreground:t.wasInPageStateAt("active",e.startClocks.relative)}},r),o=Ti(e)?{events:e.events}:{};return!Ti(e)&&e.handlingStack&&(o.handlingStack=e.handlingStack),{customerContext:n,rawRumEvent:i,startTime:e.startClocks.relative,domainContext:o}}function Ti(e){return e.type!=="custom"}function Yb(e){var t=Tf([se.error]).subscribe(function(r){return e.notify(r.error)});return{stop:function(){t.unsubscribe()}}}function Xb(e,t){var r=Jd(e,[en.cspViolation,en.intervention]).subscribe(function(n){return t.notify(n)});return{stop:function(){r.unsubscribe()}}}function Jb(e,t,r,n){var i=new X;return Yb(i),Wd(i),Xb(t,i),i.subscribe(function(o){return e.notify(14,{error:o})}),Zb(e,r,n)}function Zb(e,t,r){return e.subscribe(14,function(n){var i=n.error,o=n.customerContext,a=n.savedCommonContext;e.notify(12,P({customerContext:o,savedCommonContext:a},Qb(i,t,r)))}),{addError:function(n,i){var o=n.error,a=n.handlingStack,s=n.startClocks,c=n.context,u=o instanceof Error?Rt(o):void 0,l=Hs({stackTrace:u,originalError:o,handlingStack:a,startClocks:s,nonErrorPrefix:"Provided",source:Ge.CUSTOM,handling:"handled"});e.notify(14,{customerContext:c,savedCommonContext:i,error:l})}}}function Qb(e,t,r){var n={date:e.startClocks.timeStamp,error:{id:Ae(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser",fingerprint:e.fingerprint,csp:e.csp},type:"error",view:{in_foreground:t.wasInPageStateAt("active",e.startClocks.relative)}},i=r.findFeatureFlagEvaluations(e.startClocks.relative);i&&!rr(i)&&(n.feature_flags=i);var o={error:e.originalError,handlingStack:e.handlingStack};return{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:o}}function eS(e,t){e.subscribe(0,function(r){for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.entryType!==H.LONG_TASK||!t.trackLongTasks)break;var a=Dt(o.startTime),s={date:a.timeStamp,long_task:{id:Ae(),entry_type:"long-task",duration:Y(o.duration)},type:"long_task",_dd:{discarded:!1}};e.notify(12,{rawRumEvent:s,startTime:a.relative,domainContext:{performanceEntry:o}})}})}var gc=new ob;function tS(e){if(!(!performance||!("getEntriesByName"in performance))){var t=performance.getEntriesByName(e.url,"resource");if(!(!t.length||!("toJSON"in t[0]))){var r=t.filter(function(n){return!gc.has(n)}).filter(function(n){return Ff(n)}).filter(function(n){return rS(n,e.startClocks.relative,op({startTime:e.startClocks.relative,duration:e.duration}))});if(r.length===1)return gc.add(r[0]),r[0].toJSON()}}}function op(e){return ln(e.startTime,e.duration)}function rS(e,t,r){var n=1;return e.startTime>=t-n&&op(e)<=ln(r,n)}var nS=2*Be;function iS(e){var t=oS(e)||aS(e);if(!(!t||t.traceTime<=At()-nS))return t.traceId}function oS(e){var t=e.querySelector("meta[name=dd-trace-id]"),r=e.querySelector("meta[name=dd-trace-time]");return ap(t&&t.content,r&&r.content)}function aS(e){var t=sS(e);if(t)return ap(Gn(t,"trace-id"),Gn(t,"trace-time"))}function ap(e,t){var r=t&&Number(t);if(!(!e||!r))return{traceId:e,traceTime:r}}function sS(e){for(var t=0;t<e.childNodes.length;t+=1){var r=mc(e.childNodes[t]);if(r)return r}if(e.body)for(var t=e.body.childNodes.length-1;t>=0;t-=1){var n=e.body.childNodes[t],r=mc(n);if(r)return r;if(!$f(n))break}}function mc(e){if(e&&ab(e)){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t)return t[1]}}function sp(){var e={},t=performance.timing;for(var r in t)if(cn(t[r])){var n=r,i=t[n];e[n]=i===0?0:wo(i)}return e}function uS(e,t){Ks(e,"interactive",function(){var r,n={entryType:H.RESOURCE,initiatorType:Mf,traceId:iS(document),toJSON:function(){return P({},r,{toJSON:void 0})}};if(ti(H.NAVIGATION)&&performance.getEntriesByType(H.NAVIGATION).length>0){var i=performance.getEntriesByType(H.NAVIGATION)[0];r=P(i.toJSON(),n)}else{var o=sp();r=P(o,{decodedBodySize:0,encodedBodySize:0,transferSize:0,renderBlockingStatus:"non-blocking",duration:o.responseEnd,name:window.location.href,startTime:0},n)}t(r)})}function cS(e,t,r,n){n===void 0&&(n=uS),e.subscribe(8,function(o){var a=lS(o,t,r);a&&e.notify(12,a)});var i=xo(t,{type:H.RESOURCE,buffered:!0}).subscribe(function(o){for(var a=0,s=o;a<s.length;a++){var c=s[a];if(!Ry(c)){var u=Ec(c,t);u&&e.notify(12,u)}}});return n(t,function(o){var a=Ec(o,t);a&&e.notify(12,a)}),{stop:function(){i.unsubscribe()}}}function lS(e,t,r){var n=tS(e),i=n?Dt(n.startTime):e.startClocks,o=dS(e,t);if(!(!t.trackResources&&!o)){var a=e.type==="xhr"?"xhr":"fetch",s=n?up(n):void 0,c=pS(r,i,e.duration),u=$e({date:i.timeStamp,resource:{id:Ae(),type:a,duration:c,method:e.method,status_code:e.status,url:Vf(e.url)?Bf(e.url):e.url},type:"resource",_dd:{discarded:!t.trackResources}},o,s);return{startTime:i.relative,rawRumEvent:u,domainContext:{performanceEntry:n,xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error,isAborted:e.isAborted,handlingStack:e.handlingStack}}}}function Ec(e,t){var r=Dt(e.startTime),n=fS(e,t);if(!(!t.trackResources&&!n)){var i=Ay(e),o=up(e),a=$e({date:r.timeStamp,resource:{id:Ae(),type:i,url:e.name,status_code:hS(e.responseStatus)},type:"resource",_dd:{discarded:!t.trackResources}},n,o);return{startTime:r.relative,rawRumEvent:a,domainContext:{performanceEntry:e}}}}function up(e){var t=e.renderBlockingStatus;return{resource:P({duration:Oy(e),render_blocking_status:t},Ly(e),Ny(e))}}function dS(e,t){var r=e.traceSampled&&e.traceId&&e.spanId;if(r)return{_dd:{span_id:e.spanId.toDecimalString(),trace_id:e.traceId.toDecimalString(),rule_psr:cp(t)}}}function fS(e,t){var r=e.traceId;if(r)return{_dd:{trace_id:e.traceId,span_id:Ha().toDecimalString(),rule_psr:cp(t)}}}function cp(e){return cn(e.traceSampleRate)?e.traceSampleRate/100:void 0}function pS(e,t,r){return e.wasInPageStateDuringPeriod("frozen",t.relative,r)?void 0:Y(r)}function hS(e){return e===0?void 0:e}function vS(e,t,r){var n=qf({lifeCycle:e,isChildEvent:function(a){return a.view.id===t},onChange:r}),i=n.stop,o=n.eventCounts;return{stop:i,eventCounts:o}}var gS=10*Be;function mS(e,t,r){var n=e.subscribe(0,function(i){var o=tr(i,function(a){return a.entryType===H.PAINT&&a.name==="first-contentful-paint"&&a.startTime<t.timeStamp&&a.startTime<gS});o&&r(o.startTime)}).unsubscribe;return{stop:n}}function ES(e,t,r,n){var i=e.subscribe(0,function(o){var a=tr(o,function(u){return u.entryType===H.FIRST_INPUT&&u.startTime<r.timeStamp});if(a){var s=Ie(a.startTime,a.processingStart),c=void 0;a.target&&gn(a.target)&&(c=ni(a.target,t.actionNameAttribute)),n({delay:s>=0?s:0,time:a.startTime,targetSelector:c})}}).unsubscribe;return{stop:i}}function _S(e,t){var r=function(i){bS(i)||t(yS(i))},n=q;return ti(H.NAVIGATION)?n=xo(e,{type:H.NAVIGATION,buffered:!0}).subscribe(function(i){return Id(i,r)}).unsubscribe:SS(e,r),{stop:n}}function yS(e){return{domComplete:e.domComplete,domContentLoaded:e.domContentLoadedEventEnd,domInteractive:e.domInteractive,loadEvent:e.loadEventEnd,firstByte:e.responseStart>=0&&e.responseStart<=ft()?e.responseStart:void 0}}function bS(e){return e.loadEventEnd<=0}function SS(e,t){Ks(e,"complete",function(){Ee(function(){return t(sp())})})}var wS=10*Be;function TS(e,t,r,n,i){var o=1/0,a=Ve(t,n,["pointerdown","keydown"],function(u){o=u.timeStamp},{capture:!0,once:!0}).stop,s=0,c=e.subscribe(0,function(u){var l=Wg(u,function(d){return d.entryType===H.LARGEST_CONTENTFUL_PAINT&&d.startTime<o&&d.startTime<r.timeStamp&&d.startTime<wS&&d.size>s});if(l){var f=void 0;l.element&&(f=ni(l.element,t.actionNameAttribute)),i({value:l.startTime,targetSelector:f}),s=l.size}}).unsubscribe;return{stop:function(){a(),c()}}}function IS(e,t){t===void 0&&(t=window);var r,n;return document.visibilityState==="hidden"?r=0:(r=1/0,n=Ve(e,t,["pagehide","visibilitychange"],function(i){(i.type==="pagehide"||document.visibilityState==="hidden")&&(r=i.timeStamp,n())},{capture:!0}).stop),{get timeStamp(){return r},stop:function(){n==null||n()}}}function AS(e,t,r,n){var i={},o=_S(t,function(f){r(f.loadEvent),i.navigationTimings=f,n()}).stop,a=IS(t),s=mS(e,a,function(f){i.firstContentfulPaint=f,n()}).stop,c=TS(e,t,a,window,function(f){i.largestContentfulPaint=f,n()}).stop,u=ES(e,t,a,function(f){i.firstInput=f,n()}).stop;function l(){o(),s(),c(),u(),a.stop()}return{stop:l,initialViewMetrics:i}}function RS(e,t,r,n){if(!DS())return{stop:q};var i=0,o,a;n({value:0});var s=LS(),c=t.subscribe(0,function(u){for(var l=0,f=u;l<f.length;l++){var d=f[l];if(d.entryType===H.LAYOUT_SHIFT&&!d.hadRecentInput){var p=s.update(d),h=p.cumulatedValue,v=p.isMaxValue;if(v){var g=OS(d.sources);o=g?new WeakRef(g):void 0,a=Ie(r,d.startTime)}if(h>i){i=h;var g=o==null?void 0:o.deref();n({value:Xi(i,4),targetSelector:g&&ni(g,e.actionNameAttribute),time:a})}}}}).unsubscribe;return{stop:c}}function OS(e){var t;if(e)return(t=tr(e,function(r){return!!r.node&&gn(r.node)}))===null||t===void 0?void 0:t.node}var NS=5*Ne,CS=Ne;function LS(){var e=0,t,r,n=0;return{update:function(i){var o=t===void 0||i.startTime-r>=CS||i.startTime-t>=NS,a;return o?(t=r=i.startTime,n=e=i.value,a=!0):(e+=i.value,r=i.startTime,a=i.value>n,a&&(n=i.value)),{cumulatedValue:e,isMaxValue:a}}}}function DS(){return ti(H.LAYOUT_SHIFT)&&"WeakRef"in window}var Gi,lp=0,Ea=1/0,_a=0;function xS(){"interactionCount"in performance||Gi||(Gi=new window.PerformanceObserver(C(function(e){e.getEntries().forEach(function(t){var r=t;r.interactionId&&(Ea=Math.min(Ea,r.interactionId),_a=Math.max(_a,r.interactionId),lp=(_a-Ea)/7+1)})})),Gi.observe({type:"event",buffered:!0,durationThreshold:0}))}var _c=function(){return Gi?lp:window.performance.interactionCount||0},yc=10,kS=1*Be;function PS(e,t,r,n){if(!FS())return{getInteractionToNextPaint:function(){},setViewEnd:q,stop:q};var i=MS(r),o=i.getViewInteractionCount,a=i.stopViewInteractionCount,s=1/0,c=US(o),u=-1,l,f,d=n.subscribe(0,function(p){for(var h=0,v=p;h<v.length;h++){var g=v[h];(g.entryType===H.EVENT||g.entryType===H.FIRST_INPUT)&&g.interactionId&&g.startTime>=t&&g.startTime<=s&&c.process(g)}var m=c.estimateP98Interaction();m&&m.duration!==u&&(u=m.duration,f=Ie(t,m.startTime),m.target&&gn(m.target)?l=ni(m.target,e.actionNameAttribute):l=void 0)}).unsubscribe;return{getInteractionToNextPaint:function(){if(u>=0)return{value:Math.min(u,kS),targetSelector:l,time:f};if(o())return{value:0}},setViewEnd:function(p){s=p,a()},stop:d}}function US(e){var t=[];function r(){t.sort(function(n,i){return i.duration-n.duration}).splice(yc)}return{process:function(n){var i=t.findIndex(function(a){return n.interactionId===a.interactionId}),o=t[t.length-1];i!==-1?n.duration>t[i].duration&&(t[i]=n,r()):(t.length<yc||n.duration>o.duration)&&(t.push(n),r())},estimateP98Interaction:function(){var n=Math.min(t.length-1,Math.floor(e()/50));return t[n]}}}function MS(e){xS();var t=e==="initial_load"?0:_c(),r={stopped:!1};function n(){return _c()-t}return{getViewInteractionCount:function(){return r.stopped?r.interactionCount:n()},stopViewInteractionCount:function(){r={stopped:!0,interactionCount:n()}}}}function FS(){return ti(H.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function VS(e,t,r,n,i,o){var a=n==="initial_load",s=!0,c=[];function u(){!s&&!a&&c.length>0&&o(Math.max.apply(Math,c))}var l=Js(e,t,r,function(f){s&&(s=!1,f.hadActivity&&c.push(Ie(i.timeStamp,f.end)),u())}).stop;return{stop:l,setLoadEvent:function(f){a&&(a=!1,c.push(f),u())}}}function dp(){var e,t=window.visualViewport;return t?e=t.pageLeft-t.offsetLeft:window.scrollX!==void 0?e=window.scrollX:e=window.pageXOffset||0,Math.round(e)}function tu(){var e,t=window.visualViewport;return t?e=t.pageTop-t.offsetTop:window.scrollY!==void 0?e=window.scrollY:e=window.pageYOffset||0,Math.round(e)}var ya;function fp(e){return ya||(ya=BS(e)),ya}function BS(e){return new X(function(t){var r=Bt(function(){t.notify(Mo())},200).throttled;return Q(e,window,"resize",r,{capture:!0,passive:!0}).stop})}function Mo(){var e=window.visualViewport;return e?{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var GS=Ne;function zS(e,t,r,n){n===void 0&&(n=jS(e));var i=0,o=0,a=0,s=n.subscribe(function(c){var u=c.scrollDepth,l=c.scrollTop,f=c.scrollHeight,d=!1;if(u>i&&(i=u,d=!0),f>o){o=f;var p=ft();a=Ie(t.relative,p),d=!0}d&&r({maxDepth:Math.min(i,o),maxDepthScrollTop:l,maxScrollHeight:o,maxScrollHeightTime:a})});return{stop:function(){return s.unsubscribe()}}}function HS(){var e=tu(),t=Mo().height,r=Math.round((document.scrollingElement||document.documentElement).scrollHeight),n=Math.round(t+e);return{scrollHeight:r,scrollDepth:n,scrollTop:e}}function jS(e,t){return t===void 0&&(t=GS),new X(function(r){function n(){r.notify(HS())}if(window.ResizeObserver){var i=Bt(n,t,{leading:!1,trailing:!0}),o=document.scrollingElement||document.documentElement,a=new ResizeObserver(C(i.throttled));a.observe(o);var s=Q(e,window,"scroll",i.throttled,{passive:!0});return function(){i.cancel(),a.unobserve(o),s.stop()}}})}function qS(e,t,r,n,i,o){var a={},s=VS(e,t,r,i,o,function(g){a.loadingTime=g,n()}),c=s.stop,u=s.setLoadEvent,l=zS(r,o,function(g){a.scroll=g}).stop,f=RS(r,e,o.relative,function(g){a.cumulativeLayoutShift=g,n()}).stop,d=PS(r,o.relative,i,e),p=d.stop,h=d.getInteractionToNextPaint,v=d.setViewEnd;return{stop:function(){c(),f(),l()},stopINPTracking:p,setLoadEvent:u,setViewEnd:v,getCommonViewMetrics:function(){return a.interactionToNextPaint=h(),a}}}var KS=3e3,$S=5*Be,WS=5*Be;function YS(e,t,r,n,i,o,a){var s=new Set,c=l("initial_load",wd(),a);f();var u;o&&(u=d(i));function l(p,h,v){var g=XS(t,r,n,e,p,h,v);return s.add(g),g.stopObservable.subscribe(function(){s.delete(g)}),g}function f(){t.subscribe(10,function(){c=l("route_change",void 0,{name:c.name,service:c.service,version:c.version})}),t.subscribe(9,function(){c.end({sessionIsActive:!1})}),t.subscribe(11,function(p){p.reason===Xr.UNLOADING&&c.end()})}function d(p){return p.subscribe(function(h){var v=h.oldLocation,g=h.newLocation;ZS(v,g)&&(c.end(),c=l("route_change"))})}return{addTiming:function(p,h){h===void 0&&(h=ne()),c.addTiming(p,h)},startView:function(p,h){c.end({endClocks:h}),c=l("route_change",h,p)},updateViewName:function(p){c.updateViewName(p)},stop:function(){u&&u.unsubscribe(),c.end(),s.forEach(function(p){return p.stop()})}}}function XS(e,t,r,n,i,o,a){o===void 0&&(o=Te());var s=Ae(),c=new X,u={},l=0,f,d=Vn(n),p=!0,h,v,g;a&&(h=a.name,v=a.service||void 0,g=a.version||void 0);var m={id:s,name:h,startClocks:o,service:v,version:g};e.notify(2,m),e.notify(3,m);var I=Bt(gt,KS,{leading:!1}),S=I.throttled,_=I.cancel,E=qS(e,t,r,S,i,o),y=E.setLoadEvent,b=E.setViewEnd,R=E.stop,N=E.stopINPTracking,x=E.getCommonViewMetrics,J=i==="initial_load"?AS(e,r,y,S):{stop:q,initialViewMetrics:{}},ie=J.stop,_e=J.initialViewMetrics,Ce=vS(e,s,S),Nt=Ce.stop,tt=Ce.eventCounts,zt=dn(gt,$S);gt();function gt(){_(),l+=1;var pe=f===void 0?ne():f.timeStamp;e.notify(4,{customTimings:u,documentVersion:l,id:s,name:h,service:v,version:g,loadingType:i,location:d,startClocks:o,commonViewMetrics:x(),initialViewMetrics:_e,duration:Ie(o.timeStamp,pe),isActive:f===void 0,sessionIsActive:p,eventCounts:tt})}return{get name(){return h},service:v,version:g,stopObservable:c,end:function(pe){var rt=this,oe,ze;pe===void 0&&(pe={}),!f&&(f=(oe=pe.endClocks)!==null&&oe!==void 0?oe:Te(),p=(ze=pe.sessionIsActive)!==null&&ze!==void 0?ze:!0,e.notify(5,{endClocks:f}),e.notify(6,{endClocks:f}),Io(zt),b(f.relative),R(),gt(),Ee(function(){rt.stop()},WS))},stop:function(){ie(),Nt(),N(),c.notify()},addTiming:function(pe,rt){if(!f){var oe=qg(rt)?rt:Ie(o.timeStamp,rt);u[JS(pe)]=oe,S()}},updateViewName:function(pe){pn(Ft.UPDATE_VIEW_NAME)&&(h=pe,gt())}}}function JS(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return t!==e&&K.warn("Invalid timing name: ".concat(e,", sanitized to: ").concat(t)),t}function ZS(e,t){return e.pathname!==t.pathname||!QS(t.hash)&&bc(t.hash)!==bc(e.hash)}function QS(e){var t=e.substring(1);return t!==""&&!!document.getElementById(t)}function bc(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function ew(e,t,r,n,i,o,a,s,c){return e.subscribe(4,function(u){return e.notify(12,tw(u,t,o,s,a))}),YS(r,e,n,t,i,!t.trackViewsManually,c)}function tw(e,t,r,n,i){var o,a,s,c,u,l,f,d,p,h,v,g,m,I,S,_,E=n.getReplayStats(e.id),y=r.findFeatureFlagEvaluations(e.startClocks.relative),b=i.findAll(e.startClocks.relative,e.duration),R={_dd:{document_version:e.documentVersion,replay_stats:E,page_states:b,configuration:{start_session_replay_recording_manually:t.startSessionReplayRecordingManually}},date:e.startClocks.timeStamp,type:"view",view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:(o=e.commonViewMetrics.cumulativeLayoutShift)===null||o===void 0?void 0:o.value,cumulative_layout_shift_time:Y((a=e.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.time),cumulative_layout_shift_target_selector:(s=e.commonViewMetrics.cumulativeLayoutShift)===null||s===void 0?void 0:s.targetSelector,first_byte:Y((c=e.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.firstByte),dom_complete:Y((u=e.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domComplete),dom_content_loaded:Y((l=e.initialViewMetrics.navigationTimings)===null||l===void 0?void 0:l.domContentLoaded),dom_interactive:Y((f=e.initialViewMetrics.navigationTimings)===null||f===void 0?void 0:f.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:Y(e.initialViewMetrics.firstContentfulPaint),first_input_delay:Y((d=e.initialViewMetrics.firstInput)===null||d===void 0?void 0:d.delay),first_input_time:Y((p=e.initialViewMetrics.firstInput)===null||p===void 0?void 0:p.time),first_input_target_selector:(h=e.initialViewMetrics.firstInput)===null||h===void 0?void 0:h.targetSelector,interaction_to_next_paint:Y((v=e.commonViewMetrics.interactionToNextPaint)===null||v===void 0?void 0:v.value),interaction_to_next_paint_time:Y((g=e.commonViewMetrics.interactionToNextPaint)===null||g===void 0?void 0:g.time),interaction_to_next_paint_target_selector:(m=e.commonViewMetrics.interactionToNextPaint)===null||m===void 0?void 0:m.targetSelector,is_active:e.isActive,name:e.name,largest_contentful_paint:Y((I=e.initialViewMetrics.largestContentfulPaint)===null||I===void 0?void 0:I.value),largest_contentful_paint_target_selector:(S=e.initialViewMetrics.largestContentfulPaint)===null||S===void 0?void 0:S.targetSelector,load_event:Y((_=e.initialViewMetrics.navigationTimings)===null||_===void 0?void 0:_.loadEvent),loading_time:jf(Y(e.commonViewMetrics.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:Y(e.duration)},feature_flags:y&&!rr(y)?y:void 0,display:e.commonViewMetrics.scroll?{scroll:{max_depth:e.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:e.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:e.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:Y(e.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:E?!0:void 0,is_active:e.sessionIsActive?void 0:!1},privacy:{replay_level:t.defaultPrivacyLevel}};return rr(e.customTimings)||(R.view.custom_timings=Xg(e.customTimings,Y)),{rawRumEvent:R,startTime:e.startClocks.relative,domainContext:{location:e.location}}}var rw="rum";function nw(e,t,r){var n=uf(e,rw,function(i){return ow(e,i)},r);return n.expireObservable.subscribe(function(){t.notify(9)}),n.renewObservable.subscribe(function(){t.notify(10)}),n.sessionStateUpdateObservable.subscribe(function(i){var o=i.previousState,a=i.newState;if(!o.forcedReplay&&a.forcedReplay){var s=n.findSession();s&&(s.isReplayForced=!0)}}),{findTrackedSession:function(i){var o=n.findSession(i);if(!(!o||!pp(o.trackingType)))return{id:o.id,sessionReplay:o.trackingType==="1"?1:o.isReplayForced?2:0}},expire:n.expire,expireObservable:n.expireObservable,setForcedReplay:function(){return n.updateSessionState({forcedReplay:"1"})}}}function iw(){var e={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplay:_f("records")?1:0};return{findTrackedSession:function(){return e},expire:q,expireObservable:new X,setForcedReplay:q}}function ow(e,t){var r;return aw(t)?r=t:Zt(e.sessionSampleRate)?Zt(e.sessionReplaySampleRate)?r="1":r="2":r="0",{trackingType:r,isTracked:pp(r)}}function aw(e){return e==="0"||e==="1"||e==="2"}function pp(e){return e==="2"||e==="1"}function sw(e,t,r,n,i,o,a){var s=e.replica,c=qs(e,{endpoint:e.rumEndpointBuilder,encoder:a(2)},s&&{endpoint:s.rumEndpointBuilder,transformMessage:function(u){return $e(u,{application:{id:s.applicationId}})},encoder:a(3)},n,i,o);return t.subscribe(13,function(u){u.type==="view"?c.upsert(u,u.view.id):c.add(u)}),r.subscribe(function(u){return c.add(u,af(e))}),c}function uw(e){var t=cr();e.subscribe(13,function(r){t.send("rum",r)})}var cw=Dr;function lw(e,t,r){var n=vn({expireDelay:cw}),i;e.subscribe(2,function(s){var c=s.startClocks,u=r.href;n.add(a({url:u,referrer:i||document.referrer}),c.relative),i=u}),e.subscribe(6,function(s){var c=s.endClocks;n.closeActive(c.relative)});var o=t.subscribe(function(s){var c=s.newLocation,u=n.find();if(u){var l=ft();n.closeActive(l),n.add(a({url:c.href,referrer:u.referrer}),l)}});function a(s){var c=s.url,u=s.referrer;return{url:c,referrer:u}}return{findUrl:function(s){return n.find(s)},stop:function(){o.unsubscribe(),n.stop()}}}function dw(e,t){var r=Vn(t);return new X(function(n){var i=fw(e,a).stop,o=pw(e,a).stop;function a(){if(r.href!==t.href){var s=Vn(t);n.notify({newLocation:s,oldLocation:r}),r=s}}return function(){i(),o()}})}function fw(e,t){var r=Pe(History.prototype,"pushState",function(o){var a=o.onPostCall;a(t)}).stop,n=Pe(History.prototype,"replaceState",function(o){var a=o.onPostCall;a(t)}).stop,i=Q(e,window,"popstate",t).stop;return{stop:function(){r(),n(),i()}}}function pw(e,t){return Q(e,window,"hashchange",t)}var hw=Dr;function vw(e,t){var r=vn({expireDelay:hw});return e.subscribe(2,function(n){var i=n.startClocks;r.add({},i.relative),t.resetCustomerData()}),e.subscribe(6,function(n){var i=n.endClocks;r.closeActive(i.relative)}),{findFeatureFlagEvaluations:function(n){return r.find(n)},addFeatureFlagEvaluation:function(n,i){var o=r.find();o&&(o[n]=i,t.updateCustomerData(o))},stop:function(){return t.stop()}}}var gw=10*Ne,xt,fr,ja;function mw(e,t,r,n,i){var o=t.enabled&&Zt(e.customerDataTelemetrySampleRate);o&&(hp(),Sc(),r.subscribe(13,function(a){ja=!0,Rn(fr.globalContextBytes,n.getOrCreateTracker(2).getBytesCount()),Rn(fr.userContextBytes,n.getOrCreateTracker(1).getBytesCount()),Rn(fr.featureFlagBytes,Fe(["view","error"],a.type)?n.getOrCreateTracker(0).getBytesCount():0)}),i.subscribe(function(a){var s=a.bytesCount,c=a.messagesCount;ja&&(xt.batchCount+=1,Rn(xt.batchBytesCount,s),Rn(xt.batchMessagesCount,c),ba(xt.globalContextBytes,fr.globalContextBytes),ba(xt.userContextBytes,fr.userContextBytes),ba(xt.featureFlagBytes,fr.featureFlagBytes),Sc())}),dn(Ew,gw))}function Ew(){xt.batchCount!==0&&(ur("Customer data measures",xt),hp())}function Kt(){return{min:1/0,max:0,sum:0}}function Rn(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function ba(e,t){e.sum+=t.sum,e.min=Math.min(e.min,t.min),e.max=Math.max(e.max,t.max)}function hp(){xt={batchCount:0,batchBytesCount:Kt(),batchMessagesCount:Kt(),globalContextBytes:Kt(),userContextBytes:Kt(),featureFlagBytes:Kt()}}function Sc(){ja=!1,fr={globalContextBytes:Kt(),userContextBytes:Kt(),featureFlagBytes:Kt()}}var _w=4e3,yw=500,bw=Dr;function Sw(e,t){t===void 0&&(t=yw);var r=vn({expireDelay:bw,maxEntries:_w}),n;o(vp(),ft());var i=Ve(e,window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],function(s){o(ww(s),s.timeStamp)},{capture:!0}).stop;function o(s,c){c===void 0&&(c=ft()),s!==n&&(n=s,r.closeActive(c),r.add({state:n,startTime:c},c))}var a={findAll:function(s,c){var u=r.findAll(s,c);if(u.length!==0){for(var l=[],f=Math.max(0,u.length-t),d=u.length-1;d>=f;d--){var p=u[d],h=Ie(s,p.startTime);l.push({state:p.state,start:Y(h)})}return l}},wasInPageStateAt:function(s,c){return a.wasInPageStateDuringPeriod(s,c,0)},wasInPageStateDuringPeriod:function(s,c,u){return r.findAll(c,u).some(function(l){return l.state===s})},addPageState:o,stop:function(){i(),r.stop()}};return a}function ww(e){return e.type==="freeze"?"frozen":e.type==="pagehide"?e.persisted?"frozen":"terminated":vp()}function vp(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function Tw(e){var t=Mo(),r=fp(e).subscribe(function(n){t=n}).unsubscribe;return{get:function(){return{viewport:t}},stop:r}}function Iw(e,t){var r=window.cookieStore?Aw(e):Ow;return new X(function(n){return r(t,function(i){return n.notify(i)})})}function Aw(e){return function(t,r){var n=Q(e,window.cookieStore,"change",function(i){var o=tr(i.changed,function(a){return a.name===t})||tr(i.deleted,function(a){return a.name===t});o&&r(o.value)});return n.stop}}var Rw=Ne;function Ow(e,t){var r=Gn(document.cookie,e),n=dn(function(){var i=Gn(document.cookie,e);i!==r&&t(i)},Rw);return function(){Io(n)}}var wc="datadog-ci-visibility-test-execution-id";function Nw(e,t){var r;t===void 0&&(t=Iw(e,wc));var n=Wt(wc)||((r=window.Cypress)===null||r===void 0?void 0:r.env("traceId")),i=t.subscribe(function(o){n=o});return{get:function(){if(typeof n=="string")return{test_execution_id:n}},stop:function(){return i.unsubscribe()}}}function Cw(e,t){var r=xo(t,{type:H.LONG_ANIMATION_FRAME,buffered:!0}).subscribe(function(n){for(var i=0,o=n;i<o.length;i++){var a=o[i],s=Dt(a.startTime),c={date:s.timeStamp,long_task:{id:Ae(),entry_type:"long-animation-frame",duration:Y(a.duration),blocking_duration:Y(a.blockingDuration),first_ui_event_timestamp:Dt(a.firstUIEventTimestamp).relative,render_start:Dt(a.renderStart).relative,style_and_layout_start:Dt(a.styleAndLayoutStart).relative,scripts:a.scripts.map(function(u){return{duration:Y(u.duration),pause_duration:Y(u.pauseDuration),forced_style_and_layout_duration:Y(u.forcedStyleAndLayoutDuration),start_time:Dt(u.startTime).relative,execution_start:Dt(u.executionStart).relative,source_url:u.sourceURL,source_function_name:u.sourceFunctionName,source_char_position:u.sourceCharPosition,invoker:u.invoker,invoker_type:u.invokerType,window_attribution:u.windowAttribution}})},type:"long_task",_dd:{discarded:!1}};e.notify(12,{rawRumEvent:c,startTime:s.relative,domainContext:{performanceEntry:a}})}});return{stop:function(){return r.unsubscribe()}}}function Lw(e,t,r,n,i,o,a,s){var c=[],u=new $y;u.subscribe(13,function(oe){return Oo("rum",oe)});var l=Dw(e);l.setContextProvider(function(){var oe,ze;return{application:{id:e.applicationId},session:{id:(oe=v.findTrackedSession())===null||oe===void 0?void 0:oe.id},view:{id:(ze=E.findView())===null||ze===void 0?void 0:ze.id},action:{id:b.findActionId()}}});var f=function(oe){u.notify(14,{error:oe}),ur("Error reported to customer",{"error.message":oe.message})},d=vw(u,r.getOrCreateTracker(0)),p=yf(e),h=p.subscribe(function(oe){u.notify(11,oe)});c.push(function(){return h.unsubscribe()});var v=pt()?iw():nw(e,u,a);if(pt())uw(u);else{var g=sw(e,u,l.observable,f,p,v.expireObservable,o);c.push(function(){return g.stop()}),mw(e,l,u,r,g.flushObservable)}var m=Ty(),I=dw(e,location),S=Sw(e),_=xw(u,e,location,v,S,I,m,n,f),E=_.viewContexts,y=_.urlContexts,b=_.actionContexts,R=_.addAction,N=_.stop;c.push(N),of();var x=ew(u,e,location,m,I,d,S,t,i),J=x.addTiming,ie=x.startView,_e=x.updateViewName,Ce=x.stop;c.push(Ce);var Nt=cS(u,e,S).stop;if(c.push(Nt),pn(Ft.LONG_ANIMATION_FRAME)){if(e.trackLongTasks){var tt=Cw(u,e).stop;c.push(tt)}}else eS(u,e);var zt=Jb(u,e,S,d).addError;Xy(u,e,v);var gt=My(u,e).stop;c.push(gt);var pe=ny(u,S,s),rt=Ky(e.applicationId,v,E,b,y);return{addAction:R,addError:zt,addTiming:J,addFeatureFlagEvaluation:d.addFeatureFlagEvaluation,startView:ie,updateViewName:_e,lifeCycle:u,viewContexts:E,session:v,stopSession:function(){return v.expire()},getInternalContext:rt.get,startDurationVital:pe.startDurationVital,stopDurationVital:pe.stopDurationVital,addDurationVital:pe.addDurationVital,stop:function(){c.forEach(function(oe){return oe()})}}}function Dw(e){var t=nf("browser-rum-sdk",e);if(pt()){var r=cr();t.observable.subscribe(function(n){return r.send("internal_telemetry",n)})}return t}function xw(e,t,r,n,i,o,a,s,c){var u=Yy(e),l=lw(e,o,r),f=Wb(e,a,t,i),d=f.addAction,p=f.actionContexts,h=Tw(t),v=Nw(t);return Hy(t,e,n,u,l,p,h,v,s,c),{viewContexts:u,pageStateHistory:i,urlContexts:l,addAction:d,actionContexts:p,stop:function(){v.stop(),h.stop(),l.stop(),u.stop(),i.stop()}}}function kw(e,t){var r=t.session,n=t.viewContext,i=t.errorType,o=r?r.id:"no-session-id",a=[];i!==void 0&&a.push("error-type=".concat(i)),n&&(a.push("seed=".concat(n.id)),a.push("from=".concat(n.startClocks.timeStamp)));var s=Pw(e),c="/rum/replay/sessions/".concat(o);return"".concat(s).concat(c,"?").concat(a.join("&"))}function Pw(e){var t=e.site,r=e.subdomain||Uw(e);return"https://".concat(r?"".concat(r,"."):"").concat(t)}function Uw(e){switch(e.site){case Yt:case Um:return"app";case Fd:return"dd";default:return}}var Mw=10,Oe;function Fw(e){return Fo(e).segments_count}function Vw(e){Fo(e).segments_count+=1}function Bw(e){Fo(e).records_count+=1}function Gw(e,t){Fo(e).segments_total_raw_size+=t}function zw(e){return Oe==null?void 0:Oe.get(e)}function Fo(e){Oe||(Oe=new Map);var t;return Oe.has(e)?t=Oe.get(e):(t={records_count:0,segments_count:0,segments_total_raw_size:0},Oe.set(e,t),Oe.size>Mw&&Hw()),t}function Hw(){if(Oe)if(Oe.keys)Oe.delete(Oe.keys().next().value);else{var e=!0;Oe.forEach(function(t,r){e&&(Oe.delete(r),e=!1)})}}var ru=new WeakMap;function Tt(e){return ru.has(e)}function jw(e){for(var t=e;t;){if(!Tt(t)&&!Zs(t))return!1;t=Po(t)}return!0}function xe(e){return ru.get(e)}function qw(e,t){ru.set(e,t)}function nu(e,t){var r=e.tagName,n=e.value;if(Uo(e,t)){var i=e.type;return r==="INPUT"&&(i==="button"||i==="submit"||i==="reset")?n:!n||r==="OPTION"?void 0:Xt}if(r==="OPTION"||r==="SELECT")return e.value;if(!(r!=="INPUT"&&r!=="TEXTAREA"))return n}var Kw=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,$w=/^[A-Za-z]+:|^\/\//,Ww=/^data:.*,/i;function Yw(e,t){return e.replace(Kw,function(r,n,i,o,a,s){var c=i||a||s;if(!t||!c||$w.test(c)||Ww.test(c))return r;var u=n||o||"";return"url(".concat(u).concat(Xw(c,t)).concat(u,")")})}function Xw(e,t){try{return Ao(e,t).href}catch{return e}}var Jw=/[^a-z1-6-_]/;function gp(e){var t=e.toLowerCase().trim();return Jw.test(t)?"div":t}function Tc(e,t){return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(e,"' height='").concat(t,"' style='background-color:silver'%3E%3C/svg%3E")}var St={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},Or={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},Je={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},st={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},Ic={Play:0,Pause:1};function mp(e){if(!(e===void 0||e.length===0))return e.map(function(t){var r=t.cssRules||t.rules,n=Array.from(r,function(o){return o.cssText}),i={cssRules:n,disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0};return i})}function Ep(e,t,r,n){if(t===k.HIDDEN)return null;var i=e.getAttribute(r);if(t===k.MASK&&r!==Qs&&!ep.includes(r)&&r!==n.actionNameAttribute){var o=e.tagName;switch(r){case"title":case"alt":case"placeholder":return Xt}if(o==="IMG"&&(r==="src"||r==="srcset")){var a=e;if(a.naturalWidth>0)return Tc(a.naturalWidth,a.naturalHeight);var s=e.getBoundingClientRect(),c=s.width,u=s.height;return c>0||u>0?Tc(c,u):ac}if(o==="SOURCE"&&(r==="src"||r==="srcset"))return ac;if(o==="A"&&r==="href"||i&&Zn(r,"data-")||o==="IFRAME"&&r==="srcdoc")return Xt}return!i||typeof i!="string"?i:Vf(i)?Bf(i):i}function Zw(e,t,r){var n;if(t===k.HIDDEN)return{};for(var i={},o=gp(e.tagName),a=e.ownerDocument,s=0;s<e.attributes.length;s+=1){var c=e.attributes.item(s),u=c.name,l=Ep(e,t,u,r.configuration);l!==null&&(i[u]=l)}if(e.value&&(o==="textarea"||o==="select"||o==="option"||o==="input")){var f=nu(e,t);f!==void 0&&(i.value=f)}if(o==="option"&&t===k.ALLOW){var d=e;d.selected&&(i.selected=d.selected)}if(o==="link"){var p=Array.from(a.styleSheets).find(function(_){return _.href===e.href}),h=qa(p);h&&p&&(i._cssText=h)}if(o==="style"&&e.sheet){var h=qa(e.sheet);h&&(i._cssText=h)}var v=e;if(o==="input"&&(v.type==="radio"||v.type==="checkbox")&&(t===k.ALLOW?i.checked=!!v.checked:Uo(v,t)&&delete i.checked),o==="audio"||o==="video"){var g=e;i.rr_mediaState=g.paused?"paused":"played"}var m,I,S=r.serializationContext;switch(S.status){case 0:m=Math.round(e.scrollTop),I=Math.round(e.scrollLeft),(m||I)&&S.elementsScrollPositions.set(e,{scrollTop:m,scrollLeft:I});break;case 1:S.elementsScrollPositions.has(e)&&(n=S.elementsScrollPositions.get(e),m=n.scrollTop,I=n.scrollLeft);break}return I&&(i.rr_scrollLeft=I),m&&(i.rr_scrollTop=m),i}function qa(e){if(!e)return null;var t;try{t=e.rules||e.cssRules}catch{}if(!t)return null;var r=Array.from(t,im()?Qw:_p).join("");return Yw(r,e.href)}function Qw(e){if(tT(e)&&e.selectorText.includes(":")){var t=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(t,"$1\\$2")}return _p(e)}function _p(e){return eT(e)&&qa(e.styleSheet)||e.cssText}function eT(e){return"styleSheet"in e}function tT(e){return"selectorText"in e}function iu(e,t){var r=iT(e,t);if(!r)return null;var n=xe(e)||nT(),i=r;return i.id=n,qw(e,n),t.serializedNodeIds&&t.serializedNodeIds.add(n),i}var rT=1;function nT(){return rT++}function ou(e,t){var r=[];return Wf(e,function(n){var i=iu(n,t);i&&r.push(i)}),r}function iT(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return oT(e,t);case e.DOCUMENT_FRAGMENT_NODE:return aT(e,t);case e.DOCUMENT_TYPE_NODE:return sT(e);case e.ELEMENT_NODE:return uT(e,t);case e.TEXT_NODE:return lT(e,t);case e.CDATA_SECTION_NODE:return dT()}}function oT(e,t){return{type:Or.Document,childNodes:ou(e,t),adoptedStyleSheets:mp(e.adoptedStyleSheets)}}function aT(e,t){var r=Zs(e);return r&&t.serializationContext.shadowRootsController.addShadowRoot(e),{type:Or.DocumentFragment,childNodes:ou(e,t),isShadowRoot:r,adoptedStyleSheets:r?mp(e.adoptedStyleSheets):void 0}}function sT(e){return{type:Or.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId}}function uT(e,t){var r,n=gp(e.tagName),i=cT(e)||void 0,o=Yf(Xf(e),t.parentNodePrivacyLevel);if(o===k.HIDDEN){var a=e.getBoundingClientRect(),s=a.width,c=a.height;return{type:Or.Element,tagName:n,attributes:(r={rr_width:"".concat(s,"px"),rr_height:"".concat(c,"px")},r[Qs]=ub,r),childNodes:[],isSVG:i}}if(o!==k.IGNORE){var u=Zw(e,o,t),l=[];if(sb(e)&&n!=="style"){var f=void 0;t.parentNodePrivacyLevel===o&&t.ignoreWhiteSpace===(n==="head")?f=t:f=P({},t,{parentNodePrivacyLevel:o,ignoreWhiteSpace:n==="head"}),l=ou(e,f)}return{type:Or.Element,tagName:n,attributes:u,childNodes:l,isSVG:i}}}function cT(e){return e.tagName==="svg"||e instanceof SVGElement}function lT(e,t){var r=Jf(e,t.ignoreWhiteSpace||!1,t.parentNodePrivacyLevel);if(r!==void 0)return{type:Or.Text,textContent:r}}function dT(){return{type:Or.CDATA,textContent:""}}function fT(e,t,r){return iu(e,{serializationContext:r,parentNodePrivacyLevel:t.defaultPrivacyLevel,configuration:t})}function yp(e){return!!e.changedTouches}function ii(e){return e.composed===!0&&ko(e.target)?e.composedPath()[0]:e.target}var Ac=25;function pT(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>Ac||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>Ac}var hT=function(e,t){var r=window.visualViewport,n={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};if(r)pT(r)?(n.layoutViewportX=Math.round(e+r.offsetLeft),n.layoutViewportY=Math.round(t+r.offsetTop)):(n.visualViewportX=Math.round(e-r.offsetLeft),n.visualViewportY=Math.round(t-r.offsetTop));else return n;return n},bp=function(e){return{scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}};function ct(e,t){return{data:P({source:e},t),type:St.IncrementalSnapshot,timestamp:ne()}}var vT=50;function gT(e,t){var r=Bt(function(a){var s=ii(a);if(Tt(s)){var c=Sp(a);if(!c)return;var u={id:xe(s),timeOffset:0,x:c.x,y:c.y};t(ct(yp(a)?Je.TouchMove:Je.MouseMove,{positions:[u]}))}},vT,{trailing:!1}),n=r.throttled,i=r.cancel,o=Ve(e,document,["mousemove","touchmove"],n,{capture:!0,passive:!0}).stop;return{stop:function(){o(),i()}}}function Sp(e){var t=yp(e)?e.changedTouches[0]:e,r=t.clientX,n=t.clientY;if(window.visualViewport){var i=hT(r,n),o=i.visualViewportX,a=i.visualViewportY;r=o,n=a}if(!Number.isFinite(r)||!Number.isFinite(n)){e.isTrusted&&ur("mouse/touch event without x/y");return}return{x:r,y:n}}var at,Rc=(at={},at.pointerup=st.MouseUp,at.mousedown=st.MouseDown,at.click=st.Click,at.contextmenu=st.ContextMenu,at.dblclick=st.DblClick,at.focus=st.Focus,at.blur=st.Blur,at.touchstart=st.TouchStart,at.touchend=st.TouchEnd,at);function mT(e,t,r){var n=function(i){var o=ii(i);if(!(Ot(o,e.defaultPrivacyLevel)===k.HIDDEN||!Tt(o))){var a=xe(o),s=Rc[i.type],c;if(s!==st.Blur&&s!==st.Focus){var u=Sp(i);if(!u)return;c={id:a,type:s,x:u.x,y:u.y}}else c={id:a,type:s};var l=P({id:r.getIdForEvent(i)},ct(Je.MouseInteraction,c));t(l)}};return Ve(e,document,Object.keys(Rc),n,{capture:!0,passive:!0})}var ET=100;function wp(e,t,r,n){n===void 0&&(n=document);var i=Bt(function(c){var u=ii(c);if(!(!u||Ot(u,e.defaultPrivacyLevel)===k.HIDDEN||!Tt(u))){var l=xe(u),f=u===document?{scrollTop:tu(),scrollLeft:dp()}:{scrollTop:Math.round(u.scrollTop),scrollLeft:Math.round(u.scrollLeft)};r.set(u,f),t(ct(Je.Scroll,{id:l,x:f.scrollLeft,y:f.scrollTop}))}},ET),o=i.throttled,a=i.cancel,s=Q(e,n,"scroll",o,{capture:!0,passive:!0}).stop;return{stop:function(){s(),a()}}}var _T=200;function yT(e,t){var r=fp(e).subscribe(function(n){t(ct(Je.ViewportResize,n))});return{stop:function(){r.unsubscribe()}}}function bT(e,t){var r=window.visualViewport;if(!r)return{stop:q};var n=Bt(function(){t({data:bp(r),type:St.VisualViewport,timestamp:ne()})},_T,{trailing:!1}),i=n.throttled,o=n.cancel,a=Ve(e,r,["resize","scroll"],i,{capture:!0,passive:!0}).stop;return{stop:function(){a(),o()}}}function ST(e,t){return Ve(e,document,["play","pause"],function(r){var n=ii(r);!n||Ot(n,e.defaultPrivacyLevel)===k.HIDDEN||!Tt(n)||t(ct(Je.MediaInteraction,{id:xe(n),type:r.type==="play"?Ic.Play:Ic.Pause}))},{capture:!0,passive:!0})}function wT(e){function t(i,o){i&&Tt(i.ownerNode)&&o(xe(i.ownerNode))}var r=[Pe(CSSStyleSheet.prototype,"insertRule",function(i){var o=i.target,a=i.parameters,s=a[0],c=a[1];t(o,function(u){return e(ct(Je.StyleSheetRule,{id:u,adds:[{rule:s,index:c}]}))})}),Pe(CSSStyleSheet.prototype,"deleteRule",function(i){var o=i.target,a=i.parameters[0];t(o,function(s){return e(ct(Je.StyleSheetRule,{id:s,removes:[{index:a}]}))})})];typeof CSSGroupingRule<"u"?n(CSSGroupingRule):(n(CSSMediaRule),n(CSSSupportsRule));function n(i){r.push(Pe(i.prototype,"insertRule",function(o){var a=o.target,s=o.parameters,c=s[0],u=s[1];t(a.parentStyleSheet,function(l){var f=Oc(a);f&&(f.push(u||0),e(ct(Je.StyleSheetRule,{id:l,adds:[{rule:c,index:f}]})))})}),Pe(i.prototype,"deleteRule",function(o){var a=o.target,s=o.parameters[0];t(a.parentStyleSheet,function(c){var u=Oc(a);u&&(u.push(s),e(ct(Je.StyleSheetRule,{id:c,removes:[{index:u}]})))})}))}return{stop:function(){r.forEach(function(i){return i.stop()})}}}function Oc(e){for(var t=[],r=e;r.parentRule;){var n=Array.from(r.parentRule.cssRules),i=n.indexOf(r);t.unshift(i),r=r.parentRule}if(r.parentStyleSheet){var o=Array.from(r.parentStyleSheet.cssRules),a=o.indexOf(r);return t.unshift(a),t}}function TT(e,t){return Ve(e,window,["focus","blur"],function(){t({data:{has_focus:document.hasFocus()},type:St.Focus,timestamp:ne()})})}function IT(e,t,r){var n=e.subscribe(12,function(i){var o,a;i.rawRumEvent.type==="action"&&i.rawRumEvent.action.type==="click"&&(!((a=(o=i.rawRumEvent.action.frustration)===null||o===void 0?void 0:o.type)===null||a===void 0)&&a.length)&&"events"in i.domainContext&&i.domainContext.events&&i.domainContext.events.length&&t({timestamp:i.rawRumEvent.date,type:St.FrustrationRecord,data:{frustrationTypes:i.rawRumEvent.action.frustration.type,recordIds:i.domainContext.events.map(function(s){return r.getIdForEvent(s)})}})});return{stop:function(){n.unsubscribe()}}}function AT(e,t){var r=e.subscribe(5,function(){t({timestamp:ne(),type:St.ViewEnd})});return{stop:function(){r.unsubscribe()}}}function Tp(e,t,r){r===void 0&&(r=document);var n=e.defaultPrivacyLevel,i=new WeakMap,o=r!==document,a=Ve(e,r,o?["change"]:["input","change"],function(f){var d=ii(f);(d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement||d instanceof HTMLSelectElement)&&u(d)},{capture:!0,passive:!0}).stop,s;if(o)s=q;else{var c=[Tn(HTMLInputElement.prototype,"value",u),Tn(HTMLInputElement.prototype,"checked",u),Tn(HTMLSelectElement.prototype,"value",u),Tn(HTMLTextAreaElement.prototype,"value",u),Tn(HTMLSelectElement.prototype,"selectedIndex",u)];s=function(){c.forEach(function(f){return f.stop()})}}return{stop:function(){s(),a()}};function u(f){var d=Ot(f,n);if(d!==k.HIDDEN){var p=f.type,h;if(p==="radio"||p==="checkbox"){if(Uo(f,d))return;h={isChecked:f.checked}}else{var v=nu(f,d);if(v===void 0)return;h={text:v}}l(f,h);var g=f.name;p==="radio"&&g&&f.checked&&Id(document.querySelectorAll('input[type="radio"][name="'.concat(ir(g),'"]')),function(m){m!==f&&l(m,{isChecked:!1})})}}function l(f,d){if(Tt(f)){var p=i.get(f);(!p||p.text!==d.text||p.isChecked!==d.isChecked)&&(i.set(f,d),t(ct(Je.Input,P({id:xe(f)},d))))}}}var RT=100,OT=16;function NT(e){var t=q,r=[];function n(){t(),e(r),r=[]}var i=Bt(n,OT,{leading:!1}),o=i.throttled,a=i.cancel;return{addMutations:function(s){r.length===0&&(t=CT(o,{timeout:RT})),r.push.apply(r,s)},flush:n,stop:function(){t(),a()}}}function CT(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var r=window.requestIdleCallback(C(e),t);return function(){return window.cancelIdleCallback(r)}}var n=window.requestAnimationFrame(C(e));return function(){return window.cancelAnimationFrame(n)}}function Ip(e,t,r,n){var i=Uf();if(!i)return{stop:q,flush:q};var o=NT(function(s){LT(s.concat(a.takeRecords()),e,t,r)}),a=new i(C(o.addMutations));return a.observe(n,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){a.disconnect(),o.stop()},flush:function(){o.flush()}}}function LT(e,t,r,n){var i=new Map;e.filter(function(d){return d.type==="childList"}).forEach(function(d){d.removedNodes.forEach(function(p){Ap(p,n.removeShadowRoot)})});var o=e.filter(function(d){return d.target.isConnected&&jw(d.target)&&Ot(d.target,r.defaultPrivacyLevel,i)!==k.HIDDEN}),a=DT(o.filter(function(d){return d.type==="childList"}),r,n,i),s=a.adds,c=a.removes,u=a.hasBeenSerialized,l=xT(o.filter(function(d){return d.type==="characterData"&&!u(d.target)}),r,i),f=kT(o.filter(function(d){return d.type==="attributes"&&!u(d.target)}),r,i);!l.length&&!f.length&&!c.length&&!s.length||t(ct(Je.Mutation,{adds:s,removes:c,texts:l,attributes:f}))}function DT(e,t,r,n){for(var i=new Set,o=new Map,a=function(y){y.addedNodes.forEach(function(b){i.add(b)}),y.removedNodes.forEach(function(b){i.has(b)||o.set(b,y.target),i.delete(b)})},s=0,c=e;s<c.length;s++){var u=c[s];a(u)}var l=Array.from(i);PT(l);for(var f=new Set,d=[],p=0,h=l;p<h.length;p++){var v=h[p];if(!_(v)){var g=Ot(v.parentNode,t.defaultPrivacyLevel,n);if(!(g===k.HIDDEN||g===k.IGNORE)){var m=iu(v,{serializedNodeIds:f,parentNodePrivacyLevel:g,serializationContext:{status:2,shadowRootsController:r},configuration:t});if(m){var I=Po(v);d.push({nextId:E(v),parentId:xe(I),node:m})}}}}var S=[];return o.forEach(function(y,b){Tt(b)&&S.push({parentId:xe(y),id:xe(b)})}),{adds:d,removes:S,hasBeenSerialized:_};function _(y){return Tt(y)&&f.has(xe(y))}function E(y){for(var b=y.nextSibling;b;){if(Tt(b))return xe(b);b=b.nextSibling}return null}}function xT(e,t,r){for(var n,i=[],o=new Set,a=e.filter(function(d){return o.has(d.target)?!1:(o.add(d.target),!0)}),s=0,c=a;s<c.length;s++){var u=c[s],l=u.target.textContent;if(l!==u.oldValue){var f=Ot(Po(u.target),t.defaultPrivacyLevel,r);f===k.HIDDEN||f===k.IGNORE||i.push({id:xe(u.target),value:(n=Jf(u.target,!1,f))!==null&&n!==void 0?n:null})}}return i}function kT(e,t,r){for(var n=[],i=new Map,o=e.filter(function(g){var m=i.get(g.target);return m&&m.has(g.attributeName)?!1:(m?m.add(g.attributeName):i.set(g.target,new Set([g.attributeName])),!0)}),a=new Map,s=0,c=o;s<c.length;s++){var u=c[s],l=u.target.getAttribute(u.attributeName);if(l!==u.oldValue){var f=Ot(u.target,t.defaultPrivacyLevel,r),d=Ep(u.target,f,u.attributeName,t),p=void 0;if(u.attributeName==="value"){var h=nu(u.target,f);if(h===void 0)continue;p=h}else typeof d=="string"?p=d:p=null;var v=a.get(u.target);v||(v={id:xe(u.target),attributes:{}},n.push(v),a.set(u.target,v)),v.attributes[u.attributeName]=p}}return n}function PT(e){e.sort(function(t,r){var n=t.compareDocumentPosition(r);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function Ap(e,t){ko(e)&&t(e.shadowRoot),Wf(e,function(r){return Ap(r,t)})}function UT(){var e=new WeakMap;return{set:function(t,r){t===document&&!document.scrollingElement||e.set(t===document?document.scrollingElement:t,r)},get:function(t){return e.get(t)},has:function(t){return e.has(t)}}}var MT=function(e,t,r){var n=new Map,i={addShadowRoot:function(o){if(!n.has(o)){var a=Ip(t,e,i,o),s=Tp(e,t,o),c=wp(e,t,r,o);n.set(o,{flush:function(){return a.flush()},stop:function(){a.stop(),s.stop(),c.stop()}})}},removeShadowRoot:function(o){var a=n.get(o);a&&(a.stop(),n.delete(o))},stop:function(){n.forEach(function(o){var a=o.stop;return a()})},flush:function(){n.forEach(function(o){var a=o.flush;return a()})}};return i};function FT(e,t,r,n,i,o){var a=function(c,u){c===void 0&&(c=ne()),u===void 0&&(u={status:0,elementsScrollPositions:e,shadowRootsController:t});var l=Mo(),f=l.width,d=l.height,p=[{data:{height:d,href:window.location.href,width:f},type:St.Meta,timestamp:c},{data:{has_focus:document.hasFocus()},type:St.Focus,timestamp:c},{data:{node:fT(document,n,u),initialOffset:{left:dp(),top:tu()}},type:St.FullSnapshot,timestamp:c}];return window.visualViewport&&p.push({data:bp(window.visualViewport),type:St.VisualViewport,timestamp:c}),p};o(a());var s=r.subscribe(3,function(c){i(),o(a(c.startClocks.timeStamp,{shadowRootsController:t,status:1,elementsScrollPositions:e}))}).unsubscribe;return{stop:s}}function VT(){var e=new WeakMap,t=1;return{getIdForEvent:function(r){return e.has(r)||e.set(r,t++),e.get(r)}}}function BT(e){var t=e.emit,r=e.configuration,n=e.lifeCycle;if(!t)throw new Error("emit function is required");var i=function(d){t(d),Oo("record",{record:d});var p=e.viewContexts.findView();Bw(p.id)},o=UT(),a=MT(r,i,o),s=FT(o,a,n,r,c,function(d){return d.forEach(function(p){return i(p)})}).stop;function c(){a.flush(),l.flush()}var u=VT(),l=Ip(i,r,a,document),f=[l,gT(r,i),mT(r,i,u),wp(r,i,o,document),yT(r,i),Tp(r,i),ST(r,i),wT(i),TT(r,i),bT(r,i),IT(n,i,u),AT(n,function(d){c(),i(d)})];return{stop:function(){a.stop(),f.forEach(function(d){return d.stop()}),s()},flushMutations:c,shadowRootsController:a}}function GT(e,t,r){var n=new FormData;n.append("segment",new Blob([e],{type:"application/octet-stream"}),"".concat(t.session.id,"-").concat(t.start));var i=P({raw_segment_size:r,compressed_segment_size:e.byteLength},t),o=JSON.stringify(i);return n.append("event",new Blob([o],{type:"application/json"})),{data:n,bytesCount:e.byteLength}}function zT(e){var t=e.context,r=e.creationReason,n=e.encoder,i=0,o=t.view.id,a=P({start:1/0,end:-1/0,creation_reason:r,records_count:0,has_full_snapshot:!1,index_in_view:Fw(o),source:"browser"},t);Vw(o);function s(u,l){a.start=Math.min(a.start,u.timestamp),a.end=Math.max(a.end,u.timestamp),a.records_count+=1,a.has_full_snapshot||(a.has_full_snapshot=u.type===St.FullSnapshot);var f=n.isEmpty?'{"records":[':",";n.write(f+JSON.stringify(u),function(d){i+=d,l(i)})}function c(u){if(n.isEmpty)throw new Error("Empty segment flushed");n.write("],".concat(JSON.stringify(a).slice(1),`
`)),n.finish(function(l){Gw(a.view.id,l.rawBytesCount),u(a,l)})}return{addRecord:s,flush:c}}var HT=30*Ne,Rp=6e4;function jT(e,t,r,n,i,o){return qT(e,function(){return KT(t.applicationId,r,n)},i,o)}function qT(e,t,r,n){var i={status:0,nextSegmentCreationReason:"init"},o=e.subscribe(3,function(){s("view_change")}).unsubscribe,a=e.subscribe(11,function(c){s(c.reason)}).unsubscribe;function s(c){i.status===1&&(i.segment.flush(function(u,l){var f=GT(l.output,u,l.rawBytesCount);bf(c)?r.sendOnExit(f):r.send(f)}),ut(i.expirationTimeoutId)),c!=="stop"?i={status:0,nextSegmentCreationReason:c}:i={status:2}}return{addRecord:function(c){if(i.status!==2){if(i.status===0){var u=t();if(!u)return;i={status:1,segment:zT({encoder:n,context:u,creationReason:i.nextSegmentCreationReason}),expirationTimeoutId:Ee(function(){s("segment_duration_limit")},HT)}}i.segment.addRecord(c,function(l){l>Rp&&s("segment_bytes_limit")})}},stop:function(){s("stop"),o(),a()}}}function KT(e,t,r){var n=t.findTrackedSession(),i=r.findView();if(!(!n||!i))return{application:{id:e},session:{id:n.id},view:{id:i.id}}}function $T(e){var t=cr();return{addRecord:function(r){var n=e.findView();t.send("record",r,n.id)}}}function WT(e,t,r,n,i,o){var a=[],s=function(d){e.notify(14,{error:d}),ur("Error reported to customer",{"error.message":d.message})},c=o||Ef(t,t.sessionReplayEndpointBuilder,Rp,s),u;if(pt())u=$T(n).addRecord;else{var l=jT(e,t,r,n,c,i);u=l.addRecord,a.push(l.stop)}var f=BT({emit:u,configuration:t,lifeCycle:e,viewContexts:n}).stop;return a.push(f),{stop:function(){a.forEach(function(d){return d()})}}}function Op(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function YT(e,t,r,n){var i=t.findTrackedSession(),o=XT(i,n),a=r.findView();return kw(e,{viewContext:a,errorType:o,session:i})}function XT(e,t){if(!Op())return"browser-not-supported";if(!e)return"rum-not-tracked";if(e.sessionReplay===0)return"incorrect-session-plan";if(!t)return"replay-not-started"}function Np(e,t,r){var n=0,i=[],o,a=0,s=[],c=Q(e,t,"message",function(f){var d=f.data;if(!(d.type!=="wrote"||d.streamId!==r)){n+=d.additionalBytesCount,i.push(d.result),o=d.trailer;var p=s.shift();p&&p.id===d.id?p.writeCallback?p.writeCallback(d.result.byteLength):p.finishCallback&&p.finishCallback():(c(),ur("Worker responses received out of order."))}}).stop;function u(){var f=i.length===0?new Uint8Array(0):$g(i.concat(o)),d={rawBytesCount:n,output:f,outputBytesCount:f.byteLength,encoding:"deflate"};return n=0,i=[],d}function l(){a>0&&(t.postMessage({action:"reset",streamId:r}),a=0)}return{isAsync:!0,get isEmpty(){return a===0},write:function(f,d){t.postMessage({action:"write",id:a,data:f,streamId:r}),s.push({id:a,writeCallback:d,data:f}),a+=1},finish:function(f){l(),s.length?(s.forEach(function(d){delete d.writeCallback}),s[s.length-1].finishCallback=function(){return f(u())}):f(u())},finishSync:function(){l();var f=s.map(function(d){return delete d.writeCallback,delete d.finishCallback,d.data}).join("");return P(u(),{pendingData:f})},estimateEncodedBytesCount:function(f){return f.length/8},stop:function(){c()}}}var JT=10*Ne;function Cp(e){return new Worker(e.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"5.25.0"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var ue={status:0};function Lp(e,t,r,n){switch(n===void 0&&(n=Cp),ue.status===0&&ZT(e,t,n),ue.status){case 1:return ue.initializationFailureCallbacks.push(r),ue.worker;case 3:return ue.worker}}function Nc(){return ue.status}function ZT(e,t,r){r===void 0&&(r=Cp);try{var n=r(e),i=Q(e,n,"error",function(s){Sa(e,t,s)}).stop,o=Q(e,n,"message",function(s){var c=s.data;c.type==="errored"?Sa(e,t,c.error,c.streamId):c.type==="initialized"&&eI(c.version)}).stop;n.postMessage({action:"init"}),Ee(function(){return QT(t)},JT);var a=function(){i(),o()};ue={status:1,worker:n,stop:a,initializationFailureCallbacks:[]}}catch(s){Sa(e,t,s)}}function QT(e){ue.status===1&&(K.error("".concat(e," failed to start: a timeout occurred while initializing the Worker")),ue.initializationFailureCallbacks.forEach(function(t){return t()}),ue={status:2})}function eI(e){ue.status===1&&(ue={status:3,worker:ue.worker,stop:ue.stop,version:e})}function Sa(e,t,r,n){if(ue.status===1||ue.status===0){if(K.error("".concat(t," failed to start: an error occurred while creating the Worker:"),r),r instanceof Event||r instanceof Error&&tI(r.message)){var i=void 0;e.workerUrl?i="Please make sure the Worker URL ".concat(e.workerUrl," is correct and CSP is correctly configured."):i="Please make sure CSP is correctly configured.",K.error("".concat(i," See documentation at ").concat(bo,"/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else to(r);ue.status===1&&ue.initializationFailureCallbacks.forEach(function(o){return o()}),ue={status:2}}else to(r,{worker_version:ue.status===3&&ue.version,stream_id:n})}function tI(e){return Fe(e,"Content Security Policy")||Fe(e,"requires 'TrustedScriptURL'")}function rI(e,t){if(pt()&&!_f("records")||!Op())return{start:q,stop:q,getReplayStats:function(){},onRumStart:q,isRecording:function(){return!1},getSessionReplayLink:function(){}};var r={status:1},n=function(){r={status:1}},i=function(){r={status:0}},o=q;return{start:function(a){return n(a)},stop:function(){return i()},getSessionReplayLink:function(){return o()},onRumStart:function(a,s,c,u,l){s.startSessionReplayRecordingManually&&(r={status:0}),a.subscribe(9,function(){(r.status===2||r.status===3)&&(i(),r={status:1})}),a.subscribe(11,function(p){p.reason===Xr.UNLOADING&&i()}),a.subscribe(10,function(){r.status===1&&n()});var f;function d(){return f||(l||(l=Lp(s,"Datadog Session Replay",function(){i()},t)),l&&(f=Np(s,l,1))),f}n=function(p){var h=c.findTrackedSession();if(!h||h.sessionReplay===0&&(!p||!p.force)){r={status:1};return}r.status===2||r.status===3||(r={status:2},Ks(s,"interactive",function(){if(r.status===2){var v=d();if(!v){r={status:0};return}var g=e(a,s,c,u,v).stop;r={status:3,stopRecording:g}}}),p&&p.force&&h.sessionReplay===0&&c.setForcedReplay())},i=function(){r.status!==0&&(r.status===3&&r.stopRecording(),r={status:0})},o=function(){return YT(s,c,u,r.status!==0)},r.status===1&&n()},isRecording:function(){return Nc()===3&&r.status===3},getReplayStats:function(a){return Nc()===3?zw(a):void 0}}}var nI=rI(WT),Qt=Sy(Lw,nI,{startDeflateWorker:Lp,createDeflateEncoder:Np});Xd(Vt(),"DD_RUM",Qt);var Dp=(e=>(e.SellerPortal="bfe446f0-2f36-4f58-a43a-c44cef2915f3",e.Sms="0dff7612-c19f-452a-a185-f069bf877ead",e.Marketplace="09be8c10-7f35-4b72-8714-ad8560444131",e.TicketSystem="f7cf98a8-9d42-4b42-9589-cdf7e95130a0",e.Backoffice="f6b59763-8854-4653-b9c3-c4513373d422",e))(Dp||{}),iI=()=>{const t=window.location.hostname.split(".");return t.slice(t.length-2).join(".")},oI=(e,t)=>{const r=new URL(e).hostname.includes(t),n=e.includes(".cdn.");return r&&!n},aI=()=>{const e=iI();return{enabled:!0,env:"development",site:"datadoghq.eu",sessionSampleRate:1,sessionReplaySampleRate:0,trackUserInteractions:!0,trackResources:!0,traceSampleRate:1,telemetrySampleRate:0,allowedTracingUrls:[t=>oI(t,e)],enableExperimentalFeatures:["feature_flags"]}},Cc=e=>{e.setGlobalContextProperty("context.app_shell",Mg()),e.setGlobalContextProperty("context.crawler",xg(window.location.href)),e.setGlobalContextProperty("context.web_view",ks())},sI=e=>{const t={...aI(),...e},{enabled:r,appName:n,env:i,service:o}=t;r&&(Qt.init(t),mr.init(t),n&&(Qt.setGlobalContextProperty("app",n),mr.setGlobalContextProperty("app",n)),mr.setGlobalContextProperty("env",i),mr.setGlobalContextProperty("service",o),Cc(Qt),Cc(mr))},Ka;(function(e){e[e.REMOTE=0]="REMOTE",e[e.LOCAL=1]="LOCAL"})(Ka||(Ka={}));var Pn;(function(e){e.Header="header",e.Footer="footer"})(Pn||(Pn={}));const uI=(e,t)=>{const r=(n,i)=>n.startsWith(i)?n:`${i}${n}`;return{...e,web:{...e.web,assets:e.web.assets.map(n=>r(n,t)),entrypoints:e.web.entrypoints.map(n=>r(n,t)),publicPath:t},node:e.node?{...e.node,assets:e.node.assets.map(n=>r(n,t)),entrypoints:e.node.entrypoints.map(n=>r(n,t)),publicPath:t}:void 0}},cI=(e,t="")=>uI(e,t);var xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lI=function(t){return dI(t)&&!fI(t)};function dI(e){return!!e&&typeof e=="object"}function fI(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||vI(e)}var pI=typeof Symbol=="function"&&Symbol.for,hI=pI?Symbol.for("react.element"):60103;function vI(e){return e.$$typeof===hI}function gI(e){return Array.isArray(e)?[]:{}}function Kn(e,t){return t.clone!==!1&&t.isMergeableObject(e)?tn(gI(e),e,t):e}function mI(e,t,r){return e.concat(t).map(function(n){return Kn(n,r)})}function EI(e,t){if(!t.customMerge)return tn;var r=t.customMerge(e);return typeof r=="function"?r:tn}function _I(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Lc(e){return Object.keys(e).concat(_I(e))}function Pp(e,t){try{return t in e}catch{return!1}}function yI(e,t){return Pp(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function bI(e,t,r){var n={};return r.isMergeableObject(e)&&Lc(e).forEach(function(i){n[i]=Kn(e[i],r)}),Lc(t).forEach(function(i){yI(e,i)||(Pp(e,i)&&r.isMergeableObject(t[i])?n[i]=EI(i,r)(e[i],t[i],r):n[i]=Kn(t[i],r))}),n}function tn(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||mI,r.isMergeableObject=r.isMergeableObject||lI,r.cloneUnlessOtherwiseSpecified=Kn;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):bI(e,t,r):Kn(t,r)}tn.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return tn(n,i,r)},{})};var SI=tn,wI=SI;const Up=kp(wI),wa={"@mf/homepage-frontend":()=>({[Pn.Header]:{variant:"marketplace"}}),"@mf/help-center-frontend":()=>({[Pn.Header]:{variant:"slim"}}),"@mf/deals-page-frontend":()=>({[Pn.Header]:{hidePromotionalBanner:!0}})};function TI(e,t){if(!e||!e.length)return t;const r=e.map(n=>{var i;return((i=wa[n])==null?void 0:i.call(wa))||{}});return Up.all([t,...r])}const Mp=["@mf/pdp-frontend","@mf/search-frontend","@mf/brand-pages-nuxt2-frontend","@mf/content-pages-nuxt2-frontend"],II=["@mf/footer-frontend","@mf/header-frontend","@mf/pdp-atf-frontend","@mf/help-center-frontend","@mf/search-frontend-vue3","@mf/homepage-frontend","@mf/deals-page-frontend","@mf/brand-pages-frontend","@mf/content-pages-frontend"],AI="ed_pdp____vue3_v3",RI="ed_pdp_disable_classic_pdp",OI="ed_search_experience____vue_3",NI="ed_rg____brand_pages_vue3",CI="ed_rg____content_pages_vue3",LI=[{name:"@route/product",paths:["/product/*"],notifiesWhenMounted:!0},{name:"@route/search",paths:["/shops/*","/campaigns/*","/s","/c/*","/t/*"],notifiesWhenMounted:!0,saveScrollPosition:!0,layout:"search"},{name:"@route/brand",paths:["/marken/*","/manufacturer/*","/znacky/*","/marki/*","/m/*"],notifiesWhenMounted:!0,saveScrollPosition:!0},{name:"@route/home",paths:["/"],isExactPath:!0,notifiesWhenMounted:!0,saveScrollPosition:!0},{name:"@route/content",paths:["/i/*","/b/*"],notifiesWhenMounted:!0,saveScrollPosition:!0},{name:"@route/help",paths:["/help/","/help/*"],notifiesWhenMounted:!0},{name:"@route/deals",paths:["/deals/","/deals/*","/blackweek/","/blackweek/*"],notifiesWhenMounted:!0,saveScrollPosition:!0}],Fp=new Map(LI.map(e=>[e.name,e]));Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function DI(e,t){return e[t]}const xI="APP_SHELL_SSR_STATE_";function kI(e){return`${xI}${e}`}function PI(e,t){const r=kI(t),n=DI(e,r);return delete e[r],n}const UI=e=>import(e);async function Vp(e,t){return new Promise((r,n)=>{const i=document.createElement("link");i.dataset.app=t,i.rel="stylesheet",i.type="text/css",i.href=e,i.onload=()=>r(),i.onerror=n,document.head.appendChild(i)})}const Dc=async(e,t,r)=>new Promise((n,i)=>{var s;if(e.endsWith(".map")){n();return}if(e.endsWith(".css")){Vp(e,t),n();return}const o=document.createElement("script");o.dataset.app=t,o.src=e,o.onload=o.onload=()=>n(),o.onerror=i,o.crossOrigin="anonymous",r&&(o.type="module");const a=document.getElementsByTagName("script")[0];(s=a.parentNode)==null||s.insertBefore(o,a)}),Nr=e=>{const t=window.APP_SHELL_APPS.find(r=>r.name===e);if(t)return t;throw new Error("App not found: "+e)},MI=e=>{const t=r=>r.endsWith("web.js")||r.includes("shopAppShellNuxt");return e.web.entrypoints.find(t)},FI=async e=>{const t=$a(e);if(t)return t;const r=await du(e),{manifestVersion:n,esm:i,web:o}=r;if(o.assets.forEach(a=>Dc(a,e.name,i)),n===2&&i)return UI(MI(r));try{for(const s of r.web.entrypoints)await Dc(s,e.name,i);return $a(e)}catch(a){throw console.error(`Error loading ${e.name} entrypoint`,a),a}},VI=(e,t)=>{if(e.endsWith(".map"))return;const r=document.createElement("link");r.dataset.app=t,r.href=e,r.rel="prefetch";const n=e.endsWith(".css")?"style":"script";r.setAttribute("as",n),document.head.appendChild(r)},BI=async e=>{if($a(e))return;const{web:{entrypoints:t,assets:r}}=await du(e),n=t.concat(r);for(const i of n)VI(i,e.name)},$a=e=>{if(!e.exposedAs)return;const t=window[e.exposedAs];if(t&&(!t.mount||!t.unmount)){console.error(`Error loading ${e.name} entrypoint: module does not have mount/unmount methods`);return}return t},Bp=async(e,t)=>{try{return await e()}catch(r){return t===1?Promise.reject(r):Bp(e,t-1)}},Gp=()=>{const e=()=>{const t="(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)";return new RegExp(t,"i").test(navigator.userAgent)};return window.APP_SHELL_CONFIG.ANALYTICS_ENABLED&&!e()};function zp(e,t){return function(){return e.apply(t,arguments)}}const{toString:GI}=Object.prototype,{getPrototypeOf:au}=Object,Vo=(e=>t=>{const r=GI.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),vt=e=>(e=e.toLowerCase(),t=>Vo(t)===e),Bo=e=>t=>typeof t===e,{isArray:mn}=Array,$n=Bo("undefined");function zI(e){return e!==null&&!$n(e)&&e.constructor!==null&&!$n(e.constructor)&&qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Hp=vt("ArrayBuffer");function HI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Hp(e.buffer),t}const jI=Bo("string"),qe=Bo("function"),jp=Bo("number"),Go=e=>e!==null&&typeof e=="object",qI=e=>e===!0||e===!1,zi=e=>{if(Vo(e)!=="object")return!1;const t=au(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},KI=vt("Date"),$I=vt("File"),WI=vt("Blob"),YI=vt("FileList"),XI=e=>Go(e)&&qe(e.pipe),JI=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qe(e.append)&&((t=Vo(e))==="formdata"||t==="object"&&qe(e.toString)&&e.toString()==="[object FormData]"))},ZI=vt("URLSearchParams"),[QI,eA,tA,rA]=["ReadableStream","Request","Response","Headers"].map(vt),nA=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oi(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),mn(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(n=0;n<a;n++)s=o[n],t.call(null,e[s],s,e)}}function qp(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const _r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kp=e=>!$n(e)&&e!==_r;function Wa(){const{caseless:e}=Kp(this)&&this||{},t={},r=(n,i)=>{const o=e&&qp(t,i)||i;zi(t[o])&&zi(n)?t[o]=Wa(t[o],n):zi(n)?t[o]=Wa({},n):mn(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&oi(arguments[n],r);return t}const iA=(e,t,r,{allOwnKeys:n}={})=>(oi(t,(i,o)=>{r&&qe(i)?e[o]=zp(i,r):e[o]=i},{allOwnKeys:n}),e),oA=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aA=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sA=(e,t,r,n)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!n||n(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=r!==!1&&au(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uA=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},cA=e=>{if(!e)return null;if(mn(e))return e;let t=e.length;if(!jp(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lA=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&au(Uint8Array)),dA=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},fA=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},pA=vt("HTMLFormElement"),hA=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),xc=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),vA=vt("RegExp"),$p=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};oi(r,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(n[o]=a||i)}),Object.defineProperties(e,n)},gA=e=>{$p(e,(t,r)=>{if(qe(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(qe(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},mA=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return mn(e)?n(e):n(String(e).split(t)),r},EA=()=>{},_A=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Ta="abcdefghijklmnopqrstuvwxyz",kc="0123456789",Wp={DIGIT:kc,ALPHA:Ta,ALPHA_DIGIT:Ta+Ta.toUpperCase()+kc},yA=(e=16,t=Wp.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function bA(e){return!!(e&&qe(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const SA=e=>{const t=new Array(10),r=(n,i)=>{if(Go(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=mn(n)?[]:{};return oi(n,(a,s)=>{const c=r(a,i+1);!$n(c)&&(o[s]=c)}),t[i]=void 0,o}}return n};return r(e,0)},wA=vt("AsyncFunction"),TA=e=>e&&(Go(e)||qe(e))&&qe(e.then)&&qe(e.catch),Yp=((e,t)=>e?setImmediate:t?((r,n)=>(_r.addEventListener("message",({source:i,data:o})=>{i===_r&&o===r&&n.length&&n.shift()()},!1),i=>{n.push(i),_r.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",qe(_r.postMessage)),IA=typeof queueMicrotask<"u"?queueMicrotask.bind(_r):typeof process<"u"&&process.nextTick||Yp,A={isArray:mn,isArrayBuffer:Hp,isBuffer:zI,isFormData:JI,isArrayBufferView:HI,isString:jI,isNumber:jp,isBoolean:qI,isObject:Go,isPlainObject:zi,isReadableStream:QI,isRequest:eA,isResponse:tA,isHeaders:rA,isUndefined:$n,isDate:KI,isFile:$I,isBlob:WI,isRegExp:vA,isFunction:qe,isStream:XI,isURLSearchParams:ZI,isTypedArray:lA,isFileList:YI,forEach:oi,merge:Wa,extend:iA,trim:nA,stripBOM:oA,inherits:aA,toFlatObject:sA,kindOf:Vo,kindOfTest:vt,endsWith:uA,toArray:cA,forEachEntry:dA,matchAll:fA,isHTMLForm:pA,hasOwnProperty:xc,hasOwnProp:xc,reduceDescriptors:$p,freezeMethods:gA,toObjectSet:mA,toCamelCase:hA,noop:EA,toFiniteNumber:_A,findKey:qp,global:_r,isContextDefined:Kp,ALPHABET:Wp,generateString:yA,isSpecCompliantForm:bA,toJSONObject:SA,isAsyncFn:wA,isThenable:TA,setImmediate:Yp,asap:IA};function G(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}A.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const Xp=G.prototype,Jp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Jp[e]={value:e}});Object.defineProperties(G,Jp);Object.defineProperty(Xp,"isAxiosError",{value:!0});G.from=(e,t,r,n,i,o)=>{const a=Object.create(Xp);return A.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),G.call(a,e.message,t,r,n,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const AA=null;function Ya(e){return A.isPlainObject(e)||A.isArray(e)}function Zp(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function Pc(e,t,r){return e?e.concat(t).map(function(i,o){return i=Zp(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function RA(e){return A.isArray(e)&&!e.some(Ya)}const OA=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function zo(e,t,r){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=A.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!A.isUndefined(g[v])});const n=r.metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(i))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(A.isDate(h))return h.toISOString();if(!c&&A.isBlob(h))throw new G("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(h)||A.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,v,g){let m=h;if(h&&!g&&typeof h=="object"){if(A.endsWith(v,"{}"))v=n?v:v.slice(0,-2),h=JSON.stringify(h);else if(A.isArray(h)&&RA(h)||(A.isFileList(h)||A.endsWith(v,"[]"))&&(m=A.toArray(h)))return v=Zp(v),m.forEach(function(S,_){!(A.isUndefined(S)||S===null)&&t.append(a===!0?Pc([v],_,o):a===null?v:v+"[]",u(S))}),!1}return Ya(h)?!0:(t.append(Pc(g,v,o),u(h)),!1)}const f=[],d=Object.assign(OA,{defaultVisitor:l,convertValue:u,isVisitable:Ya});function p(h,v){if(!A.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(h),A.forEach(h,function(m,I){(!(A.isUndefined(m)||m===null)&&i.call(t,m,A.isString(I)?I.trim():I,v,d))===!0&&p(m,v?v.concat(I):[I])}),f.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Uc(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function su(e,t){this._pairs=[],e&&zo(e,this,t)}const Qp=su.prototype;Qp.append=function(t,r){this._pairs.push([t,r])};Qp.toString=function(t){const r=t?function(n){return t.call(this,n,Uc)}:Uc;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function NA(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eh(e,t,r){if(!t)return e;const n=r&&r.encode||NA,i=r&&r.serialize;let o;if(i?o=i(t,r):o=A.isURLSearchParams(t)?t.toString():new su(t,r).toString(n),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Mc{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(n){n!==null&&t(n)})}}const th={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CA=typeof URLSearchParams<"u"?URLSearchParams:su,LA=typeof FormData<"u"?FormData:null,DA=typeof Blob<"u"?Blob:null,xA={isBrowser:!0,classes:{URLSearchParams:CA,FormData:LA,Blob:DA},protocols:["http","https","file","blob","url","data"]},uu=typeof window<"u"&&typeof document<"u",Xa=typeof navigator=="object"&&navigator||void 0,kA=uu&&(!Xa||["ReactNative","NativeScript","NS"].indexOf(Xa.product)<0),PA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",UA=uu&&window.location.href||"http://localhost",MA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:uu,hasStandardBrowserEnv:kA,hasStandardBrowserWebWorkerEnv:PA,navigator:Xa,origin:UA},Symbol.toStringTag,{value:"Module"})),Ue={...MA,...xA};function FA(e,t){return zo(e,new Ue.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return Ue.isNode&&A.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function VA(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BA(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function rh(e){function t(r,n,i,o){let a=r[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=r.length;return a=!a&&A.isArray(i)?i.length:a,c?(A.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s):((!i[a]||!A.isObject(i[a]))&&(i[a]=[]),t(r,n,i[a],o)&&A.isArray(i[a])&&(i[a]=BA(i[a])),!s)}if(A.isFormData(e)&&A.isFunction(e.entries)){const r={};return A.forEachEntry(e,(n,i)=>{t(VA(n),i,r,0)}),r}return null}function GA(e,t,r){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const ai={transitional:th,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=A.isObject(t);if(o&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return i?JSON.stringify(rh(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return FA(t,this.formSerializer).toString();if((s=A.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zo(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),GA(t)):t}],transformResponse:[function(t){const r=this.transitional||ai.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(n&&!this.responseType||i)){const a=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?G.from(s,G.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ue.classes.FormData,Blob:Ue.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{ai.headers[e]={}});const zA=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HA=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),r=a.substring(0,i).trim().toLowerCase(),n=a.substring(i+1).trim(),!(!r||t[r]&&zA[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Fc=Symbol("internals");function On(e){return e&&String(e).trim().toLowerCase()}function Hi(e){return e===!1||e==null?e:A.isArray(e)?e.map(Hi):String(e)}function jA(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qA=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ia(e,t,r,n,i){if(A.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!A.isString(t)){if(A.isString(n))return t.indexOf(n)!==-1;if(A.isRegExp(n))return n.test(t)}}function KA(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function $A(e,t){const r=A.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,a){return this[n].call(this,t,i,o,a)},configurable:!0})})}class Me{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(s,c,u){const l=On(c);if(!l)throw new Error("header name must be a non-empty string");const f=A.findKey(i,l);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||c]=Hi(s))}const a=(s,c)=>A.forEach(s,(u,l)=>o(u,l,c));if(A.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(A.isString(t)&&(t=t.trim())&&!qA(t))a(HA(t),r);else if(A.isHeaders(t))for(const[s,c]of t.entries())o(c,s,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=On(t),t){const n=A.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return jA(i);if(A.isFunction(r))return r.call(this,i,n);if(A.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=On(t),t){const n=A.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ia(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(a){if(a=On(a),a){const s=A.findKey(n,a);s&&(!r||Ia(n,n[s],s,r))&&(delete n[s],i=!0)}}return A.isArray(t)?t.forEach(o):o(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const o=r[n];(!t||Ia(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const r=this,n={};return A.forEach(this,(i,o)=>{const a=A.findKey(n,o);if(a){r[a]=Hi(i),delete r[o];return}const s=t?KA(o):String(o).trim();s!==o&&delete r[o],r[s]=Hi(i),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return A.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&A.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Fc]=this[Fc]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=On(a);n[s]||($A(i,a),n[s]=!0)}return A.isArray(t)?t.forEach(o):o(t),this}}Me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(Me.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});A.freezeMethods(Me);function Aa(e,t){const r=this||ai,n=t||r,i=Me.from(n.headers);let o=n.data;return A.forEach(e,function(s){o=s.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function nh(e){return!!(e&&e.__CANCEL__)}function En(e,t,r){G.call(this,e??"canceled",G.ERR_CANCELED,t,r),this.name="CanceledError"}A.inherits(En,G,{__CANCEL__:!0});function ih(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new G("Request failed with status code "+r.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WA(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function YA(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=n[o];a||(a=u),r[i]=c,n[i]=u;let f=o,d=0;for(;f!==i;)d+=r[f++],f=f%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-a<t)return;const p=l&&u-l;return p?Math.round(d*1e3/p):void 0}}function XA(e,t){let r=0,n=1e3/t,i,o;const a=(u,l=Date.now())=>{r=l,i=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const l=Date.now(),f=l-r;f>=n?a(u,l):(i=u,o||(o=setTimeout(()=>{o=null,a(i)},n-f)))},()=>i&&a(i)]}const oo=(e,t,r=3)=>{let n=0;const i=YA(50,250);return XA(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-n,u=i(c),l=a<=s;n=a;const f={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:u||void 0,estimated:u&&s&&l?(s-a)/u:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(f)},r)},Vc=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Bc=e=>(...t)=>A.asap(()=>e(...t)),JA=Ue.hasStandardBrowserEnv?function(){const t=Ue.navigator&&/(msie|trident)/i.test(Ue.navigator.userAgent),r=document.createElement("a");let n;function i(o){let a=o;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){const s=A.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}(),ZA=Ue.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const a=[e+"="+encodeURIComponent(t)];A.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),A.isString(n)&&a.push("path="+n),A.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QA(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eR(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function oh(e,t){return e&&!QA(t)?eR(e,t):t}const Gc=e=>e instanceof Me?{...e}:e;function Cr(e,t){t=t||{};const r={};function n(u,l,f){return A.isPlainObject(u)&&A.isPlainObject(l)?A.merge.call({caseless:f},u,l):A.isPlainObject(l)?A.merge({},l):A.isArray(l)?l.slice():l}function i(u,l,f){if(A.isUndefined(l)){if(!A.isUndefined(u))return n(void 0,u,f)}else return n(u,l,f)}function o(u,l){if(!A.isUndefined(l))return n(void 0,l)}function a(u,l){if(A.isUndefined(l)){if(!A.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function s(u,l,f){if(f in t)return n(u,l);if(f in e)return n(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(u,l)=>i(Gc(u),Gc(l),!0)};return A.forEach(Object.keys(Object.assign({},e,t)),function(l){const f=c[l]||i,d=f(e[l],t[l],l);A.isUndefined(d)&&f!==s||(r[l]=d)}),r}const ah=e=>{const t=Cr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Me.from(a),t.url=eh(oh(t.baseURL,t.url),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(A.isFormData(r)){if(Ue.hasStandardBrowserEnv||Ue.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...l]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...l].join("; "))}}if(Ue.hasStandardBrowserEnv&&(n&&A.isFunction(n)&&(n=n(t)),n||n!==!1&&JA(t.url))){const u=i&&o&&ZA.read(o);u&&a.set(i,u)}return t},tR=typeof XMLHttpRequest<"u",rR=tR&&function(e){return new Promise(function(r,n){const i=ah(e);let o=i.data;const a=Me.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:u}=i,l,f,d,p,h;function v(){p&&p(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function m(){if(!g)return;const S=Me.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),E={data:!s||s==="text"||s==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:e,request:g};ih(function(b){r(b),v()},function(b){n(b),v()},E),g=null}"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(m)},g.onabort=function(){g&&(n(new G("Request aborted",G.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new G("Network Error",G.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let _=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||th;i.timeoutErrorMessage&&(_=i.timeoutErrorMessage),n(new G(_,E.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,e,g)),g=null},o===void 0&&a.setContentType(null),"setRequestHeader"in g&&A.forEach(a.toJSON(),function(_,E){g.setRequestHeader(E,_)}),A.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),s&&s!=="json"&&(g.responseType=i.responseType),u&&([d,h]=oo(u,!0),g.addEventListener("progress",d)),c&&g.upload&&([f,p]=oo(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(l=S=>{g&&(n(!S||S.type?new En(null,e,g):S),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const I=WA(i.url);if(I&&Ue.protocols.indexOf(I)===-1){n(new G("Unsupported protocol "+I+":",G.ERR_BAD_REQUEST,e));return}g.send(o||null)})},nR=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const o=function(u){if(!i){i=!0,s();const l=u instanceof Error?u:this.reason;n.abort(l instanceof G?l:new En(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,o(new G(`timeout ${t} of ms exceeded`,G.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>A.asap(s),c}},iR=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},oR=async function*(e,t){for await(const r of aR(e))yield*iR(r,t)},aR=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},zc=(e,t,r,n)=>{const i=oR(e,t);let o=0,a,s=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await i.next();if(u){s(),c.close();return}let f=l.byteLength;if(r){let d=o+=f;r(d)}c.enqueue(new Uint8Array(l))}catch(u){throw s(u),u}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},Ho=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sh=Ho&&typeof ReadableStream=="function",sR=Ho&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),uh=(e,...t)=>{try{return!!e(...t)}catch{return!1}},uR=sh&&uh(()=>{let e=!1;const t=new Request(Ue.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Hc=64*1024,Ja=sh&&uh(()=>A.isReadableStream(new Response("").body)),ao={stream:Ja&&(e=>e.body)};Ho&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ao[t]&&(ao[t]=A.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new G(`Response type '${t}' is not supported`,G.ERR_NOT_SUPPORT,n)})})})(new Response);const cR=async e=>{if(e==null)return 0;if(A.isBlob(e))return e.size;if(A.isSpecCompliantForm(e))return(await new Request(Ue.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(A.isArrayBufferView(e)||A.isArrayBuffer(e))return e.byteLength;if(A.isURLSearchParams(e)&&(e=e+""),A.isString(e))return(await sR(e)).byteLength},lR=async(e,t)=>{const r=A.toFiniteNumber(e.getContentLength());return r??cR(t)},dR=Ho&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:d}=ah(e);u=u?(u+"").toLowerCase():"text";let p=nR([i,o&&o.toAbortSignal()],a),h;const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(c&&uR&&r!=="get"&&r!=="head"&&(g=await lR(l,n))!==0){let E=new Request(t,{method:"POST",body:n,duplex:"half"}),y;if(A.isFormData(n)&&(y=E.headers.get("content-type"))&&l.setContentType(y),E.body){const[b,R]=Vc(g,oo(Bc(c)));n=zc(E.body,Hc,b,R)}}A.isString(f)||(f=f?"include":"omit");const m="credentials"in Request.prototype;h=new Request(t,{...d,signal:p,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:m?f:void 0});let I=await fetch(h);const S=Ja&&(u==="stream"||u==="response");if(Ja&&(s||S&&v)){const E={};["status","statusText","headers"].forEach(N=>{E[N]=I[N]});const y=A.toFiniteNumber(I.headers.get("content-length")),[b,R]=s&&Vc(y,oo(Bc(s),!0))||[];I=new Response(zc(I.body,Hc,b,()=>{R&&R(),v&&v()}),E)}u=u||"text";let _=await ao[A.findKey(ao,u)||"text"](I,e);return!S&&v&&v(),await new Promise((E,y)=>{ih(E,y,{data:_,headers:Me.from(I.headers),status:I.status,statusText:I.statusText,config:e,request:h})})}catch(m){throw v&&v(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new G("Network Error",G.ERR_NETWORK,e,h),{cause:m.cause||m}):G.from(m,m&&m.code,e,h)}}),Za={http:AA,xhr:rR,fetch:dR};A.forEach(Za,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jc=e=>`- ${e}`,fR=e=>A.isFunction(e)||e===null||e===!1,ch={getAdapter:e=>{e=A.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){r=e[o];let a;if(n=r,!fR(r)&&(n=Za[(a=String(r)).toLowerCase()],n===void 0))throw new G(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+o]=n}if(!n){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(jc).join(`
`):" "+jc(o[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Za};function Ra(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new En(null,e)}function qc(e){return Ra(e),e.headers=Me.from(e.headers),e.data=Aa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ch.getAdapter(e.adapter||ai.adapter)(e).then(function(n){return Ra(e),n.data=Aa.call(e,e.transformResponse,n),n.headers=Me.from(n.headers),n},function(n){return nh(n)||(Ra(e),n&&n.response&&(n.response.data=Aa.call(e,e.transformResponse,n.response),n.response.headers=Me.from(n.response.headers))),Promise.reject(n)})}const lh="1.7.7",cu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{cu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Kc={};cu.transitional=function(t,r,n){function i(o,a){return"[Axios v"+lh+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,s)=>{if(t===!1)throw new G(i(a," has been removed"+(r?" in "+r:"")),G.ERR_DEPRECATED);return r&&!Kc[a]&&(Kc[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,s):!0}};function pR(e,t,r){if(typeof e!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new G("option "+o+" must be "+c,G.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new G("Unknown option "+o,G.ERR_BAD_OPTION)}}const Qa={assertOptions:pR,validators:cu},Ht=Qa.validators;class Ir{constructor(t){this.defaults=t,this.interceptors={request:new Mc,response:new Mc}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Cr(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&Qa.assertOptions(n,{silentJSONParsing:Ht.transitional(Ht.boolean),forcedJSONParsing:Ht.transitional(Ht.boolean),clarifyTimeoutError:Ht.transitional(Ht.boolean)},!1),i!=null&&(A.isFunction(i)?r.paramsSerializer={serialize:i}:Qa.assertOptions(i,{encode:Ht.function,serialize:Ht.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&A.merge(o.common,o[r.method]);o&&A.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),r.headers=Me.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(c=c&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let l,f=0,d;if(!c){const h=[qc.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,u),d=h.length,l=Promise.resolve(r);f<d;)l=l.then(h[f++],h[f++]);return l}d=s.length;let p=r;for(f=0;f<d;){const h=s[f++],v=s[f++];try{p=h(p)}catch(g){v.call(this,g);break}}try{l=qc.call(this,p)}catch(h){return Promise.reject(h)}for(f=0,d=u.length;f<d;)l=l.then(u[f++],u[f++]);return l}getUri(t){t=Cr(this.defaults,t);const r=oh(t.baseURL,t.url);return eh(r,t.params,t.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(t){Ir.prototype[t]=function(r,n){return this.request(Cr(n||{},{method:t,url:r,data:(n||{}).data}))}});A.forEach(["post","put","patch"],function(t){function r(n){return function(o,a,s){return this.request(Cr(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Ir.prototype[t]=r(),Ir.prototype[t+"Form"]=r(!0)});class lu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{n.subscribe(s),o=s}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},t(function(o,a,s){n.reason||(n.reason=new En(o,a,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new lu(function(i){t=i}),cancel:t}}}function hR(e){return function(r){return e.apply(null,r)}}function vR(e){return A.isObject(e)&&e.isAxiosError===!0}const es={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(es).forEach(([e,t])=>{es[t]=e});function dh(e){const t=new Ir(e),r=zp(Ir.prototype.request,t);return A.extend(r,Ir.prototype,t,{allOwnKeys:!0}),A.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return dh(Cr(e,i))},r}const de=dh(ai);de.Axios=Ir;de.CanceledError=En;de.CancelToken=lu;de.isCancel=nh;de.VERSION=lh;de.toFormData=zo;de.AxiosError=G;de.Cancel=de.CanceledError;de.all=function(t){return Promise.all(t)};de.spread=hR;de.isAxiosError=vR;de.mergeConfig=Cr;de.AxiosHeaders=Me;de.formToJSON=e=>rh(A.isHTMLForm(e)?new FormData(e):e);de.getAdapter=ch.getAdapter;de.HttpStatusCode=es;de.default=de;const gR=e=>{const t=document.querySelector(`script[type="application/x-appshell-manifest"][data-mf="${e}"]`),n=document.querySelector(`script[type="application/x-appshell-manifest"][data-app="${e}"]`)||t;if(!n)return null;try{return JSON.parse(n.textContent||"")}catch{return null}},mR=async e=>(await Bp(()=>de.get(e),3)).data;window.APP_SHELL_MANIFESTS=new Map;const du=e=>{const t=window.APP_SHELL_MANIFESTS;if(!t.has(e.name)){const r=Promise.resolve(gR(e.name)||mR(e.manifestUrl)).then(n=>cI(n,e.publicPath));t.set(e.name,r)}return t.get(e.name)},Er=class Er{constructor(){ae(this,"subscribers",new Set);ae(this,"currentApp",null);window.addEventListener("single-spa:before-app-change",t=>{const r=t.detail.appsByNewStatus.MOUNTED.find(i=>Mp.includes(i));if(!r)return;const n=this.currentApp!==r&&this.currentApp!==null;this.currentApp=r,n&&this.subscribers.forEach(i=>i(this.currentApp))})}static getInstance(){return Er.instance||(Er.instance=new Er),Er.instance}subscribeToAppChanges(t){this.subscribers.add(t)}unsubscribeFromAppChanges(t){this.subscribers.delete(t)}};ae(Er,"instance",null);let ts=Er;const fh="shop-app-shell.app",ph="app-shell",$c=e=>{var t;return((t=document.querySelector(`meta[name="${e}"]`))==null?void 0:t.getAttribute("content"))??null},ER=()=>{const e=window.APP_SHELL_CONFIG.ENV;return e==="production"?"prod":e},_R=()=>{ts.getInstance().subscribeToAppChanges(async t=>{var a,s;const r=Nr(t),n=await du(r);let i=(a=n.datadogRum)==null?void 0:a.version,o=(s=n.datadogRum)==null?void 0:s.service;o||(o=fh,i=ph),i||(i="unknown"),Qt.startView({version:i,service:o}),mr.setGlobalContextProperty("service",o)})},yR=()=>{const{DD_RUM_ENABLED:e,DD_RUM_CLIENT_TOKEN:t}=window.APP_SHELL_CONFIG;if(!e||!Gp())return;const r=$c("datadog-rum-service")??fh,n=$c("datadog-rum-version")??ph;sI({applicationId:Dp.Marketplace,clientToken:t,service:r,env:ER(),version:n,sessionSampleRate:2,trackViewsManually:!0,sessionReplaySampleRate:1,startSessionReplayRecordingManually:!1,defaultPrivacyLevel:"mask-user-input"}),Qt.startView({service:r,version:n}),_R()};var bR="x-storefront",SR={DE:"de",SK:"sk",CZ:"cz",PL:"pl",AT:"at"},md;const wR=((md=window.APP_SHELL_CONFIG)==null?void 0:md.ENV)==="development",fu=()=>"serviceWorker"in navigator;let er=null;const TR=Object.values(SR),IR=()=>{er==null||er.postMessage({type:"SET_CACHE_URLS",urls:TR.flatMap(e=>[`https://api.cloud.kaufland.${e}/search`,`https://api.cloud.kaufland.${e}/expvision/frontend/bff/v5/deals-page/category-filters`,`https://api.cloud.kaufland.${e}/expvision/frontend/bff/v5/products-deals`,`https://www.kaufland.${e}/backend/search/v1/oscm-content`,`https://www.kaufland.${e}/backend/oscm/v1/banners/category-pages`,`https://www.kaufland.${e}/backend/oscm/v1/banners/deals-page`,`https://www.kaufland.${e}/backend/category-pages/v1/cms-content`])})},AR=async()=>{if(!fu())return;navigator.serviceWorker.ready.then(t=>{er=t.active,IR(),wR&&window.APP_SHELL_SW_ENABLE_LOGGING()});const e=`${window.APP_SHELL_CONFIG.SW_PATH}sw.js`;try{await navigator.serviceWorker.register(e,{scope:"/"})}catch(t){console.warn("Failed to register service worker",t)}};window.APP_SHELL_SW_PURGE_CACHE=()=>{!fu()||!er||er.postMessage({type:"PURGE_CACHE"})};window.APP_SHELL_SW_ENABLE_LOGGING=()=>{!fu()||!er||er.postMessage({type:"ENABLE_LOGGING"})};const RR=`<div class="as-loader__box">
  <span class="as-loader__spinner"></span>
</div>

<style>
  .as-loader__box {
    display: flex;
    height: 100%;
    align-items: start;
    justify-content: center;
    margin-top: 100px;
  }

  @media (min-width: 768px) {
    .as-loader__box {
      align-items: center;
      margin-top: 0;
    }
  }

  .as-loader__spinner {
    display: flex;
    height: 100px;
    width: 100px;
    border: 11px solid #d9d9d9;
    border-top-color: #424242;
    border-radius: 50%;
    -webkit-animation-name: as-spin;
    animation-name: as-spin;
    -webkit-animation-duration: 1s;
    animation-duration: 1s;
    -webkit-animation-timing-function: linear;
    animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
  }

  @keyframes as-spin {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }
</style>
`,OR=`<div class="loader">
  <div class="skeleton skeleton-1"></div>
  <div class="skeleton skeleton-2"></div>
  <div class="skeleton skeleton-3"></div>
  <div class="skeleton skeleton-4"></div>
  <div class="skeleton skeleton-5"></div>
  <div class="skeleton skeleton-6"></div>
</div>

<style>
  .loader {
    display: grid;
    grid-template-areas: 'a' 'b';
    grid-template-columns: 1fr;
    grid-template-rows: 340px 200px;
    gap: 22px;

    margin: 0 auto;
    padding: 16px;
  }

  .skeleton-1 {
    grid-area: a;
  }
  .skeleton-2 {
    grid-area: b;
  }
  .skeleton-3 {
    grid-area: c;
    display: none;
  }
  .skeleton-4 {
    grid-area: d;
    display: none;
  }
  .skeleton-5 {
    grid-area: e;
    display: none;
  }
  .skeleton-6 {
    grid-area: f;
    display: none;
  }

  @media (min-width: 768px) {
    .loader {
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 260px 220px 220px;
      grid-template-areas: 'a a' 'b b' 'c d';
    }
    .skeleton-3 {
      display: block;
    }
    .skeleton-4 {
      display: block;
    }
  }
  @media (min-width: 1280px) {
    .loader {
      grid-template-columns: 2fr 2fr 1fr 1fr;
      grid-template-rows: 270px 250px;
      grid-template-areas: 'a a b b' 'c d e f';
    }
    .skeleton-5 {
      display: block;
    }
    .skeleton-6 {
      display: block;
    }
  }
  @media (min-width: 1440px) {
    .loader {
      width: 1440px;
    }
  }

  @keyframes skeleton-pulse {
    100% {
      transform: translateX(100%);
    }
  }
  .skeleton {
    position: relative;
    overflow: hidden;
    color: transparent;
    background-color: #d9d9d9;
  }
  .skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(-90deg, transparent, #f0f0f0 50%, transparent);
    transform: translateX(-200%) scale(4);
    animation: skeleton-pulse 600ms ease-in-out infinite;
  }
  @media (prefers-reduced-motion) {
    .skeleton::after {
      animation: none;
    }
  }
</style>
`,NR=`<div class="page">
  <div class="loader loader--search">
    <div class="loader__filter">
      <div class="skeleton skeleton--filter"></div>
    </div>
    <div class="loader__main">
      <div class="loader__header">
        <div class="skeleton skeleton--header-left"></div>
        <div class="skeleton skeleton--header-right"></div>
      </div>
      <div class="loader__smart-filters">
        <div class="skeleton skeleton--smartfilter"></div>
        <div class="skeleton skeleton--smartfilter"></div>
      </div>
      <div class="loader__results">
        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>

        <div class="result">
          <div class="skeleton skeleton--product-image"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-info"></div>
          <div class="skeleton skeleton--product-price"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Mobile */
  .page {
    max-width: 1440px;
    width: 100%;
    margin: 3.2rem auto;
  }

  @media (min-width: 1024px) {
    .page {
      margin-top: 4rem;
    }
  }

  .loader--search {
    margin: 0 1.1rem;
    display: grid;
    grid-template-columns: 25.6rem minmax(0, 1fr);
    grid-template-rows: auto;
  }

  .loader__header {
    display: flex;
    justify-content: space-between;
    width: auto;
    padding-bottom: 1.6rem;
    margin-bottom: 1.6rem;
    border-bottom: 0.2rem solid #f0f0f0;
  }

  @media (min-width: 1024px) {
    .loader__header {
      margin-left: 1.6rem;
    }
  }

  .loader__results {
    width: calc(100% + 1.6rem);
    transform: translateX(-0.8rem);
    display: flex;
    flex-wrap: wrap;
    margin-top: 0.8rem;
    margin-bottom: 3.2rem;
    justify-content: space-between;
    box-sizing: border-box;
  }

  @media (min-width: 1024px) {
    .loader__results {
      margin-top: 3.2rem;
    }
  }

  .loader__smart-filters {
    overflow: hidden;
    width: calc(100% + 1.1rem);
    display: flex;
    flex-direction: column;
  }

  @media (min-width: 1024px) {
    .loader__smart-filters {
      padding-left: 1.6rem;
    }
  }

  .result {
    width: 50%;
    z-index: 2;
    margin-bottom: 3.2rem;
    padding: 1.2rem 0.8rem 2.4rem;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
  }

  @media (min-width: 768px) {
    .result {
      width: 33.3333333333%;
    }
  }

  @media (min-width: 1280px) {
    .result {
      width: 25%;
      padding-left: 2.4rem;
    }
  }

  .skeleton--header-left {
    height: 2.4rem;
    width: 30%;
  }

  .skeleton--header-right {
    height: 2.4rem;
    width: 20%;
  }

  @media (min-width: 1024px) {
    .skeleton--header-right {
      width: 20%;
    }

    .skeleton--header-left,
    .skeleton--header-right {
      height: 4rem;
    }
  }

  .skeleton--filter {
    height: 100vh;
    width: 100%;
  }

  .skeleton--smartfilter {
    width: 100%;
    height: 3rem;
    margin-bottom: 1.6rem;
  }

  @media (min-width: 1024px) {
    .skeleton--smartfilter {
      width: 80%;
    }
  }

  .skeleton--product-image {
    width: 100%;
    height: 15rem;
    margin-bottom: 1.6rem;
  }

  .skeleton--product-info {
    width: 100%;
    height: 2.4rem;
    margin-bottom: 0.8rem;
  }

  .skeleton--product-price {
    margin-top: 1.6rem;
    height: 2.4rem;
    width: 40%;
  }

  .loader__filter {
    display: none;
    padding-top: 0.4rem;
    padding-right: 2.4rem;
    position: relative;
  }

  @media (min-width: 1024px) {
    .loader__filter::before {
      content: '';
      display: block;
      position: absolute;
      right: 0;
      top: 0;
      height: 100%;
      width: 0.2rem;
      background: #f0f0f0;
    }
  }

  .loader__main {
    padding: 0 0 1rem 0;
    grid-column: 1/3;
    grid-row: 2;
    width: 100%;
  }

  @media (min-width: 1024px) {
    .loader__filter {
      display: block;
    }

    .loader__main {
      grid-column: 2;
      grid-row: 1/4;
      padding-left: 3.2rem;
    }
  }

  @keyframes skeleton-pulse {
    100% {
      transform: translateX(100%);
    }
  }

  .skeleton {
    position: relative;
    overflow: hidden;
    color: transparent;
    background-color: #d9d9d9;
  }

  .skeleton::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: linear-gradient(-90deg, transparent, #f0f0f0 50%, transparent);
    transform: translateX(-200%) scale(4);
    animation: skeleton-pulse 600ms ease-in-out infinite;
  }

  @media (prefers-reduced-motion) {
    .skeleton::after {
      animation: none;
    }
  }
</style>
`,pu=new Map,CR=()=>new Set(window.APP_SHELL_APPS.filter(e=>{const t=e.routeName?Fp.get(e.routeName):void 0;return t==null?void 0:t.saveScrollPosition}).map(e=>e.name)),hh=e=>decodeURI(e).replaceAll(" ","+"),LR=(e,t)=>{if(!CR().has(e))return;const r={left:window.scrollX,top:window.scrollY};pu.set(hh(t),r)},DR=e=>{pu.delete(e)},xR=()=>{const e=pu.get(hh(window.location.href))||{left:0,top:0};window.scroll(e.left,e.top)};let Ii;const kR=new Uint8Array(16);function PR(){if(!Ii&&(Ii=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ii))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ii(kR)}const ve=[];for(let e=0;e<256;++e)ve.push((e+256).toString(16).slice(1));function UR(e,t=0){return ve[e[t+0]]+ve[e[t+1]]+ve[e[t+2]]+ve[e[t+3]]+"-"+ve[e[t+4]]+ve[e[t+5]]+"-"+ve[e[t+6]]+ve[e[t+7]]+"-"+ve[e[t+8]]+ve[e[t+9]]+"-"+ve[e[t+10]]+ve[e[t+11]]+ve[e[t+12]]+ve[e[t+13]]+ve[e[t+14]]+ve[e[t+15]]}const MR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wc={randomUUID:MR};function FR(e,t,r){if(Wc.randomUUID&&!t&&!e)return Wc.randomUUID();e=e||{};const n=e.random||(e.rng||PR)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,UR(n)}var vh={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.jsonSchema=r()})(xp,function(){var t=n;t.Integer={type:"integer"};var r={String,Boolean,Number,Object,Array,Date};t.validate=n;function n(i,o){return n(i,o,{changing:!1})}t.checkPropertyChange=function(i,o,a){return n(i,o,{changing:a||"property"})};var n=t._validate=function(i,o,a){a||(a={});var s=a.changing;function c(d){return d.type||r[d.name]==d&&d.name.toLowerCase()}var u=[];function l(d,p,h,v){var g;h+=h?typeof v=="number"?"["+v+"]":typeof v>"u"?"":"."+v:v;function m(R){u.push({property:h,message:R})}if((typeof p!="object"||p instanceof Array)&&(h||typeof p!="function")&&!(p&&c(p)))return typeof p=="function"?d instanceof p||m("is not an instance of the class/constructor "+p.name):p&&m("Invalid schema/property definition "+p),null;s&&p.readonly&&m("is a readonly field, it can not be changed"),p.extends&&l(d,p.extends,h,v);function I(R,N){if(R){if(typeof R=="string"&&R!="any"&&(R=="null"?N!==null:typeof N!=R)&&!(N instanceof Array&&R=="array")&&!(N instanceof Date&&R=="date")&&!(R=="integer"&&N%1===0))return[{property:h,message:N+" - "+typeof N+" value found, but a "+R+" is required"}];if(R instanceof Array){for(var x=[],J=0;J<R.length&&(x=I(R[J],N)).length;J++);if(x.length)return x}else if(typeof R=="object"){var ie=u;u=[],l(N,R,h);var _e=u;return u=ie,_e}}return[]}if(d===void 0)p.required&&m("is missing and it is required");else if(u=u.concat(I(c(p),d)),p.disallow&&!I(p.disallow,d).length&&m(" disallowed value was matched"),d!==null){if(d instanceof Array){if(p.items){var S=p.items instanceof Array,_=p.items;for(v=0,g=d.length;v<g;v+=1)S&&(_=p.items[v]),a.coerce&&(d[v]=a.coerce(d[v],_)),u.concat(l(d[v],_,h,v))}p.minItems&&d.length<p.minItems&&m("There must be a minimum of "+p.minItems+" in the array"),p.maxItems&&d.length>p.maxItems&&m("There must be a maximum of "+p.maxItems+" in the array")}else(p.properties||p.additionalProperties)&&u.concat(f(d,p.properties,h,p.additionalProperties));if(p.pattern&&typeof d=="string"&&!d.match(p.pattern)&&m("does not match the regex pattern "+p.pattern),p.maxLength&&typeof d=="string"&&d.length>p.maxLength&&m("may only be "+p.maxLength+" characters long"),p.minLength&&typeof d=="string"&&d.length<p.minLength&&m("must be at least "+p.minLength+" characters long"),typeof p.minimum<"u"&&typeof d==typeof p.minimum&&p.minimum>d&&m("must have a minimum value of "+p.minimum),typeof p.maximum<"u"&&typeof d==typeof p.maximum&&p.maximum<d&&m("must have a maximum value of "+p.maximum),p.enum){var E=p.enum;g=E.length;for(var y,b=0;b<g;b++)if(E[b]===d){y=1;break}y||m("does not have a value in the enumeration "+E.join(", "))}typeof p.maxDecimal=="number"&&d.toString().match(new RegExp("\\.[0-9]{"+(p.maxDecimal+1)+",}"))&&m("may only have "+p.maxDecimal+" digits of decimal places")}return null}function f(d,p,h,v){if(typeof p=="object"){(typeof d!="object"||d instanceof Array)&&u.push({property:h,message:"an object is required"});for(var g in p)if(p.hasOwnProperty(g)&&g!="__proto__"&&g!="constructor"){var m=d.hasOwnProperty(g)?d[g]:void 0;if(m===void 0&&a.existingOnly)continue;var I=p[g];m===void 0&&I.default&&(m=d[g]=I.default),a.coerce&&g in d&&(m=d[g]=a.coerce(m,I)),l(m,I,h,g)}}for(g in d){if(d.hasOwnProperty(g)&&!(g.charAt(0)=="_"&&g.charAt(1)=="_")&&p&&!p[g]&&v===!1)if(a.filter){delete d[g];continue}else u.push({property:h,message:"The property "+g+" is not defined in the schema and the schema does not allow additional properties"});var S=p&&p[g]&&p[g].requires;S&&!(S in d)&&u.push({property:h,message:"the presence of the property "+g+" requires that "+S+" also be present"}),m=d[g],v&&(!(p&&typeof p=="object")||!(g in p))&&(a.coerce&&(m=d[g]=a.coerce(m,v)),l(m,v,h,g)),!s&&m&&m.$schema&&(u=u.concat(l(m,m.$schema,h,g)))}return u}return o&&l(i,o,"",s||""),!s&&i&&i.$schema&&l(i,i.$schema,"",""),{valid:!u.length,errors:u}};return t.mustBeValid=function(i){if(!i.valid)throw new TypeError(i.errors.map(function(o){return"for property "+o.property+": "+o.message}).join(`, 
`))},t})})(vh);var VR=vh.exports,gh={exports:{}};(function(e){(function(){const t=o=>new TextEncoder().encode(o);function r(o,a){typeof o=="string"&&(o=t(o));let s=o.length,c=a^s,u=0,l;for(;s>=4;)l=o[u]&255|(o[++u]&255)<<8|(o[++u]&255)<<16|(o[++u]&255)<<24,l=(l&65535)*1540483477+(((l>>>16)*1540483477&65535)<<16),l^=l>>>24,l=(l&65535)*1540483477+(((l>>>16)*1540483477&65535)<<16),c=(c&65535)*1540483477+(((c>>>16)*1540483477&65535)<<16)^l,s-=4,++u;switch(s){case 3:c^=(o[u+2]&255)<<16;case 2:c^=(o[u+1]&255)<<8;case 1:c^=o[u]&255,c=(c&65535)*1540483477+(((c>>>16)*1540483477&65535)<<16)}return c^=c>>>13,c=(c&65535)*1540483477+(((c>>>16)*1540483477&65535)<<16),c^=c>>>15,c>>>0}function n(o,a){typeof o=="string"&&(o=t(o));let s,c,u,l,f,d,p,h;for(s=o.length&3,c=o.length-s,u=a,f=3432918353,d=461845907,h=0;h<c;)p=o[h]&255|(o[++h]&255)<<8|(o[++h]&255)<<16|(o[++h]&255)<<24,++h,p=(p&65535)*f+(((p>>>16)*f&65535)<<16)&4294967295,p=p<<15|p>>>17,p=(p&65535)*d+(((p>>>16)*d&65535)<<16)&4294967295,u^=p,u=u<<13|u>>>19,l=(u&65535)*5+(((u>>>16)*5&65535)<<16)&4294967295,u=(l&65535)+27492+(((l>>>16)+58964&65535)<<16);switch(p=0,s){case 3:p^=(o[h+2]&255)<<16;case 2:p^=(o[h+1]&255)<<8;case 1:p^=o[h]&255,p=(p&65535)*f+(((p>>>16)*f&65535)<<16)&4294967295,p=p<<15|p>>>17,p=(p&65535)*d+(((p>>>16)*d&65535)<<16)&4294967295,u^=p}return u^=o.length,u^=u>>>16,u=(u&65535)*2246822507+(((u>>>16)*2246822507&65535)<<16)&4294967295,u^=u>>>13,u=(u&65535)*3266489909+(((u>>>16)*3266489909&65535)<<16)&4294967295,u^=u>>>16,u>>>0}const i=n;i.v2=r,i.v3=n,e.exports=i})()})(gh);var BR=gh.exports;const GR=kp(BR);var rs={exports:{}};(function(e,t){(function(r,n){var i="1.0.39",o="",a="?",s="function",c="undefined",u="object",l="string",f="major",d="model",p="name",h="type",v="vendor",g="version",m="architecture",I="console",S="mobile",_="tablet",E="smarttv",y="wearable",b="embedded",R=500,N="Amazon",x="Apple",J="ASUS",ie="BlackBerry",_e="Browser",Ce="Chrome",Nt="Edge",tt="Firefox",zt="Google",gt="Huawei",pe="LG",rt="Microsoft",oe="Motorola",ze="Opera",bn="Samsung",Du="Sharp",hi="Sony",Qo="Xiaomi",ea="Zebra",xu="Facebook",ku="Chromium OS",Pu="Mac OS",Uu=" Browser",Ig=function(z,$){var V={};for(var Z in z)$[Z]&&$[Z].length%2===0?V[Z]=$[Z].concat(z[Z]):V[Z]=z[Z];return V},vi=function(z){for(var $={},V=0;V<z.length;V++)$[z[V].toUpperCase()]=z[V];return $},Mu=function(z,$){return typeof z===l?Mr($).indexOf(Mr(z))!==-1:!1},Mr=function(z){return z.toLowerCase()},Ag=function(z){return typeof z===l?z.replace(/[^\d\.]/g,o).split(".")[0]:n},ta=function(z,$){if(typeof z===l)return z=z.replace(/^\s\s*/,o),typeof $===c?z:z.substring(0,R)},Sn=function(z,$){for(var V=0,Z,Ct,mt,W,U,Et;V<$.length&&!U;){var ra=$[V],Bu=$[V+1];for(Z=Ct=0;Z<ra.length&&!U&&ra[Z];)if(U=ra[Z++].exec(z),U)for(mt=0;mt<Bu.length;mt++)Et=U[++Ct],W=Bu[mt],typeof W===u&&W.length>0?W.length===2?typeof W[1]==s?this[W[0]]=W[1].call(this,Et):this[W[0]]=W[1]:W.length===3?typeof W[1]===s&&!(W[1].exec&&W[1].test)?this[W[0]]=Et?W[1].call(this,Et,W[2]):n:this[W[0]]=Et?Et.replace(W[1],W[2]):n:W.length===4&&(this[W[0]]=Et?W[3].call(this,Et.replace(W[1],W[2])):n):this[W]=Et||n;V+=2}},gi=function(z,$){for(var V in $)if(typeof $[V]===u&&$[V].length>0){for(var Z=0;Z<$[V].length;Z++)if(Mu($[V][Z],z))return V===a?n:V}else if(Mu($[V],z))return V===a?n:V;return $.hasOwnProperty("*")?$["*"]:z},Rg={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Fu={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Vu={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,ze+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[g,[p,ze+" GX"]],[/\bopr\/([\w\.]+)/i],[g,[p,ze]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[g,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/quark(?:pc)?\/([-\w\.]+)/i],[g,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[g,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,"UC"+_e]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[g,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[g,[p,"Smart Lenovo "+_e]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+_e],g],[/\bfocus\/([\w\.]+)/i],[g,[p,tt+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[p,ze+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[p,ze+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[p,"MIUI "+_e]],[/fxios\/([-\w\.]+)/i],[g,[p,tt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360"+Uu]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],g],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+Uu],g],[/samsungbrowser\/([\w\.]+)/i],[g,[p,bn+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/metasr[\/ ]?([\d\.]+)/i],[g,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,xu],g],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,Ce+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Ce+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,"Android "+_e]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,gi,Rg]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],g],[/(wolvic)\/([\w\.]+)/i],[p,g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,tt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,[g,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,Mr]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,o,Mr]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,Mr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[v,bn],[h,_]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[v,bn],[h,S]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[v,x],[h,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[v,x],[h,_]],[/(macintosh);/i],[d,[v,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[v,Du],[h,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[v,gt],[h,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[v,gt],[h,S]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[v,Qo],[h,S]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[v,Qo],[h,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[v,"OPPO"],[h,S]],[/\b(opd2\d{3}a?) bui/i],[d,[v,"OPPO"],[h,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[v,"Vivo"],[h,S]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[v,"Realme"],[h,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[v,oe],[h,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[v,oe],[h,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[v,pe],[h,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[v,pe],[h,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[v,"Lenovo"],[h,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[v,"Nokia"],[h,S]],[/(pixel c)\b/i],[d,[v,zt],[h,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[v,zt],[h,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[v,hi],[h,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[v,hi],[h,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[v,"OnePlus"],[h,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[v,N],[h,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[v,N],[h,S]],[/(playbook);[-\w\),; ]+(rim)/i],[d,v,[h,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[v,ie],[h,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[v,J],[h,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[v,J],[h,S]],[/(nexus 9)/i],[d,[v,"HTC"],[h,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[d,/_/g," "],[h,S]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[v,"TCL"],[h,_]],[/(itel) ((\w+))/i],[[v,Mr],d,[h,gi,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[v,"Acer"],[h,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[v,"Meizu"],[h,S]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[v,"Ulefone"],[h,S]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[v,"Nothing"],[h,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,d,[h,S]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,d,[h,_]],[/(surface duo)/i],[d,[v,rt],[h,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[v,"Fairphone"],[h,S]],[/(u304aa)/i],[d,[v,"AT&T"],[h,S]],[/\bsie-(\w*)/i],[d,[v,"Siemens"],[h,S]],[/\b(rct\w+) b/i],[d,[v,"RCA"],[h,_]],[/\b(venue[\d ]{2,7}) b/i],[d,[v,"Dell"],[h,_]],[/\b(q(?:mv|ta)\w+) b/i],[d,[v,"Verizon"],[h,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[v,"Barnes & Noble"],[h,_]],[/\b(tm\d{3}\w+) b/i],[d,[v,"NuVision"],[h,_]],[/\b(k88) b/i],[d,[v,"ZTE"],[h,_]],[/\b(nx\d{3}j) b/i],[d,[v,"ZTE"],[h,S]],[/\b(gen\d{3}) b.+49h/i],[d,[v,"Swiss"],[h,S]],[/\b(zur\d{3}) b/i],[d,[v,"Swiss"],[h,_]],[/\b((zeki)?tb.*\b) b/i],[d,[v,"Zeki"],[h,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],d,[h,_]],[/\b(ns-?\w{0,9}) b/i],[d,[v,"Insignia"],[h,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[v,"NextBook"],[h,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],d,[h,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],d,[h,S]],[/\b(ph-1) /i],[d,[v,"Essential"],[h,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[v,"Envizen"],[h,_]],[/\b(trio[-\w\. ]+) b/i],[d,[v,"MachSpeed"],[h,_]],[/\btu_(1491) b/i],[d,[v,"Rotor"],[h,_]],[/(shield[\w ]+) b/i],[d,[v,"Nvidia"],[h,_]],[/(sprint) (\w+)/i],[v,d,[h,S]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[v,rt],[h,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[v,ea],[h,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[v,ea],[h,S]],[/smart-tv.+(samsung)/i],[v,[h,E]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[v,bn],[h,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,pe],[h,E]],[/(apple) ?tv/i],[v,[d,x+" TV"],[h,E]],[/crkey/i],[[d,Ce+"cast"],[v,zt],[h,E]],[/droid.+aft(\w+)( bui|\))/i],[d,[v,N],[h,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[v,Du],[h,E]],[/(bravia[\w ]+)( bui|\))/i],[d,[v,hi],[h,E]],[/(mitv-\w{5}) bui/i],[d,[v,Qo],[h,E]],[/Hbbtv.*(technisat) (.*);/i],[v,d,[h,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,ta],[d,ta],[h,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,d,[h,I]],[/droid.+; (shield) bui/i],[d,[v,"Nvidia"],[h,I]],[/(playstation [345portablevi]+)/i],[d,[v,hi],[h,I]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[v,rt],[h,I]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[v,bn],[h,y]],[/((pebble))app/i],[v,d,[h,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[v,x],[h,y]],[/droid.+; (glass) \d/i],[d,[v,zt],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[d,[v,ea],[h,y]],[/(quest( \d| pro)?)/i],[d,[v,xu],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[h,b]],[/(aeobc)\b/i],[d,[v,N],[h,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[h,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[h,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,S]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[p,Nt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[g,gi,Fu]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[g,gi,Fu],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,Pu],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,tt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[p,Ce+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,ku],g],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,g]]},nt=function(z,$){if(typeof z===u&&($=z,z=n),!(this instanceof nt))return new nt(z,$).getResult();var V=typeof r!==c&&r.navigator?r.navigator:n,Z=z||(V&&V.userAgent?V.userAgent:o),Ct=V&&V.userAgentData?V.userAgentData:n,mt=$?Ig(Vu,$):Vu,W=V&&V.userAgent==Z;return this.getBrowser=function(){var U={};return U[p]=n,U[g]=n,Sn.call(U,Z,mt.browser),U[f]=Ag(U[g]),W&&V&&V.brave&&typeof V.brave.isBrave==s&&(U[p]="Brave"),U},this.getCPU=function(){var U={};return U[m]=n,Sn.call(U,Z,mt.cpu),U},this.getDevice=function(){var U={};return U[v]=n,U[d]=n,U[h]=n,Sn.call(U,Z,mt.device),W&&!U[h]&&Ct&&Ct.mobile&&(U[h]=S),W&&U[d]=="Macintosh"&&V&&typeof V.standalone!==c&&V.maxTouchPoints&&V.maxTouchPoints>2&&(U[d]="iPad",U[h]=_),U},this.getEngine=function(){var U={};return U[p]=n,U[g]=n,Sn.call(U,Z,mt.engine),U},this.getOS=function(){var U={};return U[p]=n,U[g]=n,Sn.call(U,Z,mt.os),W&&!U[p]&&Ct&&Ct.platform&&Ct.platform!="Unknown"&&(U[p]=Ct.platform.replace(/chrome os/i,ku).replace(/macos/i,Pu)),U},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Z},this.setUA=function(U){return Z=typeof U===l&&U.length>R?ta(U,R):U,this},this.setUA(Z),this};nt.VERSION=i,nt.BROWSER=vi([p,g,f]),nt.CPU=vi([m]),nt.DEVICE=vi([d,v,h,I,S,E,_,y,b]),nt.ENGINE=nt.OS=vi([p,g]),e.exports&&(t=e.exports=nt),t.UAParser=nt;var Fr=typeof r!==c&&(r.jQuery||r.Zepto);if(Fr&&!Fr.ua){var mi=new nt;Fr.ua=mi.getResult(),Fr.ua.get=function(){return mi.getUA()},Fr.ua.set=function(z){mi.setUA(z);var $=mi.getResult();for(var V in $)Fr.ua[V]=$[V]}}})(typeof window=="object"?window:xp)})(rs,rs.exports);var zR=rs.exports,ns=function(e,t){return ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ns(e,t)};function Pr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ns(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ke=function(){return Ke=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Ke.apply(this,arguments)};function ce(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,[])).next())})}function le(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function rn(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var HR=function(){function e(){}return e.prototype.handleError=function(t){},e}(),mh=new HR;function jR(e){mh=e}function Eh(){return mh}var qR=Math.pow(2,53);function Ye(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)return{};if(typeof Object.assign=="function")return Object.assign.apply(Object,rn([e],t,!1));for(var n=Object(e),i=0;i<t.length;i++){var o=t[i];if(o!=null)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n}function KR(){return Math.round(new Date().getTime())}function $R(e){return typeof e=="number"&&Math.abs(e)<=qR}function ye(e,t){return e?bh(e,function(r){return r[t]}):{}}function WR(e){return typeof e=="number"}function jo(){return FR()}function _h(){return new Date().getTime()}function so(e,t){for(var r=!1,n=Object.keys(e),i=0;i<n.length;i++)if(t===e[n[i]]){r=!0;break}return r}function YR(e,t){var r={};return e.forEach(function(n){var i=t(n);r[i]=r[i]||[],r[i].push(n)}),It(r)}function It(e){return Object.keys(e).map(function(t){return e[t]})}function yh(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function hu(e,t){for(var r,n=0,i=e;n<i.length;n++){var o=i[n];if(t(o)){r=o;break}}return r}function bh(e,t){var r={};return e.forEach(function(n){var i=t(n);r[i]=n}),r}function j(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,function(){var i=t[n++],o=typeof i;return o==="function"?i():o==="string"?i:String(i)})}function Sh(e,t){return e.length===t.length&&e.every(function(r,n){return r===t[n]})}var re={assign:Ye,checkArrayEquality:Sh,currentTimestamp:KR,isSafeInteger:$R,keyBy:ye,uuid:jo,isNumber:WR,getTimestamp:_h,isValidEnum:so,groupBy:YR,objectValues:It,objectEntries:yh,find:hu,keyByUtil:bh,sprintf:j},L;(function(e){e[e.NOTSET=0]="NOTSET",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR"})(L||(L={}));var Yc={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function vu(e){return typeof e!="string"||(e=e.toUpperCase(),e==="WARN"&&(e="WARNING"),!Yc[e])?e:Yc[e]}var XR=function(){function e(){this.defaultLoggerFacade=new Xc,this.loggers={}}return e.prototype.getLogger=function(t){return t?(this.loggers[t]||(this.loggers[t]=new Xc({messagePrefix:t})),this.loggers[t]):this.defaultLoggerFacade},e}(),JR=function(){function e(t){t===void 0&&(t={}),this.logLevel=L.NOTSET,t.logLevel!==void 0&&so(L,t.logLevel)&&this.setLogLevel(t.logLevel),this.logToConsole=t.logToConsole!==void 0?!!t.logToConsole:!0,this.prefix=t.prefix!==void 0?t.prefix:"[OPTIMIZELY]"}return e.prototype.log=function(t,r){if(!(!this.shouldLog(t)||!this.logToConsole)){var n="".concat(this.prefix," - ").concat(this.getLogLevelName(t)," ").concat(this.getTime()," ").concat(r);this.consoleLog(t,[n])}},e.prototype.setLogLevel=function(t){t=vu(t),!so(L,t)||t===void 0?this.logLevel=L.ERROR:this.logLevel=t},e.prototype.getTime=function(){return new Date().toISOString()},e.prototype.shouldLog=function(t){return t>=this.logLevel},e.prototype.getLogLevelName=function(t){switch(t){case L.DEBUG:return"DEBUG";case L.INFO:return"INFO ";case L.WARNING:return"WARN ";case L.ERROR:return"ERROR";default:return"NOTSET"}},e.prototype.consoleLog=function(t,r){switch(t){case L.DEBUG:console.log.apply(console,r);break;case L.INFO:console.info.apply(console,r);break;case L.WARNING:console.warn.apply(console,r);break;case L.ERROR:console.error.apply(console,r);break;default:console.log.apply(console,r)}},e}(),is=L.NOTSET,os=null,Xc=function(){function e(t){t===void 0&&(t={}),this.messagePrefix="",t.messagePrefix&&(this.messagePrefix=t.messagePrefix)}return e.prototype.log=function(t,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.internalLog(vu(t),{message:r,splat:n})},e.prototype.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(L.INFO,t,r)},e.prototype.debug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(L.DEBUG,t,r)},e.prototype.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(L.WARNING,t,r)},e.prototype.error=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.namedLog(L.ERROR,t,r)},e.prototype.format=function(t){return"".concat(this.messagePrefix?this.messagePrefix+": ":"").concat(j.apply(void 0,rn([t.message],t.splat,!1)))},e.prototype.internalLog=function(t,r){os&&(t<is||(os.log(t,this.format(r)),r.error&&r.error instanceof Error&&Eh().handleError(r.error)))},e.prototype.namedLog=function(t,r,n){var i;if(r instanceof Error){i=r,r=i.message,this.internalLog(t,{error:i,message:r,splat:n});return}if(n.length===0){this.internalLog(t,{message:r,splat:n});return}var o=n[n.length-1];o instanceof Error&&(i=o,n.splice(-1)),this.internalLog(t,{message:r,error:i,splat:n})},e}(),ZR=new XR;function fe(e){return ZR.getLogger(e)}function wh(e){os=e}function QR(e){e=vu(e),!so(L,e)||e===void 0?is=L.ERROR:is=e}var Ar={setLogLevel:QR,setLogHandler:wh};function eO(e,t){var r=e.context,n=t.context;return r.accountId===n.accountId&&r.projectId===n.projectId&&r.clientName===n.clientName&&r.clientVersion===n.clientVersion&&r.revision===n.revision&&r.anonymizeIP===n.anonymizeIP&&r.botFiltering===n.botFiltering}var tO=fe("EventProcessor"),rO=function(){function e(t){var r=t.timeout,n=t.callback;this.timeout=Math.max(r,0),this.callback=n}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e}(),nO=function(){function e(t){var r=t.sink;this.sink=r}return e.prototype.start=function(){return Promise.resolve()},e.prototype.stop=function(){return Promise.resolve()},e.prototype.enqueue=function(t){this.sink([t])},e}(),iO=function(){function e(t){var r=t.flushInterval,n=t.maxQueueSize,i=t.sink,o=t.closingSink,a=t.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(n,1),this.sink=i,this.closingSink=o,this.batchComparator=a,this.timer=new rO({callback:this.flush.bind(this),timeout:r}),this.started=!1}return e.prototype.start=function(){return this.started=!0,Promise.resolve()},e.prototype.stop=function(){this.started=!1;var t=this.closingSink?this.closingSink(this.buffer):this.sink(this.buffer);return this.buffer=[],this.timer.stop(),t},e.prototype.enqueue=function(t){if(!this.started){tO.warn("Queue is stopped, not accepting event");return}var r=this.buffer[0];r&&!this.batchComparator(r,t)&&this.flush(),this.buffer.length===0&&this.timer.refresh(),this.buffer.push(t),this.buffer.length>=this.maxQueueSize&&this.flush()},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e}(),w={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},O={BROWSER_ODP_MANAGER_INITIALIZATION_FAILED:"%s: Error initializing Browser ODP Manager.",CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",FETCH_SEGMENTS_FAILED_NETWORK_ERROR:"%s: Audience segments fetch failed. (network error)",FETCH_SEGMENTS_FAILED_DECODE_ERROR:"%s: Audience segments fetch failed. (decode error)",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",LOCAL_STORAGE_DOES_NOT_EXIST:"Error accessing window localStorage.",MISSING_INTEGRATION_KEY:"%s: Integration key missing from datafile. All integrations should include a key.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",ODP_CONFIG_NOT_AVAILABLE:"%s: ODP is not integrated to the project.",ODP_EVENT_FAILED:"ODP event send failed.",ODP_FETCH_QUALIFIED_SEGMENTS_SEGMENTS_MANAGER_MISSING:"%s: ODP unable to fetch qualified segments (Segments Manager not initialized).",ODP_IDENTIFY_FAILED_EVENT_MANAGER_MISSING:"%s: ODP identify event %s is not dispatched (Event Manager not instantiated).",ODP_INITIALIZATION_FAILED:"%s: ODP failed to initialize.",ODP_INVALID_DATA:"%s: ODP data is not valid",ODP_EVENT_FAILED_ODP_MANAGER_MISSING:"%s: ODP Event failed to send. (ODP Manager not initialized).",ODP_FETCH_QUALIFIED_SEGMENTS_FAILED_ODP_MANAGER_MISSING:"%s: ODP failed to Fetch Qualified Segments. (ODP Manager not initialized).",ODP_IDENTIFY_USER_FAILED_ODP_MANAGER_MISSING:"%s: ODP failed to Identify User. (ODP Manager not initialized).",ODP_IDENTIFY_USER_FAILED_USER_CONTEXT_INITIALIZATION:"%s: ODP failed to Identify User. (Failed during User Context Initialization).",ODP_MANAGER_UPDATE_SETTINGS_FAILED_EVENT_MANAGER_MISSING:"%s: ODP Manager failed to update OdpConfig settings for internal event manager. (Event Manager not initialized).",ODP_MANAGER_UPDATE_SETTINGS_FAILED_SEGMENTS_MANAGER_MISSING:"%s: ODP Manager failed to update OdpConfig settings for internal segments manager. (Segments Manager not initialized).",ODP_NOT_ENABLED:"ODP is not enabled",ODP_NOT_INTEGRATED:"%s: ODP is not integrated",ODP_SEND_EVENT_FAILED_EVENT_MANAGER_MISSING:"%s: ODP send event %s was not dispatched (Event Manager not instantiated).",ODP_SEND_EVENT_FAILED_UID_MISSING:"%s: ODP send event %s was not dispatched (No valid user identifier provided).",ODP_SEND_EVENT_FAILED_VUID_MISSING:"%s: ODP send event %s was not dispatched (Unable to fetch VUID).",ODP_VUID_INITIALIZATION_FAILED:"%s: ODP VUID initialization failed.",ODP_VUID_REGISTRATION_FAILED:"%s: ODP VUID failed to be registered.",ODP_VUID_REGISTRATION_FAILED_EVENT_MANAGER_MISSING:"%s: ODP register vuid failed. (Event Manager not instantiated).",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},T={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",ODP_DISABLED:"ODP Disabled.",ODP_IDENTIFY_FAILED_ODP_DISABLED:"%s: ODP identify event for user %s is not dispatched (ODP disabled).",ODP_IDENTIFY_FAILED_ODP_NOT_INTEGRATED:"%s: ODP identify event %s is not dispatched (ODP not integrated).",ODP_SEND_EVENT_IDENTIFIER_CONVERSION_FAILED:"%s: sendOdpEvent failed to parse through and convert fs_user_id aliases",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},wt={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},gu="javascript-sdk",Th="node-sdk",oO="react-sdk",aO="react-native-sdk",sO="react-native-js-sdk",mu="5.3.4",pr={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},ge={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},as={RULE:"rule",EXPERIMENT:"experiment"},je={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},ji={V2:"2",V3:"3",V4:"4"},ss={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'},be;(function(e){e.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",e.DECISION="DECISION:type, userId, attributes, decisionInfo",e.LOG_EVENT="LOG_EVENT:logEvent",e.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",e.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(be||(be={}));var Ih=60*1e3,Ah=10*1e3,Rh=10*1e3,Ze;(function(e){e.VUID="vuid",e.FS_USER_ID="fs_user_id"})(Ze||(Ze={}));var Oh="fs-user-id",uo="fullstack",Wn;(function(e){e.IDENTIFIED="identified",e.INITIALIZED="client_initialized"})(Wn||(Wn={}));var uO=Object.freeze({__proto__:null,LOG_LEVEL:w,ERROR_MESSAGES:O,LOG_MESSAGES:T,CONTROL_ATTRIBUTES:wt,JAVASCRIPT_CLIENT_ENGINE:gu,NODE_CLIENT_ENGINE:Th,REACT_CLIENT_ENGINE:oO,REACT_NATIVE_CLIENT_ENGINE:aO,REACT_NATIVE_JS_CLIENT_ENGINE:sO,CLIENT_VERSION:mu,DECISION_NOTIFICATION_TYPES:pr,DECISION_SOURCES:ge,AUDIENCE_EVALUATION_TYPES:as,FEATURE_VARIABLE_TYPES:je,DATAFILE_VERSIONS:ji,DECISION_MESSAGES:ss,get NOTIFICATION_TYPES(){return be},REQUEST_TIMEOUT_MS:Ih,REQUEST_TIMEOUT_ODP_SEGMENTS_MS:Ah,REQUEST_TIMEOUT_ODP_EVENTS_MS:Rh,get ODP_USER_KEY(){return Ze},FS_USER_ID_ALIAS:Oh,ODP_DEFAULT_EVENT_TYPE:uo,get ODP_EVENT_ACTION(){return Wn}}),us=3e4,cs=10,Nh=fe("EventProcessor");function cO(e){return e<=0&&(Nh.warn("Invalid flushInterval ".concat(e,", defaulting to ").concat(us)),e=us),e}function lO(e){return e=Math.floor(e),e<1&&(Nh.warn("Invalid batchSize ".concat(e,", defaulting to ").concat(cs)),e=cs),e=Math.max(1,e),e}function dO(e,t,r,n,i){var o;return e>1?o=new iO({flushInterval:t,maxQueueSize:e,sink:n,closingSink:i,batchComparator:r}):o=new nO({sink:n}),o}function fO(e,t){e&&e.sendNotifications(be.LOG_EVENT,t)}var Jc=fe("EventProcessor"),pO=function(){function e(t){var r=t.key,n=t.maxValues,i=n===void 0?1e3:n;this.LS_KEY=r,this.maxValues=i}return e.prototype.get=function(t){return this.getMap()[t]||null},e.prototype.set=function(t,r){var n=this.getMap();n[t]=r,this.replace(n)},e.prototype.remove=function(t){var r=this.getMap();delete r[t],this.replace(r)},e.prototype.values=function(){return It(this.getMap())},e.prototype.clear=function(){this.replace({})},e.prototype.replace=function(t){try{typeof window<"u"?window&&window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(t)):localStorage.setItem(this.LS_KEY,JSON.stringify(t)),this.clean()}catch(r){Jc.error(String(r))}},e.prototype.clean=function(){var t=this.getMap(),r=Object.keys(t),n=r.length-this.maxValues;if(!(n<1)){var i=r.map(function(a){return{key:a,value:t[a]}});i.sort(function(a,s){return a.value.timestamp-s.value.timestamp});for(var o=0;o<n;o++)delete t[i[o].key];this.replace(t)}},e.prototype.getMap=function(){try{var t=typeof window<"u"?window&&window.localStorage&&localStorage.getItem(this.LS_KEY):localStorage.getItem(this.LS_KEY);if(t)return JSON.parse(t)||{}}catch(r){Jc.error(r)}return{}},e}(),Zc=fe("EventProcessor"),hO=function(){function e(t){var r=t.eventDispatcher,n=t.store;this.dispatcher=r,this.store=n}return e.prototype.dispatchEvent=function(t,r){this.send({uuid:jo(),timestamp:_h(),request:t},r)},e.prototype.sendPendingEvents=function(){var t=this,r=this.store.values();Zc.debug("Sending %s pending events from previous page",r.length),r.forEach(function(n){try{t.send(n,function(){})}catch(i){Zc.debug(String(i))}})},e.prototype.send=function(t,r){var n=this;this.store.set(t.uuid,t),this.dispatcher.dispatchEvent(t.request,function(i){n.store.remove(t.uuid),r(i)})},e}(),Ch=function(e){Pr(t,e);function t(r){var n=r.eventDispatcher;return e.call(this,{eventDispatcher:n,store:new pO({maxValues:100,key:"fs_optly_pending_events"})})||this}return t}(hO),vO="campaign_activated",gO="custom",Qc="$opt_bot_filtering";function mO(e){var t=[],r=e[0];return e.forEach(function(n){if(n.type==="conversion"||n.type==="impression"){var i=yO(n);n.type==="impression"?i.snapshots.push(_O(n)):n.type==="conversion"&&i.snapshots.push(EO(n)),t.push(i)}}),{client_name:r.context.clientName,client_version:r.context.clientVersion,account_id:r.context.accountId,project_id:r.context.projectId,revision:r.context.revision,anonymize_ip:r.context.anonymizeIP,enrich_decisions:!0,visitors:t}}function EO(e){var t=Ke({},e.tags);delete t.revenue,delete t.value;var r={entity_id:e.event.id,key:e.event.key,timestamp:e.timestamp,uuid:e.uuid};return e.tags&&(r.tags=e.tags),e.value!=null&&(r.value=e.value),e.revenue!=null&&(r.revenue=e.revenue),{events:[r]}}function _O(e){var t,r,n=e.layer,i=e.experiment,o=e.variation,a=e.ruleKey,s=e.flagKey,c=e.ruleType,u=e.enabled,l=n?n.id:null,f=(t=i==null?void 0:i.id)!==null&&t!==void 0?t:"",d=(r=o==null?void 0:o.id)!==null&&r!==void 0?r:"",p=o?o.key:"";return{decisions:[{campaign_id:l,experiment_id:f,variation_id:d,metadata:{flag_key:s,rule_key:a,rule_type:c,variation_key:p,enabled:u}}],events:[{entity_id:l,timestamp:e.timestamp,key:vO,uuid:e.uuid}]}}function yO(e){var t={snapshots:[],visitor_id:e.user.id,attributes:[]},r="custom";return e.user.attributes.forEach(function(n){t.attributes.push({entity_id:n.entityId,key:n.key,type:r,value:n.value})}),typeof e.context.botFiltering=="boolean"&&t.attributes.push({entity_id:Qc,key:Qc,type:gO,value:e.context.botFiltering}),t}function bO(e){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:mO(e)}}var SO=function(){function e(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return e.prototype.trackRequest=function(t){var r=this;this.reqsInFlightCount++;var n=function(){r.reqsInFlightCount--,r.reqsInFlightCount===0&&(r.reqsCompleteResolvers.forEach(function(i){return i()}),r.reqsCompleteResolvers=[])};t.then(n,n)},e.prototype.onRequestsComplete=function(){var t=this;return new Promise(function(r){t.reqsInFlightCount===0?r():t.reqsCompleteResolvers.push(r)})},e}(),el=fe("LogTierV1EventProcessor"),tl=function(){function e(t){var r=t.dispatcher,n=t.closingDispatcher,i=t.flushInterval,o=i===void 0?us:i,a=t.batchSize,s=a===void 0?cs:a,c=t.notificationCenter;this.dispatcher=r,this.closingDispatcher=n,this.notificationCenter=c,this.requestTracker=new SO,o=cO(o),s=lO(s),this.queue=dO(s,o,eO,this.drainQueue.bind(this,!1),this.drainQueue.bind(this,!0))}return e.prototype.drainQueue=function(t,r){var n=this,i=new Promise(function(o){if(el.debug("draining queue with %s events",r.length),r.length===0){o();return}var a=bO(r),s=t&&n.closingDispatcher?n.closingDispatcher:n.dispatcher;s.dispatchEvent(a,function(){o()}),fO(n.notificationCenter,a)});return this.requestTracker.trackRequest(i),i},e.prototype.process=function(t){this.queue.enqueue(t)},e.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(t){el.error('Error stopping EventProcessor: "%s"',Object(t).message,String(t))}return Promise.resolve()},e.prototype.start=function(){return ce(this,void 0,void 0,function(){return le(this,function(t){switch(t.label){case 0:return[4,this.queue.start()];case 1:return t.sent(),[2]}})})},e}(),yr="CONFIG_VALIDATOR",wO=[ji.V2,ji.V3,ji.V4],TO=function(e){if(typeof e=="object"&&e!==null){var t=e,r=t.errorHandler,n=t.eventDispatcher,i=t.logger;if(r&&typeof r.handleError!="function")throw new Error(j(O.INVALID_ERROR_HANDLER,yr));if(n&&typeof n.dispatchEvent!="function")throw new Error(j(O.INVALID_EVENT_DISPATCHER,yr));if(i&&typeof i.log!="function")throw new Error(j(O.INVALID_LOGGER,yr));return!0}throw new Error(j(O.INVALID_CONFIG,yr))},IO=function(e){if(!e)throw new Error(j(O.NO_DATAFILE_SPECIFIED,yr));if(typeof e=="string")try{e=JSON.parse(e)}catch{throw new Error(j(O.INVALID_DATAFILE_MALFORMED,yr))}if(typeof e=="object"&&!Array.isArray(e)&&e!==null&&wO.indexOf(e.version)===-1)throw new Error(j(O.INVALID_DATAFILE_VERSION,yr,e.version));return e},Lh={validate:TO,validateDatafile:IO};function AO(){}var RO={handleError:AO},rl="POST",OO="GET",nl=4,NO=function(e,t){var r=e.params,n=e.url,i;e.httpVerb===rl?(i=new XMLHttpRequest,i.open(rl,n,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(i.readyState===nl&&t&&typeof t=="function")try{t({statusCode:i.status})}catch{}},i.send(JSON.stringify(r))):(n+="?wxhr=true",r&&(n+="&"+CO(r)),i=new XMLHttpRequest,i.open(OO,n,!0),i.onreadystatechange=function(){if(i.readyState===nl&&t&&typeof t=="function")try{t({statusCode:i.status})}catch{}},i.send())},CO=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},qo={dispatchEvent:NO},LO=function(e,t){var r=e.params,n=e.url,i=new Blob([JSON.stringify(r)],{type:"application/json"}),o=navigator.sendBeacon(n,i);t({statusCode:o?200:500})},Dh={dispatchEvent:LO},xh=function(){function e(){}return e.prototype.log=function(){},e}();function Eu(e){return new JR(e)}function DO(){return new xh}var xO=Object.freeze({__proto__:null,NoOpLogger:xh,createLogger:Eu,createNoOpLogger:DO}),kO=function(e){return typeof e=="number"&&re.isSafeInteger(e)?e>=1:!1},PO=function(e){return typeof e=="number"&&re.isSafeInteger(e)?e>0:!1},il={validateEventBatchSize:kO,validateEventFlushInterval:PO},UO="NOTIFICATION_CENTER",MO=function(){function e(t){var r=this;this.logger=t.logger,this.errorHandler=t.errorHandler,this.notificationListeners={},It(be).forEach(function(n){r.notificationListeners[n]=[]}),this.listenerId=1}return e.prototype.addNotificationListener=function(t,r){try{var n=It(be),i=n.indexOf(t)>-1;if(!i)return-1;this.notificationListeners[t]||(this.notificationListeners[t]=[]);var o=!1;if((this.notificationListeners[t]||[]).forEach(function(s){if(s.callback===r){o=!0;return}}),o)return-1;this.notificationListeners[t].push({id:this.listenerId,callback:r});var a=this.listenerId;return this.listenerId+=1,a}catch(s){return this.logger.log(w.ERROR,s.message),this.errorHandler.handleError(s),-1}},e.prototype.removeNotificationListener=function(t){var r=this;try{var n,i;if(Object.keys(this.notificationListeners).some(function(o){var a=r.notificationListeners[o];return(a||[]).every(function(s,c){return s.id===t?(n=c,i=o,!1):!0}),n!==void 0&&i!==void 0}),n!==void 0&&i!==void 0)return this.notificationListeners[i].splice(n,1),!0}catch(o){this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o)}return!1},e.prototype.clearAllNotificationListeners=function(){var t=this;try{It(be).forEach(function(r){t.notificationListeners[r]=[]})}catch(r){this.logger.log(w.ERROR,r.message),this.errorHandler.handleError(r)}},e.prototype.clearNotificationListeners=function(t){try{this.notificationListeners[t]=[]}catch(r){this.logger.log(w.ERROR,r.message),this.errorHandler.handleError(r)}},e.prototype.sendNotifications=function(t,r){var n=this;try{(this.notificationListeners[t]||[]).forEach(function(i){var o=i.callback;try{o(r)}catch(a){n.logger.log(w.ERROR,T.NOTIFICATION_LISTENER_EXCEPTION,UO,t,a.message)}})}catch(i){this.logger.log(w.ERROR,i.message),this.errorHandler.handleError(i)}},e}();function kh(e){return new MO(e)}function FO(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(tl.bind.apply(tl,rn([void 0],e,!1)))}var VO={createEventProcessor:FO,LocalStoragePendingEventsDispatcher:Ch},co;(function(e){e.IGNORE_CACHE="IGNORE_CACHE",e.RESET_CACHE="RESET_CACHE"})(co||(co={}));var ol;(function(e){e.BOOLEAN="boolean",e.DOUBLE="double",e.INTEGER="integer",e.STRING="string",e.JSON="json"})(ol||(ol={}));var Xe;(function(e){e.DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",e.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",e.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",e.INCLUDE_REASONS="INCLUDE_REASONS",e.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES"})(Xe||(Xe={}));var BO=5,GO=BO*60*1e3,Ph=30,zO=Ph*1e3,HO="Polling intervals below ".concat(Ph," seconds are not recommended."),jO="https://cdn.optimizely.com/datafiles/%s.json",Oa=[0,8,16,32,64,128,256,512],qO=60*1e3,KO=fe("DatafileManager"),$O="GET",WO=4;function YO(e){var t=e.getAllResponseHeaders();if(t===null)return{};var r=t.split(`\r
`),n={};return r.forEach(function(i){var o=i.indexOf(": ");if(o>-1){var a=i.slice(0,o),s=i.slice(o+2);s.length>0&&(n[a]=s)}}),n}function XO(e,t){Object.keys(e).forEach(function(r){var n=e[r];t.setRequestHeader(r,n)})}function JO(e,t){var r=new XMLHttpRequest,n=new Promise(function(i,o){r.open($O,e,!0),XO(t,r),r.onreadystatechange=function(){if(r.readyState===WO){var a=r.status;if(a===0){o(new Error("Request error"));return}var s=YO(r),c={statusCode:r.status,body:r.responseText,headers:s};i(c)}},r.timeout=qO,r.ontimeout=function(){KO.error("Request timed out")},r.send()});return{responsePromise:n,abort:function(){r.abort()}}}var ZO=function(){function e(){this.listeners={},this.listenerId=1}return e.prototype.on=function(t,r){var n=this;this.listeners[t]||(this.listeners[t]={});var i=String(this.listenerId);return this.listenerId++,this.listeners[t][i]=r,function(){n.listeners[t]&&delete n.listeners[t][i]}},e.prototype.emit=function(t,r){var n=this.listeners[t];n&&Object.keys(n).forEach(function(i){var o=n[i];o(r)})},e.prototype.removeAllListeners=function(){this.listeners={}},e}();function QO(){return Math.round(Math.random()*1e3)}var e0=function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){if(this.errorCount===0)return 0;var t=Oa[Math.min(Oa.length-1,this.errorCount)];return t*1e3+QO()},e.prototype.countError=function(){this.errorCount<Oa.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e}(),Uh=function(){function e(){}return e.getNotificationCenter=function(t,r){if(r===void 0&&(r=fe()),!t){r.log(L.ERROR,"No SDK key provided to getNotificationCenter.");return}var n;return this._notificationCenters.has(t)?n=this._notificationCenters.get(t):(n=kh({logger:r,errorHandler:{handleError:function(){}}}),this._notificationCenters.set(t,n)),n},e.removeNotificationCenter=function(t){if(t){var r=this._notificationCenters.get(t);r&&(r.clearAllNotificationListeners(),this._notificationCenters.delete(t))}},e._notificationCenters=new Map,e}(),Le=fe("DatafileManager"),t0="update";function al(e){return e>=200&&e<400}var r0={get:function(){return Promise.resolve(void 0)},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve(!1)}},n0=function(){function e(t){var r=this,n=Ke(Ke({},this.getConfigDefaults()),t),i=n.datafile,o=n.autoUpdate,a=o===void 0?!1:o,s=n.sdkKey,c=n.updateInterval,u=c===void 0?GO:c,l=n.urlTemplate,f=l===void 0?jO:l,d=n.cache,p=d===void 0?r0:d;this.cache=p,this.cacheKey="opt-datafile-"+s,this.sdkKey=s,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise(function(h,v){r.readyPromiseResolver=h,r.readyPromiseRejecter=v}),i?(this.currentDatafile=i,s||this.resolveReadyPromise()):this.currentDatafile="",this.isStarted=!1,this.datafileUrl=j(f,s),this.emitter=new ZO,this.autoUpdate=a,this.updateInterval=u,this.updateInterval<zO&&Le.warn(HO),this.currentTimeout=null,this.currentRequest=null,this.backoffController=new e0,this.syncOnCurrentRequestComplete=!1}return e.prototype.get=function(){return this.currentDatafile},e.prototype.start=function(){this.isStarted||(Le.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},e.prototype.stop=function(){return Le.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.onReady=function(){return this.readyPromise},e.prototype.on=function(t,r){return this.emitter.on(t,r)},e.prototype.onRequestRejected=function(t){this.isStarted&&(this.backoffController.countError(),t instanceof Error?Le.error("Error fetching datafile: %s",t.message,t):typeof t=="string"?Le.error("Error fetching datafile: %s",t):Le.error("Error fetching datafile"))},e.prototype.onRequestResolved=function(t){var r;if(this.isStarted){typeof t.statusCode<"u"&&al(t.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(t.headers);var n=this.getNextDatafileFromResponse(t);if(n!=="")if(Le.info("Updating datafile from response"),this.currentDatafile=n,this.cache.set(this.cacheKey,n),!this.isReadyPromiseSettled)this.resolveReadyPromise();else{var i={datafile:n};(r=Uh.getNotificationCenter(this.sdkKey,Le))===null||r===void 0||r.sendNotifications(be.OPTIMIZELY_CONFIG_UPDATE),this.emitter.emit(t0,i)}}},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,!this.isReadyPromiseSettled&&!this.autoUpdate&&this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},e.prototype.syncDatafile=function(){var t=this,r={};this.lastResponseLastModified&&(r["if-modified-since"]=this.lastResponseLastModified),Le.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,function(){return JSON.stringify(r)}),this.currentRequest=this.makeGetRequest(this.datafileUrl,r);var n=function(){t.onRequestComplete()},i=function(a){t.onRequestResolved(a)},o=function(a){t.onRequestRejected(a)};this.currentRequest.responsePromise.then(i,o).then(n,n),this.autoUpdate&&this.scheduleNextUpdate()},e.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},e.prototype.rejectReadyPromise=function(t){this.readyPromiseRejecter(t),this.isReadyPromiseSettled=!0},e.prototype.scheduleNextUpdate=function(){var t=this,r=this.backoffController.getDelay(),n=Math.max(r,this.updateInterval);Le.debug("Scheduling sync in %s ms",n),this.currentTimeout=setTimeout(function(){t.currentRequest?t.syncOnCurrentRequestComplete=!0:t.syncDatafile()},n)},e.prototype.getNextDatafileFromResponse=function(t){return Le.debug("Response status code: %s",t.statusCode),typeof t.statusCode>"u"||t.statusCode===304?"":al(t.statusCode)?t.body:(Le.error("Datafile fetch request failed with status: ".concat(t.statusCode)),"")},e.prototype.trySavingLastModified=function(t){var r=t["last-modified"]||t["Last-Modified"];typeof r<"u"&&(this.lastResponseLastModified=r,Le.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},e.prototype.setDatafileFromCacheIfAvailable=function(){var t=this;this.cache.get(this.cacheKey).then(function(r){t.isStarted&&!t.isReadyPromiseSettled&&r&&(Le.debug("Using datafile from cache"),t.currentDatafile=r,t.resolveReadyPromise())})},e}(),i0=function(e){Pr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeGetRequest=function(r,n){return JO(r,n)},t.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},t}(n0),o0=function(){function e(t,r,n,i){this.apiKey=t,this.apiHost=r,this.pixelUrl=n,this.segmentsToCheck=i}return e.prototype.equals=function(t){return this.apiHost===t.apiHost&&this.apiKey===t.apiKey&&this.pixelUrl===t.pixelUrl&&Sh(this.segmentsToCheck,t.segmentsToCheck)},e}(),a0=function(e,t){return e.integrated!==t.integrated?!1:e.integrated&&t.integrated?e.odpConfig.equals(t.odpConfig):!0},Mh="Running",sl="$opt_",he="PROJECT_CONFIG";function s0(e){var t,r,n=Ye({},e);return n.audiences=(e.audiences||[]).map(function(i){return Ye({},i)}),n.experiments=(e.experiments||[]).map(function(i){return Ye({},i)}),n.featureFlags=(e.featureFlags||[]).map(function(i){return Ye({},i)}),n.groups=(e.groups||[]).map(function(i){var o=Ye({},i);return o.experiments=(i.experiments||[]).map(function(a){return Ye({},a)}),o}),n.rollouts=(e.rollouts||[]).map(function(i){var o=Ye({},i);return o.experiments=(i.experiments||[]).map(function(a){return Ye({},a)}),o}),n.environmentKey=(t=e.environmentKey)!==null&&t!==void 0?t:"",n.sdkKey=(r=e.sdkKey)!==null&&r!==void 0?r:"",n}var u0=function(e,t){t===void 0&&(t=null);var r=s0(e);r.__datafileStr=t===null?JSON.stringify(e):t,(r.audiences||[]).forEach(function(l){l.conditions=JSON.parse(l.conditions)}),r.audiencesById=ye(r.audiences,"id"),Ye(r.audiencesById,ye(r.typedAudiences,"id")),r.attributeKeyMap=ye(r.attributes,"key"),r.eventKeyMap=ye(r.events,"key"),r.groupIdMap=ye(r.groups,"id");var n;Object.keys(r.groupIdMap||{}).forEach(function(l){n=r.groupIdMap[l].experiments,(n||[]).forEach(function(f){r.experiments.push(Ye(f,{groupId:l}))})}),r.rolloutIdMap=ye(r.rollouts||[],"id"),It(r.rolloutIdMap||{}).forEach(function(l){(l.experiments||[]).forEach(function(f){r.experiments.push(f),f.variationKeyMap=ye(f.variations,"key")})});var i=new Set;Object.keys(r.audiencesById).map(function(l){return c0(r.audiencesById[l])}).forEach(function(l){l.forEach(function(f){i.add(f)})});var o=Array.from(i),a=!1,s="",c="",u="";return r.integrations&&(r.integrationKeyMap=ye(r.integrations,"key"),r.integrations.forEach(function(l){if(!("key"in l))throw new Error(j(O.MISSING_INTEGRATION_KEY,he));l.key==="odp"&&(a=!0,c=c||l.publicKey||"",s=s||l.host||"",u=u||l.pixelUrl||"")})),a?r.odpIntegrationConfig={integrated:!0,odpConfig:new o0(c,s,u,o)}:r.odpIntegrationConfig={integrated:!1},r.experimentKeyMap=ye(r.experiments,"key"),r.experimentIdMap=ye(r.experiments,"id"),r.variationIdMap={},r.variationVariableUsageMap={},(r.experiments||[]).forEach(function(l){l.variationKeyMap=ye(l.variations,"key"),Ye(r.variationIdMap,ye(l.variations,"id")),It(l.variationKeyMap||{}).forEach(function(f){f.variables&&(r.variationVariableUsageMap[f.id]=ye(f.variables,"id"))})}),r.experimentFeatureMap={},r.featureKeyMap=ye(r.featureFlags||[],"key"),It(r.featureKeyMap||{}).forEach(function(l){l.variables.forEach(function(f){f.type===je.STRING&&f.subType===je.JSON&&(f.type=je.JSON,delete f.subType)}),l.variableKeyMap=ye(l.variables,"key"),(l.experimentIds||[]).forEach(function(f){r.experimentFeatureMap[f]?r.experimentFeatureMap[f].push(l.id):r.experimentFeatureMap[f]=[l.id]})}),r.flagRulesMap={},(r.featureFlags||[]).forEach(function(l){var f=[];l.experimentIds.forEach(function(p){var h=r.experimentIdMap[p];h&&f.push(h)});var d=r.rolloutIdMap[l.rolloutId];d&&f.push.apply(f,d.experiments),r.flagRulesMap[l.key]=f}),r.flagVariationsMap={},yh(r.flagRulesMap||{}).forEach(function(l){var f=l[0],d=l[1],p=[];d.forEach(function(h){h.variations.forEach(function(v){hu(p,function(g){return g.id===v.id})||p.push(v)})}),r.flagVariationsMap[f]=p}),r},c0=function(e){return e.conditions?Fh(e.conditions):[]},Fh=function(e){var t=[];return l0(e)?[]:(Array.isArray(e)?e.forEach(function(r){return t.push.apply(t,Fh(r))}):e.match==="qualified"&&t.push(e.value),t)};function l0(e){return["and","or","not"].includes(e)}var Vh=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(j(O.INVALID_EXPERIMENT_ID,he,t));return r.layerId},Bh=function(e,t,r){var n=e.attributeKeyMap[t],i=t.indexOf(sl)===0;return n?(i&&r.log(w.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",t,sl),n.id):i?t:(r.log(w.DEBUG,O.UNRECOGNIZED_ATTRIBUTE,he,t),null)},Gh=function(e,t){var r=e.eventKeyMap[t];return r?r.id:null},zh=function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(j(O.INVALID_EXPERIMENT_KEY,he,t));return r.status},d0=function(e,t){return zh(e,t)===Mh},f0=function(e,t){return zh(e,t)===Mh},p0=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(j(O.INVALID_EXPERIMENT_ID,he,t));return r.audienceConditions||r.audienceIds},Hh=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t].key:null},h0=function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t]:null},v0=function(e,t,r){var n=e.experimentKeyMap[t];return n.variationKeyMap.hasOwnProperty(r)?n.variationKeyMap[r].id:null},ls=function(e,t){if(e.experimentKeyMap.hasOwnProperty(t)){var r=e.experimentKeyMap[t];if(r)return r}throw new Error(j(O.EXPERIMENT_KEY_NOT_IN_DATAFILE,he,t))},g0=function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(j(O.INVALID_EXPERIMENT_ID,he,t));return r.trafficAllocation},m0=function(e,t,r){if(e.experimentIdMap.hasOwnProperty(t)){var n=e.experimentIdMap[t];if(n)return n}return r.log(w.ERROR,O.INVALID_EXPERIMENT_ID,he,t),null},ul=function(e,t,r){if(!e)return null;var n=e.flagVariationsMap[t],i=hu(n,function(o){return o.key===r});return i||null},Na=function(e,t,r){if(e.featureKeyMap.hasOwnProperty(t)){var n=e.featureKeyMap[t];if(n)return n}return r.log(w.ERROR,O.FEATURE_NOT_IN_DATAFILE,he,t),null},E0=function(e,t,r,n){var i=e.featureKeyMap[t];if(!i)return n.log(w.ERROR,O.FEATURE_NOT_IN_DATAFILE,he,t),null;var o=i.variableKeyMap[r];return o||(n.log(w.ERROR,O.VARIABLE_KEY_NOT_IN_DATAFILE,he,r,t),null)},_0=function(e,t,r,n){if(!t||!r)return null;if(!e.variationVariableUsageMap.hasOwnProperty(r.id))return n.log(w.ERROR,O.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,he,r.id),null;var i=e.variationVariableUsageMap[r.id],o=i[t.id];return o?o.value:null},y0=function(e,t,r){var n;switch(t){case je.BOOLEAN:e!=="true"&&e!=="false"?(r.log(w.ERROR,O.UNABLE_TO_CAST_VALUE,he,e,t),n=null):n=e==="true";break;case je.INTEGER:n=parseInt(e,10),isNaN(n)&&(r.log(w.ERROR,O.UNABLE_TO_CAST_VALUE,he,e,t),n=null);break;case je.DOUBLE:n=parseFloat(e),isNaN(n)&&(r.log(w.ERROR,O.UNABLE_TO_CAST_VALUE,he,e,t),n=null);break;case je.JSON:try{n=JSON.parse(e)}catch{r.log(w.ERROR,O.UNABLE_TO_CAST_VALUE,he,e,t),n=null}break;default:n=e;break}return n},b0=function(e){return e.audiencesById},S0=function(e,t){return e.eventKeyMap.hasOwnProperty(t)},w0=function(e,t){return e.experimentFeatureMap.hasOwnProperty(t)},jh=function(e){return e.__datafileStr},qh=function(e){var t;try{t=Lh.validateDatafile(e.datafile)}catch(i){return{configObj:null,error:i}}if(e.jsonSchemaValidator)try{e.jsonSchemaValidator.validate(t),e.logger.log(w.INFO,T.VALID_DATAFILE,he)}catch(i){return{configObj:null,error:i}}else e.logger.log(w.INFO,T.SKIPPING_JSON_VALIDATION,he);var r=[t];typeof e.datafile=="string"&&r.push(e.datafile);var n=u0.apply(void 0,r);return{configObj:n,error:null}},cl=function(e){return!!e.sendFlagDecisions};function T0(e,t,r,n){var i={sdkKey:e};if((n===void 0||typeof n=="object"&&n!==null)&&re.assign(i,n),r){var o=qh({datafile:r,jsonSchemaValidator:void 0,logger:t}),a=o.configObj,s=o.error;s&&t.error(s),a&&(i.datafile=jh(a))}return new i0(i)}var ll=function(){function e(t,r){r===void 0&&(r=Ih),this.logger=t,this.timeout=r}return e.prototype.makeRequest=function(t,r,n,i){var o=this,a=new XMLHttpRequest,s=new Promise(function(c,u){a.open(n,t,!0),o.setHeadersInXhr(r,a),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var l=a.status;if(l===0){u(new Error("Request error"));return}var f=o.parseHeadersFromXhr(a),d={statusCode:a.status,body:a.responseText,headers:f};c(d)}},a.timeout=o.timeout,a.ontimeout=function(){o.logger.log(L.WARNING,"Request timed out")},a.send(i)});return{responsePromise:s,abort:function(){a.abort()}}},e.prototype.setHeadersInXhr=function(t,r){Object.keys(t).forEach(function(n){var i=t[n];typeof i=="string"&&r.setRequestHeader(n,i)})},e.prototype.parseHeadersFromXhr=function(t){var r=this,n=t.getAllResponseHeaders();if(n===null)return{};var i=n.split(`\r
`),o={};return i.forEach(function(a){try{var s=a.indexOf(": ");if(s>-1){var c=a.slice(0,s),u=a.slice(s+2);c&&u&&(o[c]=u)}}catch{r.logger.log(L.WARNING,"Unable to parse & skipped header item '".concat(a,"'"))}}),o},e}(),Ai=function(e){var t=e.browserCallback,r=e.nonBrowserCallback;return typeof window<"u"?t(window==null?void 0:window.localStorage):r()},I0=function(){function e(){this.logger=fe()}return e.prototype.contains=function(t){return ce(this,void 0,void 0,function(){var r=this;return le(this,function(n){return[2,Ai({browserCallback:function(i){return(i==null?void 0:i.getItem(t))!==null},nonBrowserCallback:function(){return r.logger.error(O.LOCAL_STORAGE_DOES_NOT_EXIST),!1}})]})})},e.prototype.get=function(t){return ce(this,void 0,void 0,function(){var r=this;return le(this,function(n){return[2,Ai({browserCallback:function(i){return(i==null?void 0:i.getItem(t))||void 0},nonBrowserCallback:function(){r.logger.error(O.LOCAL_STORAGE_DOES_NOT_EXIST)}})]})})},e.prototype.remove=function(t){return ce(this,void 0,void 0,function(){var r=this;return le(this,function(n){switch(n.label){case 0:return[4,this.contains(t)];case 1:return n.sent()?(Ai({browserCallback:function(i){i==null||i.removeItem(t)},nonBrowserCallback:function(){r.logger.error(O.LOCAL_STORAGE_DOES_NOT_EXIST)}}),[2,!0]):[2,!1]}})})},e.prototype.set=function(t,r){return ce(this,void 0,void 0,function(){var n=this;return le(this,function(i){return[2,Ai({browserCallback:function(o){o==null||o.setItem(t,r)},nonBrowserCallback:function(){n.logger.error(O.LOCAL_STORAGE_DOES_NOT_EXIST)}})]})})},e}(),A0=function(){function e(t){t===void 0&&(t=null),this._value=t,this._time=Date.now()}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},enumerable:!1,configurable:!0}),e.prototype.is_stale=function(t){return t<=0?!1:Date.now()-this._time>=t},e}(),Kh=function(){function e(t){var r=t.maxSize,n=t.timeout;this._map=new Map;var i=fe();i.debug("Provisioning cache with maxSize of ".concat(r)),i.debug("Provisioning cache with timeout of ".concat(n)),this._maxSize=r,this._timeout=n}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._timeout},enumerable:!1,configurable:!0}),e.prototype.lookup=function(t){if(this._maxSize<=0)return null;var r=this._map.get(t);return r?r.is_stale(this._timeout)?(this._map.delete(t),null):(this._map.delete(t),this._map.set(t,r),r.value):null},e.prototype.save=function(t){var r=t.key,n=t.value;if(!(this._maxSize<=0)){var i=this._map.get(r);if(i&&this._map.delete(r),this._map.set(r,new A0(n)),this._map.size>this._maxSize){var o=this._map.keys().next().value;this._map.delete(o)}}},e.prototype.reset=function(){this._maxSize<=0||this._map.clear()},e.prototype.peek=function(t){var r;if(this._maxSize<=0)return null;var n=this._map.get(t);return(r=n==null?void 0:n.value)!==null&&r!==void 0?r:null},e}(),dl={DEFAULT_CAPACITY:100,DEFAULT_TIMEOUT_SECS:600},R0=function(e){Pr(t,e);function t(r){var n,i;return e.call(this,{maxSize:(n=r==null?void 0:r.maxSize)!==null&&n!==void 0?n:dl.DEFAULT_CAPACITY,timeout:(i=r==null?void 0:r.timeout)!==null&&i!==void 0?i:dl.DEFAULT_TIMEOUT_SECS*1e3})||this}return t}(Kh),fl={DEFAULT_CAPACITY:1e4,DEFAULT_TIMEOUT_SECS:600};(function(e){Pr(t,e);function t(r){var n,i;return e.call(this,{maxSize:(n=r==null?void 0:r.maxSize)!==null&&n!==void 0?n:fl.DEFAULT_CAPACITY,timeout:(i=r==null?void 0:r.timeout)!==null&&i!==void 0?i:fl.DEFAULT_TIMEOUT_SECS*1e3})||this}return t})(Kh);var Un=function(){function e(){this._keyForVuid="optimizely-vuid",this._vuid=""}return Object.defineProperty(e.prototype,"vuid",{get:function(){return this._vuid},enumerable:!1,configurable:!0}),e.instance=function(t){return ce(this,void 0,void 0,function(){return le(this,function(r){switch(r.label){case 0:return this._instance||(this._instance=new e),this._instance._vuid?[3,2]:[4,this._instance.load(t)];case 1:r.sent(),r.label=2;case 2:return[2,this._instance]}})})},e.prototype.load=function(t){return ce(this,void 0,void 0,function(){var r;return le(this,function(n){switch(n.label){case 0:return[4,t.get(this._keyForVuid)];case 1:return r=n.sent(),r&&e.isVuid(r)?(this._vuid=r,[3,4]):[3,2];case 2:return this._vuid=this.makeVuid(),[4,this.save(this._vuid,t)];case 3:n.sent(),n.label=4;case 4:return[2,this._vuid]}})})},e.prototype.makeVuid=function(){var t=32,r=jo(),n=r.replace(/-/g,"").toLowerCase(),i="".concat(e.vuid_prefix).concat(n);return i.length<=t?i:i.substring(0,t)},e.prototype.save=function(t,r){return ce(this,void 0,void 0,function(){return le(this,function(n){switch(n.label){case 0:return[4,r.set(this._keyForVuid,t)];case 1:return n.sent(),[2]}})})},e._reset=function(){this._instance._vuid=""},e.vuid_prefix="vuid_",e.isVuid=function(t){return(t==null?void 0:t.startsWith(e.vuid_prefix))||!1},e}();function $h(e){var t=["string","number","boolean"],r=!1;return e.forEach(function(n){!t.includes(typeof n)&&n!==null&&(r=!0)}),r}var lo=function(){function e(t,r,n,i){this.type=t,this.action=r,this.identifiers=n??new Map,this.data=i??new Map}return e}(),pl=function(){};function O0(){var e=pl,t=pl,r=new Promise(function(n,i){e=n,t=i});return{promise:r,resolve:e,reject:t,then:r.then.bind(r)}}var Lt;(function(e){e[e.Running=0]="Running",e[e.Stopped=1]="Stopped"})(Lt||(Lt={}));var N0=function(){function e(t){var r=t.odpIntegrationConfig,n=t.segmentManager,i=t.eventManager,o=t.logger,a=this;this.ready=!1,this.status=Lt.Stopped,this.segmentManager=n,this.eventManager=i,this.logger=o,this.configPromise=O0();var s=[this.configPromise];this.isVuidEnabled()&&s.push(this.initializeVuid()),this.initPromise=Promise.all(s),this.onReady().then(function(){a.ready=!0,a.isVuidEnabled()&&a.status===Lt.Running&&a.registerVuid()}),r&&this.updateSettings(r)}return e.prototype.getStatus=function(){return this.status},e.prototype.start=function(){return ce(this,void 0,void 0,function(){return le(this,function(t){return this.status===Lt.Running?[2]:this.odpIntegrationConfig?this.odpIntegrationConfig.integrated?(this.status=Lt.Running,this.segmentManager.updateSettings(this.odpIntegrationConfig.odpConfig),this.eventManager.updateSettings(this.odpIntegrationConfig.odpConfig),this.eventManager.start(),[2,Promise.resolve()]):[2,Promise.reject(new Error("start() called when ODP is not integrated"))]:[2,Promise.reject(new Error("cannot start without ODP config"))]})})},e.prototype.stop=function(){return ce(this,void 0,void 0,function(){return le(this,function(t){switch(t.label){case 0:return this.status===Lt.Stopped?[2]:(this.status=Lt.Stopped,[4,this.eventManager.stop()]);case 1:return t.sent(),[2]}})})},e.prototype.onReady=function(){return this.initPromise},e.prototype.isReady=function(){return this.ready},e.prototype.updateSettings=function(t){return this.configPromise.resolve(),this.odpIntegrationConfig&&a0(this.odpIntegrationConfig,t)?!1:(this.odpIntegrationConfig=t,t.integrated?this.status===Lt.Running?(this.segmentManager.updateSettings(t.odpConfig),this.eventManager.updateSettings(t.odpConfig)):this.start():this.stop(),!0)},e.prototype.fetchQualifiedSegments=function(t,r){return r===void 0&&(r=[]),ce(this,void 0,void 0,function(){return le(this,function(n){return this.odpIntegrationConfig?this.odpIntegrationConfig.integrated?Un.isVuid(t)?[2,this.segmentManager.fetchQualifiedSegments(Ze.VUID,t,r)]:[2,this.segmentManager.fetchQualifiedSegments(Ze.FS_USER_ID,t,r)]:(this.logger.log(L.ERROR,O.ODP_NOT_INTEGRATED),[2,null]):(this.logger.log(L.ERROR,O.ODP_CONFIG_NOT_AVAILABLE),[2,null])})})},e.prototype.identifyUser=function(t,r){if(!this.odpIntegrationConfig){this.logger.log(L.ERROR,O.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(L.INFO,O.ODP_NOT_INTEGRATED);return}if(t&&Un.isVuid(t)){this.eventManager.identifyUser(void 0,t);return}this.eventManager.identifyUser(t,r)},e.prototype.sendEvent=function(t){var r=t.type,n=t.action,i=t.identifiers,o=t.data,a=r;if((typeof a!="string"||a==="")&&(a="fullstack"),!this.odpIntegrationConfig){this.logger.log(L.ERROR,O.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(L.ERROR,O.ODP_NOT_INTEGRATED);return}if($h(o))throw new Error(O.ODP_INVALID_DATA);if(typeof n!="string"||n==="")throw new Error("ODP action is not valid (cannot be empty).");this.eventManager.sendEvent(new lo(a,n,i,o))},e.prototype.initializeVuid=function(){return Promise.resolve()},e.prototype.registerVuid=function(){if(!this.odpIntegrationConfig){this.logger.log(L.ERROR,O.ODP_CONFIG_NOT_AVAILABLE);return}if(!this.odpIntegrationConfig.integrated){this.logger.log(L.INFO,O.ODP_NOT_INTEGRATED);return}var t=this.getVuid();if(t)try{this.eventManager.registerVuid(t)}catch{this.logger.log(L.ERROR,O.ODP_VUID_REGISTRATION_FAILED)}},e}(),Ca="ODP event send failed",C0=function(){function e(t,r){this.requestHandler=t,this.logger=r}return e.prototype.getLogger=function(){return this.logger},e.prototype.sendEvents=function(t,r){var n;return ce(this,void 0,void 0,function(){var i,o,a,s,c,u,l,f,d,p,h;return le(this,function(v){switch(v.label){case 0:if(i=!1,r.length===0)return this.logger.log(L.ERROR,"".concat(Ca," (no events)")),[2,i];if(!this.shouldSendEvents(r))return[2,i];o=this.generateRequestData(t,r),a=o.method,s=o.endpoint,c=o.headers,u=o.data,l=0,v.label=1;case 1:return v.trys.push([1,3,,4]),f=this.requestHandler.makeRequest(s,c,a,u),[4,f.responsePromise];case 2:return d=v.sent(),l=(n=d.statusCode)!==null&&n!==void 0?n:l,[3,4];case 3:return p=v.sent(),h="network error",p instanceof Error&&(h=p.message),this.logger.log(L.ERROR,"".concat(Ca," (").concat(h,")")),i=!0,[3,4];case 4:return l>=400&&this.logger.log(L.ERROR,"".concat(Ca," (").concat(l,")")),l>=500&&(i=!0),[2,i]}})})},e}(),L0="ODP event send failed",D0="v2/zaius.gif",x0=function(e){Pr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.shouldSendEvents=function(r){return r.length<=1?!0:(this.getLogger().log(L.ERROR,"".concat(L0," (browser only supports batch size 1)")),!1)},t.prototype.getPixelApiEndpoint=function(r){var n=r.pixelUrl,i=new URL(D0,n).href;return i},t.prototype.generateRequestData=function(r,n){var i=this.getPixelApiEndpoint(r),o=r.apiKey,a="GET",s=n[0],c=new URL(i);s.identifiers.forEach(function(l,f){c.searchParams.append(f,l)}),s.data.forEach(function(l,f){c.searchParams.append(f,l)}),c.searchParams.append("tracker_id",o),c.searchParams.append("event_type",s.type),c.searchParams.append("vdl_action",s.action);var u=c.toString();return{method:a,endpoint:u,headers:{},data:""}},t}(C0),Wh=function(e){typeof queueMicrotask=="function"?queueMicrotask(e):setTimeout(e)},k0=3,qt;(function(e){e[e.Stopped=0]="Stopped",e[e.Running=1]="Running"})(qt||(qt={}));var P0=function(){function e(t){var r=t.odpConfig,n=t.apiManager,i=t.logger,o=t.clientEngine,a=t.clientVersion,s=t.queueSize,c=t.batchSize,u=t.flushInterval,l=t.userAgentParser,f=t.retries;if(this.status=qt.Stopped,this.queue=new Array,this.apiManager=n,this.logger=i,this.clientEngine=o,this.clientVersion=a,this.initParams(c,s,u),this.status=qt.Stopped,this.userAgentParser=l,this.retries=f||k0,l){var d=l.parseUserAgentInfo(),p=d.os,h=d.device,v={os:p.name,os_version:p.version,device_type:h.type,model:h.model};this.userAgentData=new Map(Object.entries(v).filter(function(g){g[0];var m=g[1];return m!=null&&m!=null}))}r&&this.updateSettings(r)}return e.prototype.updateSettings=function(t){this.odpConfig&&this.odpConfig.equals(t)||(this.flush(),this.odpConfig=t)},e.prototype.flush=function(){this.processQueue(!0)},e.prototype.start=function(){if(!this.odpConfig){this.logger.log(L.ERROR,O.ODP_CONFIG_NOT_AVAILABLE);return}this.status=qt.Running,this.batchSize>1&&this.setNewTimeout()},e.prototype.stop=function(){return ce(this,void 0,void 0,function(){return le(this,function(t){return this.logger.log(L.DEBUG,"Stop requested."),this.flush(),this.clearCurrentTimeout(),this.status=qt.Stopped,this.logger.log(L.DEBUG,"Stopped. Queue Count: %s",this.queue.length),[2]})})},e.prototype.registerVuid=function(t){var r=new Map;r.set(Ze.VUID,t);var n=new lo(uo,Wn.INITIALIZED,r);this.sendEvent(n)},e.prototype.identifyUser=function(t,r){var n=new Map;if(!t&&!r){this.logger.log(L.ERROR,O.ODP_SEND_EVENT_FAILED_UID_MISSING);return}r&&n.set(Ze.VUID,r),t&&n.set(Ze.FS_USER_ID,t);var i=new lo(uo,Wn.IDENTIFIED,n);this.sendEvent(i)},e.prototype.sendEvent=function(t){$h(t.data)?this.logger.log(L.ERROR,"Event data found to be invalid."):(t.data=this.augmentCommonData(t.data),this.enqueue(t))},e.prototype.enqueue=function(t){if(this.status===qt.Stopped){this.logger.log(L.WARNING,"Failed to Process ODP Event. ODPEventManager is not running.");return}if(!this.hasNecessaryIdentifiers(t)){this.logger.log(L.ERROR,"ODP events should have at least one key-value pair in identifiers.");return}if(this.queue.length>=this.queueSize){this.logger.log(L.WARNING,"Failed to Process ODP Event. Event Queue full. queueSize = %s.",this.queue.length);return}this.queue.push(t),this.processQueue()},e.prototype.processQueue=function(t){if(t===void 0&&(t=!1),this.status===qt.Running){if(t)for(this.clearCurrentTimeout();this.queueContainsItems();)this.makeAndSend1Batch();else if(this.queueHasBatches())for(this.clearCurrentTimeout();this.queueHasBatches();)this.makeAndSend1Batch();this.batchSize>1&&this.setNewTimeout()}},e.prototype.clearCurrentTimeout=function(){clearTimeout(this.timeoutId),this.timeoutId=void 0},e.prototype.setNewTimeout=function(){var t=this;this.timeoutId===void 0&&(this.timeoutId=setTimeout(function(){return t.processQueue(!0)},this.flushInterval))},e.prototype.makeAndSend1Batch=function(){var t=this;if(this.odpConfig){var r=this.queue.splice(0,this.batchSize),n=this.odpConfig;r.length>0&&Wh(function(){return ce(t,void 0,void 0,function(){var i,o;return le(this,function(a){switch(a.label){case 0:o=0,a.label=1;case 1:return[4,this.apiManager.sendEvents(n,r)];case 2:i=a.sent(),o+=1,a.label=3;case 3:if(i&&o<this.retries)return[3,1];a.label=4;case 4:return[2]}})})})}},e.prototype.queueHasBatches=function(){return this.queueContainsItems()&&this.queue.length%this.batchSize===0},e.prototype.queueContainsItems=function(){return this.queue.length>0},e.prototype.augmentCommonData=function(t){var r=new Map(this.userAgentData);return r.set("idempotence_id",jo()),r.set("data_source_type","sdk"),r.set("data_source",this.clientEngine),r.set("data_source_version",this.clientVersion),t.forEach(function(n,i){return r.set(i,n)}),r},e.prototype.getLogger=function(){return this.logger},e.prototype.getQueue=function(){return this.queue},e}(),U0=100,M0=function(e){Pr(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasNecessaryIdentifiers=function(n){return n.identifiers.size>=0},r}return t.prototype.initParams=function(r,n,i){this.queueSize=n||U0,this.batchSize=1,this.flushInterval=0,typeof r<"u"&&r!==1&&this.getLogger().log(L.WARNING,"ODP event batch size must be 1 in the browser."),typeof i<"u"&&i!==0&&this.getLogger().log(L.WARNING,"ODP event flush interval must be 0 in the browser.")},t.prototype.discardEventsIfNeeded=function(){this.getLogger().log(L.DEBUG,"ODPConfig not ready. Leaving events in queue.")},t}(P0),F0=function(){function e(t,r,n,i){this.odpConfig=i,this._segmentsCache=t,this.odpSegmentApiManager=r,this.logger=n||fe("OdpSegmentManager")}return Object.defineProperty(e.prototype,"segmentsCache",{get:function(){return this._segmentsCache},enumerable:!1,configurable:!0}),e.prototype.fetchQualifiedSegments=function(t,r,n){return ce(this,void 0,void 0,function(){var i,o,a,s,c,u;return le(this,function(l){switch(l.label){case 0:if(!this.odpConfig)return this.logger.log(L.WARNING,O.ODP_CONFIG_NOT_AVAILABLE),[2,null];if(i=this.odpConfig.segmentsToCheck,!i||i.length<=0)return this.logger.log(L.DEBUG,"No segments are used in the project. Returning an empty list."),[2,[]];if(o=this.makeCacheKey(t,r),a=n.includes(co.IGNORE_CACHE),s=n.includes(co.RESET_CACHE),s&&this.reset(),!a&&!s){if(c=this._segmentsCache.lookup(o),c)return this.logger.log(L.DEBUG,'ODP cache hit. Returning segments from cache "%s".',o),[2,c];this.logger.log(L.DEBUG,"ODP cache miss.")}return this.logger.log(L.DEBUG,"Making a call to ODP server."),[4,this.odpSegmentApiManager.fetchSegments(this.odpConfig.apiKey,this.odpConfig.apiHost,t,r,i)];case 1:return u=l.sent(),u&&!a&&this._segmentsCache.save({key:o,value:u}),[2,u]}})})},e.prototype.reset=function(){this._segmentsCache.reset()},e.prototype.makeCacheKey=function(t,r){return"".concat(t,"-$-").concat(r)},e.prototype.updateSettings=function(t){this.odpConfig=t,this.reset()},e}(),V0={$schema:"http://json-schema.org/draft-04/schema#",title:"Project Config JSON Schema",type:"object",properties:{projectId:{type:"string",required:!0},accountId:{type:"string",required:!0},groups:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},policy:{type:"string",required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0},events:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},experimentIds:{type:"array",items:{type:"string",required:!0}},id:{type:"string",required:!0}}},required:!0},audiences:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},name:{type:"string",required:!0},conditions:{type:"string",required:!0}}},required:!0},attributes:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},version:{type:"string",required:!0},revision:{type:"string",required:!0},integrations:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},host:{type:"string"},publicKey:{type:"string"},pixelUrl:{type:"string"}}}}}},B0=V0,G0="JSON_SCHEMA_VALIDATOR";function z0(e,t,r){t===void 0&&(t=B0);var n="".concat(G0," (").concat(t.title,")");if(typeof e!="object"||e===null)throw new Error(j(O.NO_JSON_PROVIDED,n));var i=VR.validate(e,t);return!!i.valid}var H0={$schema:"https://json-schema.org/draft/2019-09/schema",$id:"https://example.com/example.json",title:"ODP Response Schema",type:"object",required:["data"],properties:{data:{title:"The data Schema",type:"object",required:["customer"],properties:{customer:{title:"The customer Schema",type:"object",required:[],properties:{audiences:{title:"The audiences Schema",type:"object",required:["edges"],properties:{edges:{title:"The edges Schema",type:"array",items:{title:"A Schema",type:"object",required:["node"],properties:{node:{title:"The node Schema",type:"object",required:["name","state"],properties:{name:{title:"The name Schema",type:"string",examples:["has_email","has_email_opted_in"]},state:{title:"The state Schema",type:"string",examples:["qualified"]}},examples:[]}},examples:[]},examples:[]}},examples:[]}},examples:[]}},examples:[]},errors:{title:"The errors Schema",type:"array",default:[],items:{title:"A Schema",type:"object",required:["message","locations","extensions"],properties:{message:{title:"The message Schema",type:"string",examples:["Exception while fetching data (/customer) : java.lang.RuntimeException: could not resolve _fs_user_id = asdsdaddddd"]},locations:{title:"The locations Schema",type:"array",items:{title:"A Schema",type:"object",required:["line","column"],properties:{line:{title:"The line Schema",type:"integer",examples:[2]},column:{title:"The column Schema",type:"integer",examples:[3]}},examples:[]},examples:[]},path:{title:"The path Schema",type:"array",items:{title:"A Schema",type:"string",examples:["customer"]},examples:[]},extensions:{title:"The extensions Schema",type:"object",required:["classification"],properties:{classification:{title:"The classification Schema",type:"string",examples:["InvalidIdentifierException"]}},examples:[]}},examples:[]},examples:[]}},examples:[]},j0="qualified",q0=[],hl=null,Gr="Audience segments fetch failed",K0=function(){function e(t,r){this.toGraphQLJson=function(n,i,o){return rn(rn(['{"query" : "query {customer',"(".concat(n,' : \\"').concat(i,'\\") '),"{audiences","(subset: ["],(o==null?void 0:o.map(function(a,s){return'\\"'.concat(a,'\\"').concat(s<o.length-1?",":"")}))||"",!0),[']) {edges {node {name state}}}}}"}'],!1).join("")},this.requestHandler=t,this.logger=r}return e.prototype.fetchSegments=function(t,r,n,i,o){var a,s,c,u;return ce(this,void 0,void 0,function(){var l,f,d,p,h,v,g,m;return le(this,function(I){switch(I.label){case 0:return!t||!r?(this.logger.log(L.ERROR,"".concat(Gr," (Parameters apiKey or apiHost invalid)")),[2,null]):(o==null?void 0:o.length)===0?[2,q0]:(l="".concat(r,"/v3/graphql"),f=this.toGraphQLJson(n,i,o),[4,this.querySegments(t,l,n,i,f)]);case 1:return d=I.sent(),d?(p=this.parseSegmentsResponseJson(d),p?((a=p.errors)===null||a===void 0?void 0:a.length)>0?(h=p.errors[0].extensions,v=h.code,g=h.classification,v=="INVALID_IDENTIFIER_EXCEPTION"?this.logger.log(L.ERROR,"".concat(Gr," (invalid identifier)")):this.logger.log(L.ERROR,"".concat(Gr," (").concat(g,")")),[2,null]):(m=(u=(c=(s=p==null?void 0:p.data)===null||s===void 0?void 0:s.customer)===null||c===void 0?void 0:c.audiences)===null||u===void 0?void 0:u.edges,m?[2,m.filter(function(S){return S.node.state==j0}).map(function(S){return S.node.name})]:(this.logger.log(L.ERROR,"".concat(Gr," (decode error)")),[2,null])):(this.logger.log(L.ERROR,"".concat(Gr," (decode error)")),[2,null])):(this.logger.log(L.ERROR,"".concat(Gr," (network error)")),[2,null])}})})},e.prototype.querySegments=function(t,r,n,i,o){return ce(this,void 0,void 0,function(){var a,s,c,u,l;return le(this,function(f){switch(f.label){case 0:a="POST",s=r,c={"Content-Type":"application/json","x-api-key":t},f.label=1;case 1:return f.trys.push([1,3,,4]),l=this.requestHandler.makeRequest(s,c,a,o),[4,l.responsePromise];case 2:return u=f.sent(),[3,4];case 3:return f.sent(),[2,null];case 4:return[2,u.body]}})})},e.prototype.parseSegmentsResponseJson=function(t){var r={};try{r=JSON.parse(t)}catch{return hl}return z0(r,H0)?r:hl},e}(),$0=function(e){Pr(t,e);function t(r){return e.call(this,r)||this}return t.createInstance=function(r){var n=r.logger,i=r.odpOptions,o=r.odpIntegrationConfig,a=r.clientEngine,s=r.clientVersion;n=n||fe(),a=a||gu,s=s||mu;var c=void 0;o!=null&&o.integrated&&(c=o.odpConfig);var u;i!=null&&i.segmentsRequestHandler?u=i.segmentsRequestHandler:u=new ll(n,(i==null?void 0:i.segmentsApiTimeout)||Ah);var l;i!=null&&i.segmentManager?l=i.segmentManager:l=new F0((i==null?void 0:i.segmentsCache)||new R0({maxSize:i==null?void 0:i.segmentsCacheSize,timeout:i==null?void 0:i.segmentsCacheTimeout}),new K0(u,n),n,c);var f;i!=null&&i.eventRequestHandler?f=i.eventRequestHandler:f=new ll(n,(i==null?void 0:i.eventApiTimeout)||Rh);var d;return i!=null&&i.eventManager?d=i.eventManager:d=new M0({odpConfig:c,apiManager:new x0(f,n),logger:n,clientEngine:a,clientVersion:s,flushInterval:i==null?void 0:i.eventFlushInterval,batchSize:i==null?void 0:i.eventBatchSize,queueSize:i==null?void 0:i.eventQueueSize,userAgentParser:i==null?void 0:i.userAgentParser}),new t({odpIntegrationConfig:o,segmentManager:l,eventManager:d,logger:n})},t.prototype.initializeVuid=function(){return ce(this,void 0,void 0,function(){var r;return le(this,function(n){switch(n.label){case 0:return[4,Un.instance(t.cache)];case 1:return r=n.sent(),this.vuid=r.vuid,[2]}})})},t.prototype.identifyUser=function(r,n){if(r&&Un.isVuid(r)){e.prototype.identifyUser.call(this,void 0,r);return}if(r&&n&&Un.isVuid(n)){e.prototype.identifyUser.call(this,r,n);return}e.prototype.identifyUser.call(this,r,n||this.vuid)},t.prototype.sendEvent=function(r){var n=r.type,i=r.action,o=r.identifiers,a=r.data,s=new Map(o);if(!o.has(Ze.VUID))if(this.vuid)s.set(Ze.VUID,this.vuid);else throw new Error(O.ODP_SEND_EVENT_FAILED_VUID_MISSING);e.prototype.sendEvent.call(this,{type:n,action:i,identifiers:s,data:a})},t.prototype.isVuidEnabled=function(){return!0},t.prototype.getVuid=function(){return this.vuid},t.cache=new I0,t}(N0);function vl(e,t,r){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:e,userContext:t,reasons:r}}var gl=function(){function e(t){var r=t.optimizely,n=t.userId,i=t.attributes,o=t.shouldIdentifyUser,a=o===void 0?!0:o,s=this,c;this._qualifiedSegments=null,this.optimizely=r,this.userId=n,this.attributes=(c=Ke({},i))!==null&&c!==void 0?c:{},this.forcedDecisionsMap={},a&&this.optimizely.onReady().then(function(u){var l=u.success;l&&s.identifyUser()})}return e.prototype.identifyUser=function(){this.optimizely.identifyUser(this.userId)},e.prototype.setAttribute=function(t,r){this.attributes[t]=r},e.prototype.getUserId=function(){return this.userId},e.prototype.getAttributes=function(){return Ke({},this.attributes)},e.prototype.getOptimizely=function(){return this.optimizely},Object.defineProperty(e.prototype,"qualifiedSegments",{get:function(){return this._qualifiedSegments},set:function(t){this._qualifiedSegments=t},enumerable:!1,configurable:!0}),e.prototype.decide=function(t,r){return r===void 0&&(r=[]),this.optimizely.decide(this.cloneUserContext(),t,r)},e.prototype.decideForKeys=function(t,r){return r===void 0&&(r=[]),this.optimizely.decideForKeys(this.cloneUserContext(),t,r)},e.prototype.decideAll=function(t){return t===void 0&&(t=[]),this.optimizely.decideAll(this.cloneUserContext(),t)},e.prototype.trackEvent=function(t,r){this.optimizely.track(t,this.userId,this.attributes,r)},e.prototype.setForcedDecision=function(t,r){var n,i=t.flagKey,o=(n=t.ruleKey)!==null&&n!==void 0?n:wt.FORCED_DECISION_NULL_RULE_KEY,a=r.variationKey,s={variationKey:a};return this.forcedDecisionsMap[i]||(this.forcedDecisionsMap[i]={}),this.forcedDecisionsMap[i][o]=s,!0},e.prototype.getForcedDecision=function(t){return this.findForcedDecision(t)},e.prototype.removeForcedDecision=function(t){var r,n=(r=t.ruleKey)!==null&&r!==void 0?r:wt.FORCED_DECISION_NULL_RULE_KEY,i=t.flagKey,o=!1;if(this.forcedDecisionsMap.hasOwnProperty(i)){var a=this.forcedDecisionsMap[i];a.hasOwnProperty(n)&&(delete this.forcedDecisionsMap[i][n],o=!0),Object.keys(this.forcedDecisionsMap[i]).length===0&&delete this.forcedDecisionsMap[i]}return o},e.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},e.prototype.findForcedDecision=function(t){var r,n,i=(r=t.ruleKey)!==null&&r!==void 0?r:wt.FORCED_DECISION_NULL_RULE_KEY,o=t.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(t.flagKey)){var a=this.forcedDecisionsMap[o];if(a.hasOwnProperty(i))return n=a[i].variationKey,{variationKey:n}}return null},e.prototype.cloneUserContext=function(){var t=new e({shouldIdentifyUser:!1,optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(t.forcedDecisionsMap=Ke({},this.forcedDecisionsMap)),t._qualifiedSegments=this._qualifiedSegments,t},e.prototype.fetchQualifiedSegments=function(t){return ce(this,void 0,void 0,function(){var r;return le(this,function(n){switch(n.label){case 0:return[4,this.optimizely.fetchQualifiedSegments(this.userId,t)];case 1:return r=n.sent(),this.qualifiedSegments=r,[2,r!==null]}})})},e.prototype.isQualifiedFor=function(t){return this._qualifiedSegments?this._qualifiedSegments.indexOf(t)>-1:!1},e}(),Yh="and",Xh="or",Jh="not",Zh=[Yh,Xh,Jh];function Yn(e,t){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch(typeof r=="string"&&Zh.indexOf(r)===-1&&(r=Xh,n=e),r){case Yh:return W0(n,t);case Jh:return Y0(n,t);default:return X0(n,t)}}var i=e;return t(i)}function W0(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=Yn(e[n],t);if(i===!1)return!1;i===null&&(r=!0)}return r?null:!0}return null}function Y0(e,t){if(Array.isArray(e)&&e.length>0){var r=Yn(e[0],t);return r===null?null:!r}return null}function X0(e,t){var r=!1;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=Yn(e[n],t);if(i===!0)return!0;i===null&&(r=!0)}return r?null:!1}return null}var J0=function(){function e(t,r,n){var i,o;this.sdkKey=(i=t.sdkKey)!==null&&i!==void 0?i:"",this.environmentKey=(o=t.environmentKey)!==null&&o!==void 0?o:"",this.attributes=t.attributes,this.audiences=e.getAudiences(t),this.events=t.events,this.revision=t.revision;var a=(t.featureFlags||[]).reduce(function(f,d){return f[d.id]=d.variables,f},{}),s=e.getVariableIdMap(t),c=e.getExperimentsMap(t,a,s,n),u=c.experimentsMapById,l=c.experimentsMapByKey;this.experimentsMap=l,this.featuresMap=e.getFeaturesMap(t,a,u,s),this.datafile=r}return e.prototype.getDatafile=function(){return this.datafile},e.getAudiences=function(t){var r=[],n=[];return(t.typedAudiences||[]).forEach(function(i){r.push({id:i.id,conditions:JSON.stringify(i.conditions),name:i.name}),n.push(i.id)}),(t.audiences||[]).forEach(function(i){n.indexOf(i.id)===-1&&i.id!="$opt_dummy_audience"&&r.push({id:i.id,conditions:JSON.stringify(i.conditions),name:i.name})}),r},e.getSerializedAudiences=function(t,r){var n="";if(t){var i="";t.forEach(function(o){var a="";if(o instanceof Array)a=e.getSerializedAudiences(o,r),a="(".concat(a,")");else if(Zh.indexOf(o)>-1)i=o.toUpperCase();else{var s=r[o]?r[o].name:o;n||i==="NOT"?(i=i===""?"OR":i,n===""?n="".concat(i,' "').concat(r[o].name,'"'):n=n.concat(" ".concat(i,' "').concat(s,'"'))):n='"'.concat(s,'"')}a!==""&&(n!==""||i==="NOT"?(i=i===""?"OR":i,n===""?n="".concat(i," ").concat(a):n=n.concat(" ".concat(i," ").concat(a))):n=n.concat(a))})}return n},e.getExperimentAudiences=function(t,r){return t.audienceConditions?e.getSerializedAudiences(t.audienceConditions,r.audiencesById):""},e.mergeFeatureVariables=function(t,r,n,i,o){var a=(t[n]||[]).reduce(function(s,c){return s[c.key]={id:c.id,key:c.key,type:c.type,value:c.defaultValue},s},{});return(i||[]).forEach(function(s){var c=r[s.id],u={id:s.id,key:c.key,type:c.type,value:o?s.value:c.defaultValue};a[c.key]=u}),a},e.getVariationsMap=function(t,r,n,i){var o={};return o=t.reduce(function(a,s){var c=e.mergeFeatureVariables(r,n,i,s.variables,s.featureEnabled);return a[s.key]={id:s.id,key:s.key,featureEnabled:s.featureEnabled,variablesMap:c},a},{}),o},e.getVariableIdMap=function(t){var r={};return r=(t.featureFlags||[]).reduce(function(n,i){return i.variables.forEach(function(o){n[o.id]=o}),n},{}),r},e.getDeliveryRules=function(t,r,n,i,o){return i.map(function(a){return{id:a.id,key:a.key,audiences:e.getExperimentAudiences(a,t),variationsMap:e.getVariationsMap(a.variations,r,o,n)}})},e.getRolloutExperimentIds=function(t){var r=[];return(t||[]).forEach(function(n){n.experiments.forEach(function(i){r.push(i.id)})}),r},e.getExperimentsMap=function(t,r,n,i){var o=this.getRolloutExperimentIds(t.rollouts),a={},s={},c=t.experiments||[];return c.forEach(function(u){if(o.indexOf(u.id)===-1){var l=t.experimentFeatureMap[u.id],f="";l&&l.length>0&&(f=l[0]);var d=e.getVariationsMap(u.variations,r,n,f.toString()),p={id:u.id,key:u.key,audiences:e.getExperimentAudiences(u,t),variationsMap:d};a[u.id]=p,s[u.key]&&i&&i.warn("Duplicate experiment keys found in datafile: ".concat(u.key)),s[u.key]=p}}),{experimentsMapById:a,experimentsMapByKey:s}},e.getExperimentsKeyMap=function(t){var r={};for(var n in t){var i=t[n];r[i.key]=i}return r},e.getFeaturesMap=function(t,r,n,i){var o={};return t.featureFlags.forEach(function(a){var s={},c=[];a.experimentIds.forEach(function(d){var p=n[d];p&&(s[p.key]=p),c.push(n[d])});var u=(a.variables||[]).reduce(function(d,p){return d[p.key]={id:p.id,key:p.key,type:p.type,value:p.defaultValue},d},{}),l=[],f=t.rolloutIdMap[a.rolloutId];f&&(l=e.getDeliveryRules(t,r,a.id,f.experiments,i)),o[a.key]={id:a.id,key:a.key,experimentRules:c,deliveryRules:l,experimentsMap:s,variablesMap:u}}),o},e}();function Z0(e,t,r){return new J0(e,t,r)}var Nn=fe(),Q0="PROJECT_CONFIG_MANAGER";function zr(e,t){return e instanceof Error?e.message:t||"Unknown error"}var eN=function(){function e(t){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=t.jsonSchemaValidator,!t.datafile&&!t.sdkKey){var r=new Error(j(O.DATAFILE_AND_SDK_KEY_MISSING,Q0));this.readyPromise=Promise.resolve({success:!1,reason:zr(r)}),Nn.error(r);return}var n=null;t.datafile&&(n=this.handleNewDatafile(t.datafile)),t.sdkKey&&t.datafileManager?(this.datafileManager=t.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:zr(n,"Invalid datafile")})}catch(i){Nn.error(i),this.readyPromise=Promise.resolve({success:!1,reason:zr(i,"Error in initialize")})}}return e.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var t=this.handleNewDatafile(this.datafileManager.get());return t?{success:!1,reason:zr(t)}:{success:!0}}return{success:!1,reason:zr(null,"Datafile manager is not provided")}},e.prototype.onDatafileManagerReadyReject=function(t){return{success:!1,reason:zr(t,"Failed to become ready")}},e.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},e.prototype.handleNewDatafile=function(t){var r=this,n=qh({datafile:t,jsonSchemaValidator:this.jsonSchemaValidator,logger:Nn}),i=n.configObj,o=n.error;if(o)Nn.error(o);else{var a=this.configObj?this.configObj.revision:"null";i&&a!==i.revision&&(this.configObj=i,this.optimizelyConfigObj=null,Wh(function(){r.updateListeners.forEach(function(s){return s(i)})}))}return o},e.prototype.getConfig=function(){return this.configObj},e.prototype.getOptimizelyConfig=function(){return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=Z0(this.configObj,jh(this.configObj),Nn)),this.optimizelyConfigObj},e.prototype.onReady=function(){return this.readyPromise},e.prototype.onUpdate=function(t){var r=this;return this.updateListeners.push(t),function(){var n=r.updateListeners.indexOf(t);n>-1&&r.updateListeners.splice(n,1)}},e.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},e}();function tN(e){return new eN(e)}var rN=1,nN=Math.pow(2,32),iN=1e4,He="BUCKETER",oN="random",ml=function(e){var t=[],r=e.experimentIdMap[e.experimentId],n=r.groupId;if(n){var i=e.groupIdMap[n];if(!i)throw new Error(j(O.INVALID_GROUP_ID,He,n));if(i.policy===oN){var o=aN(i,e.bucketingId,e.userId,e.logger);if(o===null)return e.logger.log(w.INFO,T.USER_NOT_IN_ANY_EXPERIMENT,He,e.userId,n),t.push([T.USER_NOT_IN_ANY_EXPERIMENT,He,e.userId,n]),{result:null,reasons:t};if(o!==e.experimentId)return e.logger.log(w.INFO,T.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,He,e.userId,e.experimentKey,n),t.push([T.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,He,e.userId,e.experimentKey,n]),{result:null,reasons:t};e.logger.log(w.INFO,T.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,He,e.userId,e.experimentKey,n),t.push([T.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,He,e.userId,e.experimentKey,n])}}var a="".concat(e.bucketingId).concat(e.experimentId),s=ev(a);e.logger.log(w.DEBUG,T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,He,s,e.userId),t.push([T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,He,s,e.userId]);var c=Qh(s,e.trafficAllocationConfig);return c!==null&&!e.variationIdMap[c]?(c&&(e.logger.log(w.WARNING,T.INVALID_VARIATION_ID,He),t.push([T.INVALID_VARIATION_ID,He])),{result:null,reasons:t}):{result:c,reasons:t}},aN=function(e,t,r,n){var i="".concat(t).concat(e.id),o=ev(i);n.log(w.DEBUG,T.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,He,o,r);var a=e.trafficAllocation,s=Qh(o,a);return s},Qh=function(e,t){for(var r=0;r<t.length;r++)if(e<t[r].endOfRange)return t[r].entityId;return null},ev=function(e){try{var t=GR.v3(e,rN),r=t/nN;return Math.floor(r*iN)}catch(n){throw new Error(j(O.INVALID_BUCKETING_ID,He,e,n.message))}},Ri="SEMANTIC VERSION",Oi=fe();function tv(e){return/^\d+$/.test(e)}function jt(e){var t=e.indexOf("-"),r=e.indexOf("+");return t<0?!1:r<0?!0:t<r}function rv(e){var t=e.indexOf("-"),r=e.indexOf("+");return r<0?!1:t<0?!0:r<t}function sN(e){return/\s/.test(e)}function El(e){var t=e,r="";if(sN(e))return Oi.warn(T.UNKNOWN_MATCH_TYPE,Ri,e),null;if(jt(e)?(t=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1)):rv(e)&&(t=e.substring(0,e.indexOf("+")),r=e.substring(e.indexOf("+")+1)),typeof t!="string"||typeof r!="string")return null;var n=t.split(".").length-1;if(n>2)return Oi.warn(T.UNKNOWN_MATCH_TYPE,Ri,e),null;var i=t.split(".");if(i.length!=n+1)return Oi.warn(T.UNKNOWN_MATCH_TYPE,Ri,e),null;for(var o=0,a=i;o<a.length;o++){var s=a[o];if(!tv(s))return Oi.warn(T.UNKNOWN_MATCH_TYPE,Ri,e),null}return r&&i.push(r),i}function uN(e,t){var r=El(t),n=El(e);if(!r||!n)return null;for(var i=r.length,o=0;o<n.length;o++){if(i<=o)return jt(e)||rv(e)?1:-1;if(tv(r[o])){var a=parseInt(r[o]),s=parseInt(n[o]);if(a>s)return 1;if(a<s)return-1}else{if(r[o]<n[o])return jt(e)&&!jt(t)?1:-1;if(r[o]>n[o])return!jt(e)&&jt(t)?-1:1}}return jt(t)&&!jt(e)?-1:0}var Se="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",we=fe(),nv="exact",_u="exists",iv="ge",ov="gt",av="le",sv="lt",uv="semver_eq",cv="semver_ge",lv="semver_gt",dv="semver_le",fv="semver_lt",pv="substring",cN=[nv,_u,ov,iv,sv,av,pv,uv,fv,dv,lv,cv],We={};We[nv]=ds;We[_u]=dN;We[ov]=fN;We[iv]=pN;We[sv]=hN;We[av]=vN;We[pv]=gN;We[uv]=mN;We[lv]=EN;We[cv]=yN;We[fv]=_N;We[dv]=bN;function lN(e,t){var r=t.getAttributes(),n=e.match;if(typeof n<"u"&&cN.indexOf(n)===-1)return we.warn(T.UNKNOWN_MATCH_TYPE,Se,JSON.stringify(e)),null;var i=e.name;if(!r.hasOwnProperty(i)&&n!=_u)return we.debug(T.MISSING_ATTRIBUTE_VALUE,Se,JSON.stringify(e),i),null;var o;return n?o=We[n]||ds:o=ds,o(e,t)}function _l(e){return typeof e=="string"||typeof e=="boolean"||re.isNumber(e)}function ds(e,t){var r=t.getAttributes(),n=e.value,i=typeof n,o=e.name,a=r[o],s=typeof a;return!_l(n)||re.isNumber(n)&&!re.isSafeInteger(n)?(we.warn(T.UNEXPECTED_CONDITION_VALUE,Se,JSON.stringify(e)),null):a===null?(we.debug(T.UNEXPECTED_TYPE_NULL,Se,JSON.stringify(e),o),null):!_l(a)||i!==s?(we.warn(T.UNEXPECTED_TYPE,Se,JSON.stringify(e),s,o),null):re.isNumber(a)&&!re.isSafeInteger(a)?(we.warn(T.OUT_OF_BOUNDS,Se,JSON.stringify(e),o),null):n===a}function dN(e,t){var r=t.getAttributes(),n=r[e.name];return typeof n<"u"&&n!==null}function Ko(e,t){var r=t.getAttributes(),n=e.name,i=r[n],o=typeof i,a=e.value;return a===null||!re.isSafeInteger(a)?(we.warn(T.UNEXPECTED_CONDITION_VALUE,Se,JSON.stringify(e)),!1):i===null?(we.debug(T.UNEXPECTED_TYPE_NULL,Se,JSON.stringify(e),n),!1):re.isNumber(i)?re.isSafeInteger(i)?!0:(we.warn(T.OUT_OF_BOUNDS,Se,JSON.stringify(e),n),!1):(we.warn(T.UNEXPECTED_TYPE,Se,JSON.stringify(e),o,n),!1)}function fN(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!Ko(e,t)||i===null?null:n>i}function pN(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!Ko(e,t)||i===null?null:n>=i}function hN(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!Ko(e,t)||i===null?null:n<i}function vN(e,t){var r=t.getAttributes(),n=r[e.name],i=e.value;return!Ko(e,t)||i===null?null:n<=i}function gN(e,t){var r=t.getAttributes(),n=e.name,i=r[e.name],o=typeof i,a=e.value;return typeof a!="string"?(we.warn(T.UNEXPECTED_CONDITION_VALUE,Se,JSON.stringify(e)),null):i===null?(we.debug(T.UNEXPECTED_TYPE_NULL,Se,JSON.stringify(e),n),null):typeof i!="string"?(we.warn(T.UNEXPECTED_TYPE,Se,JSON.stringify(e),o,n),null):i.indexOf(a)!==-1}function si(e,t){var r=t.getAttributes(),n=e.name,i=r[n],o=typeof i,a=e.value;return typeof a!="string"?(we.warn(T.UNEXPECTED_CONDITION_VALUE,Se,JSON.stringify(e)),null):i===null?(we.debug(T.UNEXPECTED_TYPE_NULL,Se,JSON.stringify(e),n),null):typeof i!="string"?(we.warn(T.UNEXPECTED_TYPE,Se,JSON.stringify(e),o,n),null):uN(a,i)}function mN(e,t){var r=si(e,t);return r===null?null:r===0}function EN(e,t){var r=si(e,t);return r===null?null:r>0}function _N(e,t){var r=si(e,t);return r===null?null:r<0}function yN(e,t){var r=si(e,t);return r===null?null:r>=0}function bN(e,t){var r=si(e,t);return r===null?null:r<=0}var SN=Object.freeze({__proto__:null,evaluate:lN}),wN="ODP_SEGMENT_CONDITION_EVALUATOR",TN=fe(),hv="qualified",IN=[hv],vv={};vv[hv]=fs;function AN(e,t){var r=e.match;if(typeof r<"u"&&IN.indexOf(r)===-1)return TN.warn(T.UNKNOWN_MATCH_TYPE,wN,JSON.stringify(e)),null;var n;return r?n=vv[r]||fs:n=fs,n(e,t)}function fs(e,t){return t.isQualifiedFor(e.value)}var RN=Object.freeze({__proto__:null,evaluate:AN}),Ni=fe(),Ci="AUDIENCE_EVALUATOR",ON=function(){function e(t){this.typeToEvaluatorMap=re.assign({},t,{custom_attribute:SN,third_party_dimension:RN})}return e.prototype.evaluate=function(t,r,n){var i=this;if(!t||t.length===0)return!0;var o=function(a){var s=r[a];if(s){Ni.log(w.DEBUG,T.EVALUATING_AUDIENCE,Ci,a,JSON.stringify(s.conditions));var c=Yn(s.conditions,i.evaluateConditionWithUserAttributes.bind(i,n)),u=c===null?"UNKNOWN":c.toString().toUpperCase();return Ni.log(w.DEBUG,T.AUDIENCE_EVALUATION_RESULT,Ci,a,u),c}return null};return!!Yn(t,o)},e.prototype.evaluateConditionWithUserAttributes=function(t,r){var n=this.typeToEvaluatorMap[r.type];if(!n)return Ni.log(w.WARNING,T.UNKNOWN_CONDITION_TYPE,Ci,JSON.stringify(r)),null;try{return n.evaluate(r,t)}catch(i){Ni.log(w.ERROR,O.CONDITION_EVALUATOR_ERROR,Ci,r.type,i.message)}return null},e}(),NN=function(e){return new ON(e)};function gv(e){return typeof e=="string"&&e!==""}var D="DECISION_SERVICE",CN=function(){function e(t){this.audienceEvaluator=NN(t.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=t.logger,this.userProfileService=t.userProfileService||null}return e.prototype.getVariation=function(t,r,n,i){i===void 0&&(i={});var o=n.getUserId(),a=n.getAttributes(),s=this.getBucketingId(o,a),c=[],u=r.key;if(!this.checkIfExperimentIsActive(t,u))return this.logger.log(w.INFO,T.EXPERIMENT_NOT_RUNNING,D,u),c.push([T.EXPERIMENT_NOT_RUNNING,D,u]),{result:null,reasons:c};var l=this.getForcedVariation(t,u,o);c.push.apply(c,l.reasons);var f=l.result;if(f)return{result:f,reasons:c};var d=this.getWhitelistedVariation(r,o);c.push.apply(c,d.reasons);var p=d.result;if(p)return{result:p.key,reasons:c};var h=i[Xe.IGNORE_USER_PROFILE_SERVICE],v=this.resolveExperimentBucketMap(o,a);if(!h&&(p=this.getStoredVariation(t,r,o,v),p))return this.logger.log(w.INFO,T.RETURNING_STORED_VARIATION,D,p.key,u,o),c.push([T.RETURNING_STORED_VARIATION,D,p.key,u,o]),{result:p.key,reasons:c};var g=this.checkIfUserIsInAudience(t,r,as.EXPERIMENT,n,"");if(c.push.apply(c,g.reasons),!g.result)return this.logger.log(w.INFO,T.USER_NOT_IN_EXPERIMENT,D,o,u),c.push([T.USER_NOT_IN_EXPERIMENT,D,o,u]),{result:null,reasons:c};var m=this.buildBucketerParams(t,r,s,o),I=ml(m);c.push.apply(c,I.reasons);var S=I.result;return S&&(p=t.variationIdMap[S]),p?(this.logger.log(w.INFO,T.USER_HAS_VARIATION,D,o,p.key,u),c.push([T.USER_HAS_VARIATION,D,o,p.key,u]),h||this.saveUserProfile(r,p,o,v),{result:p.key,reasons:c}):(this.logger.log(w.DEBUG,T.USER_HAS_NO_VARIATION,D,o,u),c.push([T.USER_HAS_NO_VARIATION,D,o,u]),{result:null,reasons:c})},e.prototype.resolveExperimentBucketMap=function(t,r){r=r||{};var n=this.getUserProfile(t)||{},i=r[wt.STICKY_BUCKETING_KEY];return re.assign({},n.experiment_bucket_map,i)},e.prototype.checkIfExperimentIsActive=function(t,r){return d0(t,r)},e.prototype.getWhitelistedVariation=function(t,r){var n=[];if(t.forcedVariations&&t.forcedVariations.hasOwnProperty(r)){var i=t.forcedVariations[r];return t.variationKeyMap.hasOwnProperty(i)?(this.logger.log(w.INFO,T.USER_FORCED_IN_VARIATION,D,r,i),n.push([T.USER_FORCED_IN_VARIATION,D,r,i]),{result:t.variationKeyMap[i],reasons:n}):(this.logger.log(w.ERROR,T.FORCED_BUCKETING_FAILED,D,i,r),n.push([T.FORCED_BUCKETING_FAILED,D,i,r]),{result:null,reasons:n})}return{result:null,reasons:n}},e.prototype.checkIfUserIsInAudience=function(t,r,n,i,o){var a=[],s=p0(t,r.id),c=b0(t);this.logger.log(w.DEBUG,T.EVALUATING_AUDIENCES_COMBINED,D,n,o||r.key,JSON.stringify(s)),a.push([T.EVALUATING_AUDIENCES_COMBINED,D,n,o||r.key,JSON.stringify(s)]);var u=this.audienceEvaluator.evaluate(s,c,i);return this.logger.log(w.INFO,T.AUDIENCE_EVALUATION_RESULT_COMBINED,D,n,o||r.key,u.toString().toUpperCase()),a.push([T.AUDIENCE_EVALUATION_RESULT_COMBINED,D,n,o||r.key,u.toString().toUpperCase()]),{result:u,reasons:a}},e.prototype.buildBucketerParams=function(t,r,n,i){return{bucketingId:n,experimentId:r.id,experimentKey:r.key,experimentIdMap:t.experimentIdMap,experimentKeyMap:t.experimentKeyMap,groupIdMap:t.groupIdMap,logger:this.logger,trafficAllocationConfig:g0(t,r.id),userId:i,variationIdMap:t.variationIdMap}},e.prototype.getStoredVariation=function(t,r,n,i){if(i.hasOwnProperty(r.id)){var o=i[r.id],a=o.variation_id;if(t.variationIdMap.hasOwnProperty(a))return t.variationIdMap[o.variation_id];this.logger.log(w.INFO,T.SAVED_VARIATION_NOT_FOUND,D,n,a,r.key)}return null},e.prototype.getUserProfile=function(t){var r={user_id:t,experiment_bucket_map:{}};if(!this.userProfileService)return r;try{return this.userProfileService.lookup(t)}catch(n){this.logger.log(w.ERROR,O.USER_PROFILE_LOOKUP_ERROR,D,t,n.message)}return null},e.prototype.saveUserProfile=function(t,r,n,i){if(this.userProfileService)try{i[t.id]={variation_id:r.id},this.userProfileService.save({user_id:n,experiment_bucket_map:i}),this.logger.log(w.INFO,T.SAVED_VARIATION,D,r.key,t.key,n)}catch(o){this.logger.log(w.ERROR,O.USER_PROFILE_SAVE_ERROR,D,n,o.message)}},e.prototype.getVariationForFeature=function(t,r,n,i){i===void 0&&(i={});var o=[],a=this.getVariationForFeatureExperiment(t,r,n,i);o.push.apply(o,a.reasons);var s=a.result;if(s.variation!==null)return{result:s,reasons:o};var c=this.getVariationForRollout(t,r,n);o.push.apply(o,c.reasons);var u=c.result,l=n.getUserId();return u.variation?(this.logger.log(w.DEBUG,T.USER_IN_ROLLOUT,D,l,r.key),o.push([T.USER_IN_ROLLOUT,D,l,r.key]),{result:u,reasons:o}):(this.logger.log(w.DEBUG,T.USER_NOT_IN_ROLLOUT,D,l,r.key),o.push([T.USER_NOT_IN_ROLLOUT,D,l,r.key]),{result:u,reasons:o})},e.prototype.getVariationForFeatureExperiment=function(t,r,n,i){i===void 0&&(i={});var o=[],a=null,s,c,u;if(r.experimentIds.length>0)for(c=0;c<r.experimentIds.length;c++){var l=m0(t,r.experimentIds[c],this.logger);if(l&&(s=this.getVariationFromExperimentRule(t,r.key,l,n,i),o.push.apply(o,s.reasons),a=s.result,a)){var f=null;return f=l.variationKeyMap[a],f||(f=ul(t,r.key,a)),u={experiment:l,variation:f,decisionSource:ge.FEATURE_TEST},{result:u,reasons:o}}}else this.logger.log(w.DEBUG,T.FEATURE_HAS_NO_EXPERIMENTS,D,r.key),o.push([T.FEATURE_HAS_NO_EXPERIMENTS,D,r.key]);return u={experiment:null,variation:null,decisionSource:ge.FEATURE_TEST},{result:u,reasons:o}},e.prototype.getVariationForRollout=function(t,r,n){var i=[],o;if(!r.rolloutId)return this.logger.log(w.DEBUG,T.NO_ROLLOUT_EXISTS,D,r.key),i.push([T.NO_ROLLOUT_EXISTS,D,r.key]),o={experiment:null,variation:null,decisionSource:ge.ROLLOUT},{result:o,reasons:i};var a=t.rolloutIdMap[r.rolloutId];if(!a)return this.logger.log(w.ERROR,O.INVALID_ROLLOUT_ID,D,r.rolloutId,r.key),i.push([O.INVALID_ROLLOUT_ID,D,r.rolloutId,r.key]),o={experiment:null,variation:null,decisionSource:ge.ROLLOUT},{result:o,reasons:i};var s=a.experiments;if(s.length===0)return this.logger.log(w.ERROR,T.ROLLOUT_HAS_NO_EXPERIMENTS,D,r.rolloutId),i.push([T.ROLLOUT_HAS_NO_EXPERIMENTS,D,r.rolloutId]),o={experiment:null,variation:null,decisionSource:ge.ROLLOUT},{result:o,reasons:i};for(var c,u,l,f,d=0;d<s.length;){if(c=this.getVariationFromDeliveryRule(t,r.key,s,d,n),i.push.apply(i,c.reasons),l=c.result,u=c.skipToEveryoneElse,l)return f=t.experimentIdMap[s[d].id],o={experiment:f,variation:l,decisionSource:ge.ROLLOUT},{result:o,reasons:i};d=u?s.length-1:d+1}return o={experiment:null,variation:null,decisionSource:ge.ROLLOUT},{result:o,reasons:i}},e.prototype.getBucketingId=function(t,r){var n=t;return r!=null&&typeof r=="object"&&r.hasOwnProperty(wt.BUCKETING_ID)&&(typeof r[wt.BUCKETING_ID]=="string"?(n=String(r[wt.BUCKETING_ID]),this.logger.log(w.DEBUG,T.VALID_BUCKETING_ID,D,n)):this.logger.log(w.WARNING,T.BUCKETING_ID_NOT_STRING,D)),n},e.prototype.findValidatedForcedDecision=function(t,r,n,i){var o=[],a=r.getForcedDecision({flagKey:n,ruleKey:i}),s=null,c,u=r.getUserId();return t&&a&&(c=a.variationKey,s=ul(t,n,c),s?i?(this.logger.log(w.INFO,T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,c,n,i,u),o.push([T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,c,n,i,u])):(this.logger.log(w.INFO,T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,c,n,u),o.push([T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,c,n,u])):i?(this.logger.log(w.INFO,T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,i,u),o.push([T.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,i,u])):(this.logger.log(w.INFO,T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,u),o.push([T.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,u]))),{result:s,reasons:o}},e.prototype.removeForcedVariation=function(t,r,n){if(!t)throw new Error(j(O.INVALID_USER_ID,D));if(this.forcedVariationMap.hasOwnProperty(t))delete this.forcedVariationMap[t][r],this.logger.log(w.DEBUG,T.VARIATION_REMOVED_FOR_USER,D,n,t);else throw new Error(j(O.USER_NOT_IN_FORCED_VARIATION,D,t))},e.prototype.setInForcedVariationMap=function(t,r,n){this.forcedVariationMap.hasOwnProperty(t)?this.forcedVariationMap[t][r]=n:(this.forcedVariationMap[t]={},this.forcedVariationMap[t][r]=n),this.logger.log(w.DEBUG,T.USER_MAPPED_TO_FORCED_VARIATION,D,n,r,t)},e.prototype.getForcedVariation=function(t,r,n){var i=[],o=this.forcedVariationMap[n];if(!o)return this.logger.log(w.DEBUG,T.USER_HAS_NO_FORCED_VARIATION,D,n),{result:null,reasons:i};var a;try{var s=ls(t,r);if(s.hasOwnProperty("id"))a=s.id;else return this.logger.log(w.ERROR,O.IMPROPERLY_FORMATTED_EXPERIMENT,D,r),i.push([O.IMPROPERLY_FORMATTED_EXPERIMENT,D,r]),{result:null,reasons:i}}catch(l){return this.logger.log(w.ERROR,l.message),i.push(l.message),{result:null,reasons:i}}var c=o[a];if(!c)return this.logger.log(w.DEBUG,T.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,D,r,n),{result:null,reasons:i};var u=Hh(t,c);return u?(this.logger.log(w.DEBUG,T.USER_HAS_FORCED_VARIATION,D,u,r,n),i.push([T.USER_HAS_FORCED_VARIATION,D,u,r,n])):this.logger.log(w.DEBUG,T.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,D,r,n),{result:u,reasons:i}},e.prototype.setForcedVariation=function(t,r,n,i){if(i!=null&&!gv(i))return this.logger.log(w.ERROR,O.INVALID_VARIATION_KEY,D),!1;var o;try{var a=ls(t,r);if(a.hasOwnProperty("id"))o=a.id;else return this.logger.log(w.ERROR,O.IMPROPERLY_FORMATTED_EXPERIMENT,D,r),!1}catch(c){return this.logger.log(w.ERROR,c.message),!1}if(i==null)try{return this.removeForcedVariation(n,o,r),!0}catch(c){return this.logger.log(w.ERROR,c.message),!1}var s=v0(t,r,i);if(!s)return this.logger.log(w.ERROR,O.NO_VARIATION_FOR_EXPERIMENT_KEY,D,i,r),!1;try{return this.setInForcedVariationMap(n,o,s),!0}catch(c){return this.logger.log(w.ERROR,c.message),!1}},e.prototype.getVariationFromExperimentRule=function(t,r,n,i,o){o===void 0&&(o={});var a=[],s=this.findValidatedForcedDecision(t,i,r,n.key);a.push.apply(a,s.reasons);var c=s.result;if(c)return{result:c.key,reasons:a};var u=this.getVariation(t,n,i,o);a.push.apply(a,u.reasons);var l=u.result;return{result:l,reasons:a}},e.prototype.getVariationFromDeliveryRule=function(t,r,n,i,o){var a=[],s=!1,c=n[i],u=this.findValidatedForcedDecision(t,o,r,c.key);a.push.apply(a,u.reasons);var l=u.result;if(l)return{result:l,reasons:a,skipToEveryoneElse:s};var f=o.getUserId(),d=o.getAttributes(),p=this.getBucketingId(f,d),h=i===n.length-1,v=h?"Everyone Else":i+1,g=null,m,I,S,_=this.checkIfUserIsInAudience(t,c,as.RULE,o,v);return a.push.apply(a,_.reasons),_.result?(this.logger.log(w.DEBUG,T.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,D,f,v),a.push([T.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,D,f,v]),I=this.buildBucketerParams(t,c,p,f),S=ml(I),a.push.apply(a,S.reasons),m=S.result,m&&(g=h0(t,m)),g?(this.logger.log(w.DEBUG,T.USER_BUCKETED_INTO_TARGETING_RULE,D,f,v),a.push([T.USER_BUCKETED_INTO_TARGETING_RULE,D,f,v])):h||(this.logger.log(w.DEBUG,T.USER_NOT_BUCKETED_INTO_TARGETING_RULE,D,f,v),a.push([T.USER_NOT_BUCKETED_INTO_TARGETING_RULE,D,f,v]),s=!0)):(this.logger.log(w.DEBUG,T.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,D,f,v),a.push([T.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,D,f,v])),{result:g,reasons:a,skipToEveryoneElse:s}},e}();function LN(e){return new CN(e)}var fo="EVENT_TAG_UTILS",DN="revenue",xN="value";function mv(e,t){var r=e[DN];if(r==null)return null;var n=typeof r=="string"?parseInt(r):r;return isFinite(n)?(t.log(w.INFO,T.PARSED_REVENUE_VALUE,fo,n),n):(t.log(w.INFO,T.FAILED_TO_PARSE_REVENUE,fo,r),null)}function Ev(e,t){var r=e[xN];if(r==null)return null;var n=typeof r=="string"?parseFloat(r):r;return isFinite(n)?(t.log(w.INFO,T.PARSED_NUMERIC_VALUE,fo,n),n):(t.log(w.INFO,T.FAILED_TO_PARSE_VALUE,fo,r),null)}var yl="ATTRIBUTES_VALIDATOR";function kN(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return Object.keys(e).forEach(function(t){if(typeof e[t]>"u")throw new Error(j(O.UNDEFINED_ATTRIBUTE,yl,t))}),!0;throw new Error(j(O.INVALID_ATTRIBUTES,yl))}function _v(e,t){return typeof e=="string"&&(typeof t=="string"||typeof t=="boolean"||re.isNumber(t)&&re.isSafeInteger(t))}var PN="campaign_activated",bl="custom",yv="https://logx.optimizely.com/v1/events",bv="POST";function Sv(e){var t=e.attributes,r=e.userId,n=e.clientEngine,i=e.clientVersion,o=e.configObj,a=e.logger,s=o.anonymizeIP?o.anonymizeIP:!1,c=o.botFiltering,u={snapshots:[],visitor_id:r,attributes:[]},l={account_id:o.accountId,project_id:o.projectId,visitors:[u],revision:o.revision,client_name:n,client_version:i,anonymize_ip:s,enrich_decisions:!0};return t&&Object.keys(t||{}).forEach(function(f){var d=t[f];if(_v(f,d)){var p=Bh(o,f,a);p&&l.visitors[0].attributes.push({entity_id:p,key:f,type:bl,value:d})}}),typeof c=="boolean"&&l.visitors[0].attributes.push({entity_id:wt.BOT_FILTERING,key:wt.BOT_FILTERING,type:bl,value:c}),l}function UN(e,t,r,n,i,o,a){var s=t?Vh(e,t):null,c=r?Hh(e,r):null;c=c||"";var u={decisions:[{campaign_id:s,experiment_id:t,variation_id:r,metadata:{flag_key:o,rule_key:n,rule_type:i,variation_key:c,enabled:a}}],events:[{entity_id:s,timestamp:re.currentTimestamp(),key:PN,uuid:re.uuid()}]};return u}function MN(e,t,r,n){var i={events:[]},o={entity_id:Gh(e,t),timestamp:re.currentTimestamp(),uuid:re.uuid(),key:t};if(n){var a=mv(n,r);a!==null&&(o.revenue=a);var s=Ev(n,r);s!==null&&(o.value=s),o.tags=n}return i.events.push(o),i}function FN(e){var t=Sv(e),r=UN(e.configObj,e.experimentId,e.variationId,e.ruleKey,e.ruleType,e.flagKey,e.enabled);t.visitors[0].snapshots.push(r);var n={httpVerb:bv,url:yv,params:t};return n}function VN(e){var t=Sv(e),r=MN(e.configObj,e.eventKey,e.logger,e.eventTags);t.visitors[0].snapshots=[r];var n={httpVerb:bv,url:yv,params:t};return n}function ps(e){var t,r;return(r=(t=e.experiment)===null||t===void 0?void 0:t.key)!==null&&r!==void 0?r:""}function hs(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.key)!==null&&r!==void 0?r:""}function Li(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.featureEnabled)!==null&&r!==void 0?r:!1}function wv(e){var t,r;return(r=(t=e.experiment)===null||t===void 0?void 0:t.id)!==null&&r!==void 0?r:null}function Tv(e){var t,r;return(r=(t=e.variation)===null||t===void 0?void 0:t.id)!==null&&r!==void 0?r:null}var vs=fe("EVENT_BUILDER"),BN=function(e){var t=e.configObj,r=e.decisionObj,n=e.userId,i=e.flagKey,o=e.enabled,a=e.userAttributes,s=e.clientEngine,c=e.clientVersion,u=r.decisionSource,l=ps(r),f=wv(r),d=hs(r),p=Tv(r),h=f!==null?Vh(t,f):null;return{type:"impression",timestamp:re.currentTimestamp(),uuid:re.uuid(),user:{id:n,attributes:Iv(t,a)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:s,clientVersion:c,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},layer:{id:h},experiment:{id:f,key:l},variation:{id:p,key:d},ruleKey:l,flagKey:i,ruleType:u,enabled:o}},GN=function(e){var t=e.configObj,r=e.userId,n=e.userAttributes,i=e.clientEngine,o=e.clientVersion,a=e.eventKey,s=e.eventTags,c=Gh(t,a),u=s?mv(s,vs):null,l=s?Ev(s,vs):null;return{type:"conversion",timestamp:re.currentTimestamp(),uuid:re.uuid(),user:{id:r,attributes:Iv(t,n)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:i,clientVersion:o,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},event:{id:c,key:a},revenue:u,value:l,tags:s}};function Iv(e,t){var r=[];return t&&Object.keys(t||{}).forEach(function(n){var i=t[n];if(_v(n,i)){var o=Bh(e,n,vs);o&&r.push({entityId:o,key:n,value:i})}}),r}var zN="EVENT_TAGS_VALIDATOR";function HN(e){if(typeof e=="object"&&!Array.isArray(e)&&e!==null)return!0;throw new Error(j(O.INVALID_EVENT_TAGS,zN))}var La="USER_PROFILE_SERVICE_VALIDATOR";function jN(e){if(typeof e=="object"&&e!==null){if(typeof e.lookup!="function")throw new Error(j(O.INVALID_USER_PROFILE_SERVICE,La,"Missing function 'lookup'"));if(typeof e.save!="function")throw new Error(j(O.INVALID_USER_PROFILE_SERVICE,La,"Missing function 'save'"));return!0}throw new Error(j(O.INVALID_USER_PROFILE_SERVICE,La))}var F="OPTIMIZELY",qN=3e4,KN=function(){function e(t){var r=this,n,i=t.clientEngine;i||(t.logger.log(w.INFO,T.INVALID_CLIENT_ENGINE,F,i),i=Th),this.clientEngine=i,this.clientVersion=t.clientVersion||mu,this.errorHandler=t.errorHandler,this.isOptimizelyConfigValid=t.isValidInstance,this.logger=t.logger,this.odpManager=t.odpManager;var o=(n=t.defaultDecideOptions)!==null&&n!==void 0?n:[];Array.isArray(o)||(this.logger.log(w.DEBUG,T.INVALID_DEFAULT_DECIDE_OPTIONS,F),o=[]);var a={};o.forEach(function(l){Xe[l]?a[l]=!0:r.logger.log(w.WARNING,T.UNRECOGNIZED_DECIDE_OPTION,F,l)}),this.defaultDecideOptions=a,this.projectConfigManager=tN({datafile:t.datafile,jsonSchemaValidator:t.jsonSchemaValidator,sdkKey:t.sdkKey,datafileManager:t.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate(function(l){r.logger.log(w.INFO,T.UPDATED_OPTIMIZELY_CONFIG,F,l.revision,l.projectId),r.notificationCenter.sendNotifications(be.OPTIMIZELY_CONFIG_UPDATE),r.updateOdpSettings()});var s=this.projectConfigManager.onReady(),c=null;if(t.userProfileService)try{jN(t.userProfileService)&&(c=t.userProfileService,this.logger.log(w.INFO,T.VALID_USER_PROFILE_SERVICE,F))}catch(l){this.logger.log(w.WARNING,l.message)}this.decisionService=LN({userProfileService:c,logger:this.logger,UNSTABLE_conditionEvaluators:t.UNSTABLE_conditionEvaluators}),this.notificationCenter=t.notificationCenter,this.eventProcessor=t.eventProcessor;var u=this.eventProcessor.start();this.readyPromise=Promise.all([s,u,t.odpManager?t.odpManager.onReady():Promise.resolve()]).then(function(l){return l[0]}),this.readyTimeouts={},this.nextReadyTimeoutId=0}return e.prototype.getProjectConfig=function(){return this.projectConfigManager.getConfig()},e.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},e.prototype.activate=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"activate"),null;if(!this.validateInputs({experiment_key:t,user_id:r},n))return this.notActivatingExperiment(t,r);var i=this.projectConfigManager.getConfig();if(!i)return null;try{var o=this.getVariation(t,r,n);if(o===null)return this.notActivatingExperiment(t,r);if(!f0(i,t))return this.logger.log(w.DEBUG,T.SHOULD_NOT_DISPATCH_ACTIVATE,F,t),o;var a=ls(i,t),s=a.variationKeyMap[o],c={experiment:a,variation:s,decisionSource:ge.EXPERIMENT};return this.sendImpressionEvent(c,"",r,!0,n),o}catch(u){return this.logger.log(w.ERROR,u.message),this.logger.log(w.INFO,T.NOT_ACTIVATING_USER,F,r,t),this.errorHandler.handleError(u),null}}catch(u){return this.logger.log(w.ERROR,u.message),this.errorHandler.handleError(u),null}},e.prototype.sendImpressionEvent=function(t,r,n,i,o){var a=this.projectConfigManager.getConfig();if(a){var s=BN({decisionObj:t,flagKey:r,enabled:i,userId:n,userAttributes:o,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:a});this.eventProcessor.process(s),this.emitNotificationCenterActivate(t,r,n,i,o)}},e.prototype.emitNotificationCenterActivate=function(t,r,n,i,o){var a=this.projectConfigManager.getConfig();if(a){var s=t.decisionSource,c=ps(t),u=wv(t),l=hs(t),f=Tv(t),d;u!==null&&l!==""&&(d=a.experimentIdMap[u]);var p={attributes:o,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:a,experimentId:u,ruleKey:c,flagKey:r,ruleType:s,userId:n,enabled:i,variationId:f,logger:this.logger},h=FN(p),v;d&&d.variationKeyMap&&l!==""&&(v=d.variationKeyMap[l]),this.notificationCenter.sendNotifications(be.ACTIVATE,{experiment:d,userId:n,attributes:o,variation:v,logEvent:h})}},e.prototype.track=function(t,r,n,i){try{if(!this.isValidInstance()){this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"track");return}if(!this.validateInputs({user_id:r,event_key:t},n,i))return;var o=this.projectConfigManager.getConfig();if(!o)return;if(!S0(o,t)){this.logger.log(w.WARNING,T.EVENT_KEY_NOT_FOUND,F,t),this.logger.log(w.WARNING,T.NOT_TRACKING_USER,F,r);return}i=this.filterEmptyValues(i);var a=GN({eventKey:t,eventTags:i,userId:r,userAttributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o});this.logger.log(w.INFO,T.TRACK_EVENT,F,t,r),this.eventProcessor.process(a),this.emitNotificationCenterTrack(t,r,n,i)}catch(s){this.logger.log(w.ERROR,s.message),this.errorHandler.handleError(s),this.logger.log(w.ERROR,T.NOT_TRACKING_USER,F,r)}},e.prototype.emitNotificationCenterTrack=function(t,r,n,i){try{var o=this.projectConfigManager.getConfig();if(!o)return;var a={attributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,eventKey:t,eventTags:i,logger:this.logger,userId:r},s=VN(a);this.notificationCenter.sendNotifications(be.TRACK,{eventKey:t,userId:r,attributes:n,eventTags:i,logEvent:s})}catch(c){this.logger.log(w.ERROR,c.message),this.errorHandler.handleError(c)}},e.prototype.getVariation=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getVariation"),null;try{if(!this.validateInputs({experiment_key:t,user_id:r},n))return null;var i=this.projectConfigManager.getConfig();if(!i)return null;var o=i.experimentKeyMap[t];if(!o)return this.logger.log(w.DEBUG,O.INVALID_EXPERIMENT_KEY,F,t),null;var a=this.decisionService.getVariation(i,o,this.createInternalUserContext(r,n)).result,s=w0(i,o.id)?pr.FEATURE_TEST:pr.AB_TEST;return this.notificationCenter.sendNotifications(be.DECISION,{type:s,userId:r,attributes:n||{},decisionInfo:{experimentKey:t,variationKey:a}}),a}catch(c){return this.logger.log(w.ERROR,c.message),this.errorHandler.handleError(c),null}}catch(c){return this.logger.log(w.ERROR,c.message),this.errorHandler.handleError(c),null}},e.prototype.setForcedVariation=function(t,r,n){if(!this.validateInputs({experiment_key:t,user_id:r}))return!1;var i=this.projectConfigManager.getConfig();if(!i)return!1;try{return this.decisionService.setForcedVariation(i,t,r,n)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),!1}},e.prototype.getForcedVariation=function(t,r){if(!this.validateInputs({experiment_key:t,user_id:r}))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;try{return this.decisionService.getForcedVariation(n,t,r).result}catch(i){return this.logger.log(w.ERROR,i.message),this.errorHandler.handleError(i),null}},e.prototype.validateInputs=function(t,r,n){try{if(t.hasOwnProperty("user_id")){var i=t.user_id;if(typeof i!="string"||i===null||i==="undefined")throw new Error(j(O.INVALID_INPUT_FORMAT,F,"user_id"));delete t.user_id}return Object.keys(t).forEach(function(o){if(!gv(t[o]))throw new Error(j(O.INVALID_INPUT_FORMAT,F,o))}),r&&kN(r),n&&HN(n),!0}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),!1}},e.prototype.notActivatingExperiment=function(t,r){return this.logger.log(w.INFO,T.NOT_ACTIVATING_USER,F,r,t),null},e.prototype.filterEmptyValues=function(t){for(var r in t)t.hasOwnProperty(r)&&(t[r]===null||t[r]===void 0)&&delete t[r];return t},e.prototype.isFeatureEnabled=function(t,r,n){try{if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:t,user_id:r},n))return!1;var i=this.projectConfigManager.getConfig();if(!i)return!1;var o=Na(i,t,this.logger);if(!o)return!1;var a={},s=this.createInternalUserContext(r,n),c=this.decisionService.getVariationForFeature(i,o,s).result,u=c.decisionSource,l=ps(c),f=hs(c),d=Li(c);u===ge.FEATURE_TEST&&(a={experimentKey:l,variationKey:f}),(u===ge.FEATURE_TEST||u===ge.ROLLOUT&&cl(i))&&this.sendImpressionEvent(c,o.key,r,d,n),d===!0?this.logger.log(w.INFO,T.FEATURE_ENABLED_FOR_USER,F,t,r):(this.logger.log(w.INFO,T.FEATURE_NOT_ENABLED_FOR_USER,F,t,r),d=!1);var p={featureKey:t,featureEnabled:d,source:c.decisionSource,sourceInfo:a};return this.notificationCenter.sendNotifications(be.DECISION,{type:pr.FEATURE,userId:r,attributes:n||{},decisionInfo:p}),d}catch(h){return this.logger.log(w.ERROR,h.message),this.errorHandler.handleError(h),!1}},e.prototype.getEnabledFeatures=function(t,r){var n=this;try{var i=[];if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getEnabledFeatures"),i;if(!this.validateInputs({user_id:t}))return i;var o=this.projectConfigManager.getConfig();return o&&It(o.featureKeyMap).forEach(function(a){n.isFeatureEnabled(a.key,t,r)&&i.push(a.key)}),i}catch(a){return this.logger.log(w.ERROR,a.message),this.errorHandler.handleError(a),[]}},e.prototype.getFeatureVariable=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,null,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariable"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getFeatureVariableForType=function(t,r,n,i,o){if(!this.validateInputs({feature_key:t,variable_key:r,user_id:i},o))return null;var a=this.projectConfigManager.getConfig();if(!a)return null;var s=Na(a,t,this.logger);if(!s)return null;var c=E0(a,t,r,this.logger);if(!c)return null;if(n&&c.type!==n)return this.logger.log(w.WARNING,T.VARIABLE_REQUESTED_WITH_WRONG_TYPE,F,n,c.type),null;var u=this.createInternalUserContext(i,o),l=this.decisionService.getVariationForFeature(a,s,u).result,f=Li(l),d=this.getFeatureVariableValueFromVariation(t,f,l.variation,c,i),p={};return l.decisionSource===ge.FEATURE_TEST&&l.experiment!==null&&l.variation!==null&&(p={experimentKey:l.experiment.key,variationKey:l.variation.key}),this.notificationCenter.sendNotifications(be.DECISION,{type:pr.FEATURE_VARIABLE,userId:i,attributes:o||{},decisionInfo:{featureKey:t,featureEnabled:f,source:l.decisionSource,variableKey:r,variableValue:d,variableType:c.type,sourceInfo:p}}),d},e.prototype.getFeatureVariableValueFromVariation=function(t,r,n,i,o){var a=this.projectConfigManager.getConfig();if(!a)return null;var s=i.defaultValue;if(n!==null){var c=_0(a,i,n,this.logger);c!==null?r?(s=c,this.logger.log(w.INFO,T.USER_RECEIVED_VARIABLE_VALUE,F,s,i.key,t)):this.logger.log(w.INFO,T.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,F,t,o,s):this.logger.log(w.INFO,T.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,F,i.key,n.key)}else this.logger.log(w.INFO,T.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,F,o,i.key,t);return y0(s,i.type,this.logger)},e.prototype.getFeatureVariableBoolean=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,je.BOOLEAN,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariableBoolean"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getFeatureVariableDouble=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,je.DOUBLE,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariableDouble"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getFeatureVariableInteger=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,je.INTEGER,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariableInteger"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getFeatureVariableString=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,je.STRING,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariableString"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getFeatureVariableJSON=function(t,r,n,i){try{return this.isValidInstance()?this.getFeatureVariableForType(t,r,je.JSON,n,i):(this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getFeatureVariableJSON"),null)}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),null}},e.prototype.getAllFeatureVariables=function(t,r,n){var i=this;try{if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:t,user_id:r},n))return null;var o=this.projectConfigManager.getConfig();if(!o)return null;var a=Na(o,t,this.logger);if(!a)return null;var s=this.createInternalUserContext(r,n),c=this.decisionService.getVariationForFeature(o,a,s).result,u=Li(c),l={};a.variables.forEach(function(d){l[d.key]=i.getFeatureVariableValueFromVariation(t,u,c.variation,d,r)});var f={};return c.decisionSource===ge.FEATURE_TEST&&c.experiment!==null&&c.variation!==null&&(f={experimentKey:c.experiment.key,variationKey:c.variation.key}),this.notificationCenter.sendNotifications(be.DECISION,{type:pr.ALL_FEATURE_VARIABLES,userId:r,attributes:n||{},decisionInfo:{featureKey:t,featureEnabled:u,source:c.decisionSource,variableValues:l,sourceInfo:f}}),l}catch(d){return this.logger.log(w.ERROR,d.message),this.errorHandler.handleError(d),null}},e.prototype.getOptimizelyConfig=function(){try{var t=this.projectConfigManager.getConfig();return t?this.projectConfigManager.getOptimizelyConfig():null}catch(r){return this.logger.log(w.ERROR,r.message),this.errorHandler.handleError(r),null}},e.prototype.close=function(){var t=this,r;try{this.odpManager&&this.odpManager.stop(),this.notificationCenter.clearAllNotificationListeners();var n=(r=this.projectConfigManager.getConfig())===null||r===void 0?void 0:r.sdkKey;n&&Uh.removeNotificationCenter(n);var i=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach(function(o){var a=t.readyTimeouts[o];clearTimeout(a.readyTimeout),a.onClose()}),this.readyTimeouts={},i.then(function(){return{success:!0}},function(o){return{success:!1,reason:String(o)}})}catch(o){return this.logger.log(w.ERROR,o.message),this.errorHandler.handleError(o),Promise.resolve({success:!1,reason:String(o)})}},e.prototype.onReady=function(t){var r=this,n;typeof t=="object"&&t!==null&&t.timeout!==void 0&&(n=t.timeout),re.isSafeInteger(n)||(n=qN);var i,o=new Promise(function(l){i=l}),a=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var s=function(){delete r.readyTimeouts[a],i({success:!1,reason:j("onReady timeout expired after %s ms",n)})},c=setTimeout(s,n),u=function(){i({success:!1,reason:"Instance closed"})};return this.readyTimeouts[a]={readyTimeout:c,onClose:u},this.readyPromise.then(function(){clearTimeout(c),delete r.readyTimeouts[a],i({success:!0})}),Promise.race([this.readyPromise,o])},e.prototype.createUserContext=function(t,r){var n,i=t??((n=this.odpManager)===null||n===void 0?void 0:n.getVuid());return i===void 0||!this.validateInputs({user_id:i},r)?null:new gl({optimizely:this,userId:i,attributes:r,shouldIdentifyUser:!0})},e.prototype.createInternalUserContext=function(t,r){return new gl({optimizely:this,userId:t,attributes:r,shouldIdentifyUser:!1})},e.prototype.decide=function(t,r,n){var i=this,o,a,s,c;n===void 0&&(n=[]);var u=t.getUserId(),l=t.getAttributes(),f=this.projectConfigManager.getConfig(),d=[],p;if(!this.isValidInstance()||!f)return this.logger.log(w.INFO,T.INVALID_OBJECT,F,"decide"),vl(r,t,[ss.SDK_NOT_READY]);var h=f.featureKeyMap[r];if(!h)return this.logger.log(w.ERROR,O.FEATURE_NOT_IN_DATAFILE,F,r),vl(r,t,[j(ss.FLAG_KEY_INVALID,r)]);var v=this.getAllDecideOptions(n),g=this.decisionService.findValidatedForcedDecision(f,t,r);d.push.apply(d,g.reasons);var m=g.result;if(m)p={experiment:null,variation:m,decisionSource:ge.FEATURE_TEST};else{var I=this.decisionService.getVariationForFeature(f,h,t,v);d.push.apply(d,I.reasons),p=I.result}var S=p.decisionSource,_=(a=(o=p.experiment)===null||o===void 0?void 0:o.key)!==null&&a!==void 0?a:null,E=(c=(s=p.variation)===null||s===void 0?void 0:s.key)!==null&&c!==void 0?c:null,y=Li(p);y===!0?this.logger.log(w.INFO,T.FEATURE_ENABLED_FOR_USER,F,r,u):this.logger.log(w.INFO,T.FEATURE_NOT_ENABLED_FOR_USER,F,r,u);var b={},R=!1;v[Xe.EXCLUDE_VARIABLES]||h.variables.forEach(function(ie){b[ie.key]=i.getFeatureVariableValueFromVariation(r,y,p.variation,ie,u)}),!v[Xe.DISABLE_DECISION_EVENT]&&(S===ge.FEATURE_TEST||S===ge.ROLLOUT&&cl(f))&&(this.sendImpressionEvent(p,r,u,y,l),R=!0);var N=v[Xe.INCLUDE_REASONS],x=[];N&&(x=d.map(function(ie){return j.apply(void 0,rn([ie[0]],ie.slice(1),!1))}));var J={flagKey:r,enabled:y,variationKey:E,ruleKey:_,variables:b,reasons:x,decisionEventDispatched:R};return this.notificationCenter.sendNotifications(be.DECISION,{type:pr.FLAG,userId:u,attributes:l,decisionInfo:J}),{variationKey:E,enabled:y,variables:b,ruleKey:_,flagKey:r,userContext:t,reasons:x}},e.prototype.getAllDecideOptions=function(t){var r=this,n=Ke({},this.defaultDecideOptions);return Array.isArray(t)?t.forEach(function(i){Xe[i]?n[i]=!0:r.logger.log(w.WARNING,T.UNRECOGNIZED_DECIDE_OPTION,F,i)}):this.logger.log(w.DEBUG,T.INVALID_DECIDE_OPTIONS,F),n},e.prototype.decideForKeys=function(t,r,n){var i=this;n===void 0&&(n=[]);var o={};if(!this.isValidInstance())return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"decideForKeys"),o;if(r.length===0)return o;var a=this.getAllDecideOptions(n);return r.forEach(function(s){var c=i.decide(t,s,n);(!a[Xe.ENABLED_FLAGS_ONLY]||c.enabled)&&(o[s]=c)}),o},e.prototype.decideAll=function(t,r){r===void 0&&(r=[]);var n=this.projectConfigManager.getConfig(),i={};if(!this.isValidInstance()||!n)return this.logger.log(w.ERROR,T.INVALID_OBJECT,F,"decideAll"),i;var o=Object.keys(n.featureKeyMap);return this.decideForKeys(t,o,r)},e.prototype.updateOdpSettings=function(){var t=this.projectConfigManager.getConfig();t&&this.odpManager&&this.odpManager.updateSettings(t.odpIntegrationConfig)},e.prototype.sendOdpEvent=function(t,r,n,i){if(!this.odpManager){this.logger.error(O.ODP_EVENT_FAILED_ODP_MANAGER_MISSING);return}var o=r??uo,a=new Map(n);if(n&&n.size>0)try{n.forEach(function(c,u){(Oh===u.toLowerCase()||Ze.FS_USER_ID===u.toLowerCase())&&(a.delete(u),a.set(Ze.FS_USER_ID,c))})}catch{this.logger.warn(T.ODP_SEND_EVENT_IDENTIFIER_CONVERSION_FAILED)}try{var s=new lo(o,t,a,i);this.odpManager.sendEvent(s)}catch(c){this.logger.error(O.ODP_EVENT_FAILED,c)}},e.prototype.isOdpIntegrated=function(){var t,r,n;return(n=(r=(t=this.projectConfigManager.getConfig())===null||t===void 0?void 0:t.odpIntegrationConfig)===null||r===void 0?void 0:r.integrated)!==null&&n!==void 0?n:!1},e.prototype.identifyUser=function(t){this.odpManager&&this.isOdpIntegrated()&&this.odpManager.identifyUser(t)},e.prototype.fetchQualifiedSegments=function(t,r){return ce(this,void 0,void 0,function(){return le(this,function(n){switch(n.label){case 0:return this.odpManager?[4,this.odpManager.fetchQualifiedSegments(t,r)]:[2,null];case 1:return[2,n.sent()]}})})},e.prototype.getVuid=function(){var t;if(!this.odpManager){(t=this.logger)===null||t===void 0||t.error("Unable to get VUID - ODP Manager is not instantiated yet.");return}if(!this.odpManager.isVuidEnabled()){this.logger.log(w.WARNING,"getVuid() unavailable for this platform",F);return}return this.odpManager.getVuid()},e}(),$N={parseUserAgentInfo:function(){var e=new zR.UAParser,t=e.getResult(),r=t.os,n=t.device;return{os:r,device:n}}};function WN(){return $N}var YN=Object.freeze({__proto__:null,get LogLevel(){return L},getLogger:fe,setLogHandler:wh,LOG_LEVEL:w,createLogger:Eu}),_t=fe();Ar.setLogHandler(Eu());Ar.setLogLevel(L.INFO);var XN="INDEX_BROWSER",Sl=10,wl=1e3,JN=1e4,gs=!1,Av=function(e){var t;try{var r=!1;e.errorHandler&&jR(e.errorHandler),e.logger&&(Ar.setLogHandler(e.logger),Ar.setLogLevel(L.NOTSET)),e.logLevel!==void 0&&Ar.setLogLevel(e.logLevel);try{Lh.validate(e),r=!0}catch(g){_t.error(g)}var n=void 0;e.eventDispatcher==null?(n=new Ch({eventDispatcher:qo}),gs||(n.sendPendingEvents(),gs=!0)):n=e.eventDispatcher;var i=e.closingEventDispatcher;!e.eventDispatcher&&!i&&window.navigator&&"sendBeacon"in window.navigator&&(i=Dh);var o=e.eventBatchSize,a=e.eventFlushInterval;il.validateEventBatchSize(e.eventBatchSize)||(_t.warn("Invalid eventBatchSize %s, defaulting to %s",e.eventBatchSize,Sl),o=Sl),il.validateEventFlushInterval(e.eventFlushInterval)||(_t.warn("Invalid eventFlushInterval %s, defaulting to %s",e.eventFlushInterval,wl),a=wl);var s=Eh(),c=kh({logger:_t,errorHandler:s}),u={dispatcher:n,closingDispatcher:i,flushInterval:a,batchSize:o,maxQueueSize:e.eventMaxQueueSize||JN,notificationCenter:c},l=((t=e.odpOptions)===null||t===void 0?void 0:t.disabled)===!0;l&&_t.info(T.ODP_DISABLED);var f=e.clientEngine,d=e.clientVersion,p=Ke(Ke({clientEngine:gu},e),{eventProcessor:VO.createEventProcessor(u),logger:_t,errorHandler:s,datafileManager:e.sdkKey?T0(e.sdkKey,_t,e.datafile,e.datafileOptions):void 0,notificationCenter:c,isValidInstance:r,odpManager:l?void 0:$0.createInstance({logger:_t,odpOptions:e.odpOptions,clientEngine:f,clientVersion:d})}),h=new KN(p);try{if(typeof window.addEventListener=="function"){var v="onpagehide"in window?"pagehide":"unload";window.addEventListener(v,function(){h.close()},!1)}}catch(g){_t.error(T.UNABLE_TO_ATTACH_UNLOAD,XN,g.message)}return h}catch(g){return _t.error(g),null}},ZN=function(){gs=!1},QN=Ar.setLogHandler,eC=Ar.setLogLevel;Ke(Ke({},YN),{logging:xO,errorHandler:RO,eventDispatcher:qo,sendBeaconEventDispatcher:Dh,enums:uO,setLogger:QN,setLogLevel:eC,createInstance:Av,__internalResetRetryState:ZN,OptimizelyDecideOption:Xe,getUserAgentParser:WN});var po={necessary:!0,marketing:!1,statistics:!1,preferences:!1};function Rv(e,t){const r=e.split(";").map(n=>n.split(/=(.*)/)).find(([n])=>n.trim()===t);return r?decodeURIComponent(r[1]):null}var tC=class{constructor(e){this.cookie=e}parseCookieByKey(e){try{const t=Rv(this.cookie,e);if(!t)return null;const r=JSON.parse(t.replace(/(\w+):/g,'"$1":'));return{necessary:!0,statistics:!!r.statistics,marketing:!!r.marketing,preferences:!!r.preferences}}catch{return null}}},Sr,rC=(Sr=class{constructor(t){ae(this,"consent",po);ae(this,"cookieParser");this.cookieParser=new tC(t),this.consent=this.cookieParser.parseCookieByKey(Sr.CONSENT_COOKIE_KEY)??po}get isNecessaryConsentGiven(){return!0}get isStatisticsConsentGiven(){var t;return!!((t=this.consent)!=null&&t.statistics)}get isPreferencesConsentGiven(){var t;return!!((t=this.consent)!=null&&t.preferences)}get isMarketingConsentGiven(){var t;return!!((t=this.consent)!=null&&t.marketing)}subscribe(t){}unsubscribe(t){}},ae(Sr,"CONSENT_COOKIE_KEY","CookieConsent"),Sr),nC=class Ov{constructor(t){this.cookie=t}static get consentTranslation(){return{C0001:"necessary",C0002:"preferences",C0003:"statistics",C0004:"marketing"}}toConsentMap(t){const r={necessary:!1,statistics:!1,marketing:!1,preferences:!1},n=Ov.consentTranslation;return t.split(",").forEach(i=>{const[o,a]=i.split(":"),s=n[o];r[s]=a==="1"}),r}parseCookieByKey(t){try{const r=Rv(this.cookie,t),n=r==null?void 0:r.match(/groups=([^&]+)/);return n?this.toConsentMap(n[1]):null}catch{return null}}},iC=()=>typeof window<"u",wr,oC=(wr=class{constructor(t){ae(this,"consent",po);ae(this,"callbacks",new Set);ae(this,"cookieParser");ae(this,"sdkLoaded");this.cookieParser=new nC(t),this.consent=this.cookieParser.parseCookieByKey(wr.CONSENT_COOKIE_KEY)??po,iC()&&(this.sdkLoaded=new Promise(r=>{window.addEventListener("optanon-loaded",()=>{r()})}),this.initializeListener())}get isNecessaryConsentGiven(){return!0}get isStatisticsConsentGiven(){var t;return!!((t=this.consent)!=null&&t.statistics)}get isPreferencesConsentGiven(){var t;return!!((t=this.consent)!=null&&t.preferences)}get isMarketingConsentGiven(){var t;return!!((t=this.consent)!=null&&t.marketing)}updateConsents(){var t;const r=(t=window.OptanonActiveGroups)==null?void 0:t.split(",");r&&(this.consent.necessary=(r==null?void 0:r.includes("C0001"))??this.consent.necessary,this.consent.preferences=(r==null?void 0:r.includes("C0002"))??this.consent.preferences,this.consent.statistics=(r==null?void 0:r.includes("C0003"))??this.consent.statistics,this.consent.marketing=(r==null?void 0:r.includes("C0004"))??this.consent.marketing,this.callbacks.forEach(n=>n(this.consent)))}initializeListener(){var t;(t=this.sdkLoaded)==null||t.then(()=>{var r;const n=()=>this.updateConsents.call(this);n.toString=()=>Math.floor(Math.random()*4294967295).toString(16).padStart(8,"0"),(r=window.OneTrust)==null||r.OnConsentChanged(n)})}subscribe(t){this.callbacks.add(t)}unsubscribe(t){if(!t){this.callbacks.clear();return}this.callbacks.has(t)&&this.callbacks.delete(t)}},ae(wr,"CONSENT_COOKIE_KEY","OptanonConsent"),wr);function aC({cookie:e,headers:t}={}){return ks(t)?new rC(e||""):new oC(e||"")}var ui=e=>e.split(";").reduce((t,r)=>{const[n,i]=r.trim().split("=");return{...t,[n]:i}},{}),sC=e=>{switch(!0){case(e==="true"||e==="false"):return e==="true"||!1;case!Number.isNaN(Number(e)):return Number(e);default:return String(e)}},Di=null,uC=class Nv{constructor(){this.pendingEvents=[]}get pending(){return this.pendingEvents}static getInstance(){return Di||(Di=new Nv,Di)}addEvent(t){this.pendingEvents.push(t)}emptyQueue(t){this.pendingEvents.splice(0).forEach(n=>{const{event:i,attributes:o,tags:a}=n;try{t(i,o,a)}catch{}})}},Tl=()=>typeof document<"u"&&document.kauflandExtensionEnabled,Il=(e,t,r=!1)=>{const n={experimentId:e,variant:t||void 0,createdAtUrl:document.location.href,...r&&{isDummy:!0}};return document.createComment(`KBE: ${JSON.stringify(n)}`)},Al=(e,t,r)=>{typeof window<"u"&&(r?console.info(`KBE: Experiment: ${e} is forced with variation ${t||"default"}.`):console.error(`KBE: Error on ${e} with variation ${t||"default"}.`))},cC=()=>{if(typeof window<"u")try{const e=window.document.cookie,t=ui(e)["x-kbe"];if(t)return JSON.parse(t.toString())}catch{console.error("KBE: error while parsing cookie")}},lC="AB-optimizely__device_type",dC="AB-optimizely__",fC="AB-optimizely_user",pC="https://api.cloud.kaufland-pp.de/uts/o/v1/df-json/",hC="https://api.cloud.kaufland.de/uts/o/v1/df-json/",vC="http://main-bff.unified-tracking-frontend.svc.cluster.local/uts/o/v1/df-json/",Cv="https://api.cloud.kaufland.de/uts/o/v1/events",Lv="https://api.cloud.kaufland-pp.de/uts/o/v1/events",gC="x-storefront",mC="mopOptimizelyData",EC="placeholder-sdk-key",_C={version:"4",rollouts:[],typedAudiences:[],anonymizeIP:!1,projectId:"12345",variables:[],featureFlags:[],experiments:[],audiences:[],groups:[],attributes:[],botFiltering:!1,accountId:"12345",events:[],revision:"1"},Rl={flagKey:"fallback-flag-key",variationKey:null,variables:{},reasons:[],ruleKey:null,enabled:!1,userContext:null},yC=(e,t)=>()=>{var i;let r="";if(typeof window<"u")r=window.document.cookie;else return null;const n=fC;return((i=ui(r)[n])==null?void 0:i.toString())||null},bC="optimizelyDatafile",SC=async()=>typeof window<"u"?window[bC]??null:null,wC=e=>()=>({dispatchEvent:(t,r)=>{let n="";const{environment:i,customUrl:o}=e;i&&(n=i==="production"?Cv:Lv),o&&(n=o),qo.dispatchEvent({...t,url:n},r)}}),Dv=e=>()=>({dispatchEvent:(t,r)=>{let n="";const{params:i}=t,{environment:o,customUrl:a}=e;if(o&&(n=o==="production"?Cv:Lv),a&&(n=a),navigator.sendBeacon){const s=navigator.sendBeacon(n,JSON.stringify(i));return r({statusCode:s?204:400})}qo.dispatchEvent({...t,url:n},r)}}),TC=(e,t)=>()=>{let r="";const n=dC;if(typeof window<"u")r=window.document.cookie;else return{};return Object.entries(ui(r)).reduce((i,[o,a])=>o.startsWith(n)?{...i,[o.replace(n,"")]:sC(a)}:i,{})},IC=e=>()=>{let t;return typeof window<"u"?t=window.navigator.userAgent:t=null,{user_agent:t}},AC=(e,t)=>()=>{let r="";const n=lC;if(typeof window<"u")r=window.document.cookie;else return!1;return ui(r)[n]==="bot"},RC=e=>typeof window>"u"?Promise.resolve():new Promise(t=>{const{cookie:r}=window.document,n=aC({cookie:r,eventBus:e}),i=()=>{n.isStatisticsConsentGiven&&(t(),n.unsubscribe(i))};n.isStatisticsConsentGiven?t():n.subscribe(i)}),Ol=e=>e?{[gC]:e}:{},OC=e=>()=>{if(typeof window<"u"){const t=ui(window.document.cookie)[bR];return Ol(t==null?void 0:t.toString())}return Ol()},xv=(e=>(e[e.NOTSET=0]="NOTSET",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR",e))(xv||{}),NC=class jr{constructor(t){this.testingClientConfiguration=t,this._queue=uC.getInstance(),this._optimizelyClient=null,this._ready=!1,this._userId=null,this._activatedTests=new Array,this._instanceAttributes={},this._isBot=!1,this._isSuspensionResolved=!1,this._init=this.startInit(),this._impressionSuspension=(this.testingClientConfiguration.impressionSuspension??Promise.resolve()).then(()=>(this._isSuspensionResolved=!0,Promise.resolve()))}get optimizelyClient(){if(!this._optimizelyClient)throw new Error("Optimizely client not ready");return this._optimizelyClient}get userId(){var t,r;return this._userId||(this._userId=((r=(t=this.provider)==null?void 0:t.userIdProvider)==null?void 0:r.call(t))??""),this._userId}set userId(t){this._userId=t}get activatedTests(){return this._activatedTests}get defaultAttributes(){return{...this.computeUserAttributesProvider(),environment:this.environment,userId:this._userId}}get clientIsBot(){return this._isBot}static get isClient(){return typeof window<"u"}get canActivate(){return jr.isClient&&!this.clientIsBot}get isSuspensionResolved(){return this._isSuspensionResolved}get isReady(){return this._ready}get instanceAttributes(){return this._instanceAttributes}set instanceAttributes(t){this._instanceAttributes=t}get environment(){return this.testingClientConfiguration.environment}get provider(){return this.testingClientConfiguration.provider}get options(){var t;return(t=this.testingClientConfiguration)==null?void 0:t.options}get sdkKey(){var t;return(t=this.testingClientConfiguration)==null?void 0:t.sdkKey}get eventBus(){var t;return(t=this.testingClientConfiguration)==null?void 0:t.eventBus}getUserId(t){var n;const r=((n=t==null?void 0:t.userId)==null?void 0:n.toString())||this.userId;return r||""}isActivatableClient(t){return this.isOptimizelyClientReady(t)&&this.canActivate}isOptimizelyClientReady(t){return!!(this._ready&&this.optimizelyClient&&this.getUserId(t))}async startInit(){var i;const{datafile:t,instanceConfig:r}=await this.resolveProviders();let n={...r};n.odpOptions={disabled:!0},n=this.configureInstanceDataProvider(t,n),n=this.configureInstanceConfigOptions(n),jr.canCreateInstance(n)&&(this._optimizelyClient=Av(n),await((i=this._optimizelyClient)==null?void 0:i.onReady()),this._queue.emptyQueue(this.track)),this._ready=!0,this.handleKauflandExtensionInit()}handleKauflandExtensionInit(){if(Tl()){const t=cC();t&&this.setForcedVariationForExtension({experimentMapVariation:t})}}static canCreateInstance(t){return!!(t.datafile||t.sdkKey)}configureInstanceDataProvider(t,r){var i;const n={...r};return t?n.datafile=t:this.sdkKey===!0?(n.sdkKey=EC,n.datafileOptions={autoUpdate:!0,updateInterval:1e3*60*5,...((i=this.options)==null?void 0:i.datafileOptions)??{},urlTemplate:this.resolveUrlTemplate()}):typeof this.sdkKey=="string"?n.sdkKey=this.sdkKey:(n.datafile=_C,this._ready=!0),n}resolveUrlTemplate(){var t;return!jr.isClient&&((t=this.options)!=null&&t.useInternalUrl)?vC:this.environment==="production"?hC:pC}resolveDefaultEventDispatcher(){return jr.isClient?Dv({environment:this.environment})():wC({environment:this.environment})()}configureInstanceConfigOptions(t){var n;if(!this.options)return t;const r=Up(t,this.options);return((n=this.options)==null?void 0:n.logLevel)===0&&(r.logger={log:()=>null}),r}async resolveProviders(){var n,i,o;const t={},r=await this.getDatafile();return(n=this.provider)!=null&&n.botDetectionProvider&&(this._isBot=this.provider.botDetectionProvider()),t.eventDispatcher=((o=(i=this.provider)==null?void 0:i.eventDispatcherProvider)==null?void 0:o.call(i))??this.resolveDefaultEventDispatcher(),{instanceConfig:t,datafile:r}}async getDatafile(){var r,n;if(!((r=this.provider)!=null&&r.datafileProvider))return null;const t=this.provider.datafileProvider();if(!(t instanceof Promise))return t;try{return await this.rejectPromiseAfterThreshold(t,((n=this.options)==null?void 0:n.pendingRequestTimeout)||1500)}catch(i){console.error("Could not fetch datafile",i)}return null}computeUserAttributesProvider(){var t,r;return((r=(t=this.provider)==null?void 0:t.userAttributeProviders)==null?void 0:r.reduce((n,i)=>{let o={};try{o=i()}catch{}return n={...n,...o},n},{}))??{}}async rejectPromiseAfterThreshold(t,r){return new Promise((n,i)=>{const o=setTimeout(()=>{clearTimeout(o),i(`Promise did not resolve after ${r}ms`)},r);t.then(a=>{clearTimeout(o),n(a)}).catch(()=>{clearTimeout(o),n(null)})})}updateActivatedTests(t){return this._activatedTests.find(n=>n.experiment===t.experiment&&n.variation===t.variation)?!1:(this.activatedTests.push(t),this.updateGloballyExposedActivatedTests(),!0)}updateGloballyExposedActivatedTests(){jr.isClient&&(window[mC]=this._activatedTests.map(t=>({optimizely_experiment_id:t.experiment,optimizely_variant_id:t.variation})))}isFeatureTest(t){var n,i,o;const r=(i=(n=this.optimizelyClient.getProjectConfig())==null?void 0:n.featureFlags)==null?void 0:i.find(a=>a.key===t);return!!((o=r==null?void 0:r.experimentIds)!=null&&o.length)}getFeatureDecisionObject(t,r){const n=this.optimizelyClient.createUserContext(this.getUserId(r),this.computeAttributes(r));if(!n)return{experiment:{key:null},variation:{key:null,featureEnabled:!1},variables:{}};const i=n.decide(t,[Xe.DISABLE_DECISION_EVENT]),{ruleKey:o,enabled:a,variationKey:s}=i,c=this.isFeatureTest(t);return{experiment:{key:c?o:null},variation:{featureEnabled:a,key:c?s:null},variables:i.variables}}onReady(){return this._init}computeAttributes(t){return{...this.defaultAttributes,...this._instanceAttributes??{},...t??{}}}activate(t,r,n){if(Tl()){const o=this.getVariation(t);if(n){const a=Il(t,o);n.appendChild(a)}else{const a=Il(t,o,!0);document.body.appendChild(a)}}if(!this.isOptimizelyClientReady(r))return null;const i=this.computeAttributes(r);if(!this.canActivate)return this.getVariation(t,i)??null;if(this.isSuspensionResolved){const o=this.optimizelyClient.activate(t,this.getUserId(i),i);return this.updateAfterActivateExperiment(t,o),o}return this._impressionSuspension.then(()=>{const o=this.optimizelyClient.activate(t,this.getUserId(r),i);this.updateAfterActivateExperiment(t,o)}),this.getVariation(t,i)??null}isFeatureEnabled(t,r){const n=this.getDecisionObject(t,r),i=this.isFeatureTest(t),o=i?n.ruleKey:"",a=i?n.variationKey:"";if(this.canActivate){if(this.isSuspensionResolved)return this.enableFeature(t,o,a,r);this._impressionSuspension.then(()=>{this.enableFeature(t,o,a,r)})}return n.enabled??!1}enableFeature(t,r,n,i){var o;return r&&n&&this.updateAfterActivateExperiment(r,n),((o=this.makeDecision(t,i))==null?void 0:o.enabled)??!1}updateAfterActivateExperiment(t,r){if(!r)return;this.updateActivatedTests({experiment:t,variation:r})&&this.dispatchEvent("ab:activated",{activated:{experiment:t,variation:r},all:this.activatedTests})}getVariation(t,r){return this.isOptimizelyClientReady(r)?Array.isArray(t)?t.map(n=>({experiment:n,variation:this.optimizelyClient.getVariation(n,this.getUserId(r),this.computeAttributes(r))??null})):this.optimizelyClient.getVariation(t,this.getUserId(r),this.computeAttributes(r))??null:null}getFeatureVariable(t,r,n){return this.isOptimizelyClientReady(n)?this.optimizelyClient.getFeatureVariable(t,r,this.getUserId(n),this.computeAttributes(n))??null:null}getFeatureVariableString(t,r,n){return this.isOptimizelyClientReady(n)?this.optimizelyClient.getFeatureVariableString(t,r,this.getUserId(n),this.computeAttributes(n))??null:null}getFeatureVariableBoolean(t,r,n){return this.isOptimizelyClientReady(n)?this.optimizelyClient.getFeatureVariableBoolean(t,r,this.getUserId(n),this.computeAttributes(n))??null:null}normalizeTags(t){if(!t)return;const r=(window==null?void 0:window.web_analytics_exchange_rate)??1;return Object.entries(t).reduce((n,[i,o])=>{let a=o;return i==="revenue"&&(a=o?parseInt(o.toString())*r:0),n[i]=a,n},{})}getDecisionObject(t,r){return this.makeDecision(t,r,!1)}decide(t,r){const n=this.makeDecision(t,r,!1);return this.isSuspensionResolved?(this.updateImpressionAfterDecision(t,r),n):(this._impressionSuspension.then(()=>{this.updateImpressionAfterDecision(t,r)}),n)}updateImpressionAfterDecision(t,r){if(!this.canActivate)return;const n=this.makeDecision(t,r),{ruleKey:i,variationKey:o}=n;i&&this.updateAfterActivateExperiment(i,o)}createUserContext(t){return this.optimizelyClient.createUserContext(this.getUserId(t),this.computeAttributes(t))}makeDecision(t,r,n=!0){if(!this.isOptimizelyClientReady(r))return Rl;const i=this.createUserContext(r),o=[];return n||o.push(Xe.DISABLE_DECISION_EVENT),(i==null?void 0:i.decide(t,o))||Rl}trackEvent(t,r,n){return this.optimizelyClient.track(t,this.getUserId(r),r,this.normalizeTags(n)),this.dispatchEvent("ab:track",t)}track(t,r,n){if(!this.isActivatableClient(r))return;const i=this.computeAttributes(r);if(this.isSuspensionResolved)return this.trackEvent(t,i,n);this._impressionSuspension.then(()=>{this.trackEvent(t,i,n)})}setForcedVariation(t,r,n){return this.isOptimizelyClientReady(n)?this.optimizelyClient.setForcedVariation(t,this.getUserId(n),r):!1}async close(){return this.optimizelyClient.close()}dispatchEvent(t,r){var n;(n=this.eventBus)==null||n.emit(t,r)}setForcedVariationForExtension(t){const{experiment:r,experimentMapVariation:n}=t;if(n&&!r){Object.keys(n).map(a=>{const s=n[a],c=this.setForcedVariation(a,s);Al(a,s,c)});return}if(!r||!n[r])return;const i=n[r],o=this.setForcedVariation(r,i);Al(r,i,o)}},CC=Object.create,kv=Object.defineProperty,LC=Object.getOwnPropertyDescriptor,DC=Object.getOwnPropertyNames,xC=Object.getPrototypeOf,kC=Object.prototype.hasOwnProperty,PC=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),UC=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of DC(t))!kC.call(e,i)&&i!==r&&kv(e,i,{get:()=>t[i],enumerable:!(n=LC(t,i))||n.enumerable});return e},MC=(e,t,r)=>(r=e!=null?CC(xC(e)):{},UC(!e||!e.__esModule?kv(r,"default",{value:e,enumerable:!0}):r,e)),FC=PC((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=r||self).consola=n()})(e,function(){function r(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function n(_,E){for(var y=0;y<E.length;y++){var b=E[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}function i(_,E,y){return E&&n(_.prototype,E),_}function o(_,E,y){return E in _?Object.defineProperty(_,E,{value:y,enumerable:!0,configurable:!0,writable:!0}):_[E]=y,_}function a(_,E){var y=Object.keys(_);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(_);E&&(b=b.filter(function(R){return Object.getOwnPropertyDescriptor(_,R).enumerable})),y.push.apply(y,b)}return y}function s(_){for(var E=1;E<arguments.length;E++){var y=arguments[E]!=null?arguments[E]:{};E%2?a(Object(y),!0).forEach(function(b){o(_,b,y[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(y)):a(Object(y)).forEach(function(b){Object.defineProperty(_,b,Object.getOwnPropertyDescriptor(y,b))})}return _}function c(_){return function(E){if(Array.isArray(E))return l(E)}(_)||function(E){if(typeof Symbol<"u"&&Symbol.iterator in Object(E))return Array.from(E)}(_)||u(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function u(_,E){if(_){if(typeof _=="string")return l(_,E);var y=Object.prototype.toString.call(_).slice(8,-1);return y==="Object"&&_.constructor&&(y=_.constructor.name),y==="Map"||y==="Set"?Array.from(_):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?l(_,E):void 0}}function l(_,E){(E==null||E>_.length)&&(E=_.length);for(var y=0,b=new Array(E);y<E;y++)b[y]=_[y];return b}function f(_){if(typeof Symbol>"u"||_[Symbol.iterator]==null){if(Array.isArray(_)||(_=u(_))){var E=0,y=function(){};return{s:y,n:function(){return E>=_.length?{done:!0}:{done:!1,value:_[E++]}},e:function(J){throw J},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b,R,N=!0,x=!1;return{s:function(){b=_[Symbol.iterator]()},n:function(){var J=b.next();return N=J.done,J},e:function(J){x=!0,R=J},f:function(){try{N||b.return==null||b.return()}finally{if(x)throw R}}}}var d={};d[d.Fatal=0]="Fatal",d[d.Error=0]="Error",d[d.Warn=1]="Warn",d[d.Log=2]="Log",d[d.Info=3]="Info",d[d.Success=3]="Success",d[d.Debug=4]="Debug",d[d.Trace=5]="Trace",d[d.Silent=-1/0]="Silent",d[d.Verbose=1/0]="Verbose";var p={silent:{level:-1},fatal:{level:d.Fatal},error:{level:d.Error},warn:{level:d.Warn},log:{level:d.Log},info:{level:d.Info},success:{level:d.Success},debug:{level:d.Debug},trace:{level:d.Trace},verbose:{level:d.Trace},ready:{level:d.Info},start:{level:d.Info}};function h(_){return E=_,Object.prototype.toString.call(E)==="[object Object]"&&!(!_.message&&!_.args)&&!_.stack;var E}var v=!1,g=[],m=function(){function _(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var y in r(this,_),this._reporters=E.reporters||[],this._types=E.types||p,this.level=E.level!==void 0?E.level:3,this._defaults=E.defaults||{},this._async=E.async!==void 0?E.async:void 0,this._stdout=E.stdout,this._stderr=E.stderr,this._mockFn=E.mockFn,this._throttle=E.throttle||1e3,this._throttleMin=E.throttleMin||5,this._types){var b=s(s({type:y},this._types[y]),this._defaults);this[y]=this._wrapLogFn(b),this[y].raw=this._wrapLogFn(b,!0)}this._mockFn&&this.mockTypes(),this._lastLogSerialized=void 0,this._lastLog=void 0,this._lastLogTime=void 0,this._lastLogCount=0,this._throttleTimeout=void 0}return i(_,[{key:"create",value:function(E){return new _(Object.assign({reporters:this._reporters,level:this.level,types:this._types,defaults:this._defaults,stdout:this._stdout,stderr:this._stderr,mockFn:this._mockFn},E))}},{key:"withDefaults",value:function(E){return this.create({defaults:Object.assign({},this._defaults,E)})}},{key:"withTag",value:function(E){return this.withDefaults({tag:this._defaults.tag?this._defaults.tag+":"+E:E})}},{key:"addReporter",value:function(E){return this._reporters.push(E),this}},{key:"removeReporter",value:function(E){if(E){var y=this._reporters.indexOf(E);if(y>=0)return this._reporters.splice(y,1)}else this._reporters.splice(0);return this}},{key:"setReporters",value:function(E){return this._reporters=Array.isArray(E)?E:[E],this}},{key:"wrapAll",value:function(){this.wrapConsole(),this.wrapStd()}},{key:"restoreAll",value:function(){this.restoreConsole(),this.restoreStd()}},{key:"wrapConsole",value:function(){for(var E in this._types)console["__"+E]||(console["__"+E]=console[E]),console[E]=this[E].raw}},{key:"restoreConsole",value:function(){for(var E in this._types)console["__"+E]&&(console[E]=console["__"+E],delete console["__"+E])}},{key:"wrapStd",value:function(){this._wrapStream(this.stdout,"log"),this._wrapStream(this.stderr,"log")}},{key:"_wrapStream",value:function(E,y){var b=this;E&&(E.__write||(E.__write=E.write),E.write=function(R){b[y].raw(String(R).trim())})}},{key:"restoreStd",value:function(){this._restoreStream(this.stdout),this._restoreStream(this.stderr)}},{key:"_restoreStream",value:function(E){E&&E.__write&&(E.write=E.__write,delete E.__write)}},{key:"pauseLogs",value:function(){v=!0}},{key:"resumeLogs",value:function(){v=!1;var E,y=f(g.splice(0));try{for(y.s();!(E=y.n()).done;){var b=E.value;b[0]._logFn(b[1],b[2])}}catch(R){y.e(R)}finally{y.f()}}},{key:"mockTypes",value:function(E){if(this._mockFn=E||this._mockFn,typeof this._mockFn=="function")for(var y in this._types)this[y]=this._mockFn(y,this._types[y])||this[y],this[y].raw=this[y]}},{key:"_wrapLogFn",value:function(E,y){var b=this;return function(){for(var R=arguments.length,N=new Array(R),x=0;x<R;x++)N[x]=arguments[x];if(!v)return b._logFn(E,N,y);g.push([b,E,N,y])}}},{key:"_logFn",value:function(E,y,b){var R=this;if(E.level>this.level)return!!this._async&&Promise.resolve(!1);var N=Object.assign({date:new Date,args:[]},E);!b&&y.length===1&&h(y[0])?Object.assign(N,y[0]):N.args=Array.from(y),N.message&&(N.args.unshift(N.message),delete N.message),N.additional&&(Array.isArray(N.additional)||(N.additional=N.additional.split(`
`)),N.args.push(`
`+N.additional.join(`
`)),delete N.additional),N.type=typeof N.type=="string"?N.type.toLowerCase():"",N.tag=typeof N.tag=="string"?N.tag.toLowerCase():"";var x=function(){var Ce=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Nt=R._lastLogCount-R._throttleMin;if(R._lastLog&&Nt>0){var tt=c(R._lastLog.args);Nt>1&&tt.push("(repeated ".concat(Nt," times)")),R._log(s(s({},R._lastLog),{},{args:tt})),R._lastLogCount=1}if(Ce){if(R._lastLog=N,R._async)return R._logAsync(N);R._log(N)}};clearTimeout(this._throttleTimeout);var J=this._lastLogTime?N.date-this._lastLogTime:0;if(this._lastLogTime=N.date,J<this._throttle)try{var ie=JSON.stringify([N.type,N.tag,N.args]),_e=this._lastLogSerialized===ie;if(this._lastLogSerialized=ie,_e&&(this._lastLogCount++,this._lastLogCount>this._throttleMin))return void(this._throttleTimeout=setTimeout(x,this._throttle))}catch{}x(!0)}},{key:"_log",value:function(E){var y,b=f(this._reporters);try{for(b.s();!(y=b.n()).done;)y.value.log(E,{async:!1,stdout:this.stdout,stderr:this.stderr})}catch(R){b.e(R)}finally{b.f()}}},{key:"_logAsync",value:function(E){var y=this;return Promise.all(this._reporters.map(function(b){return b.log(E,{async:!0,stdout:y.stdout,stderr:y.stderr})}))}},{key:"stdout",get:function(){return this._stdout||console._stdout}},{key:"stderr",get:function(){return this._stderr||console._stderr}}]),_}();m.prototype.add=m.prototype.addReporter,m.prototype.remove=m.prototype.removeReporter,m.prototype.clear=m.prototype.removeReporter,m.prototype.withScope=m.prototype.withTag,m.prototype.mock=m.prototype.mockTypes,m.prototype.pause=m.prototype.pauseLogs,m.prototype.resume=m.prototype.resumeLogs;var I,S=function(){function _(E){r(this,_),this.options=Object.assign({},E),this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}return i(_,[{key:"log",value:function(E){var y=E.level<1?console.__error||console.error:E.level===1&&console.warn?console.__warn||console.warn:console.__log||console.log,b=E.type!=="log"?E.type:"",R=E.tag?E.tag:"",N=this.typeColorMap[E.type]||this.levelColorMap[E.level]||this.defaultColor,x=`
      background: `.concat(N,`;
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `),J="%c".concat([R,b].filter(Boolean).join(":"));typeof E.args[0]=="string"?y.apply(void 0,["".concat(J,"%c ").concat(E.args[0]),x,""].concat(c(E.args.slice(1)))):y.apply(void 0,[J,x].concat(c(E.args)))}}]),_}();return typeof window<"u"&&window.consola||((I=new m({reporters:[new S]})).Consola=m,I.LogLevel=d,I.BrowserReporter=S,I)})}),VC=MC(FC()),Pv=class Uv{constructor(t,r){this.all=new Map,this.logger=t??VC.default,this.namespace=r??Uv.GLOBAL_NAMESPACE}get eventHandlerNamespaceMap(){return this.all}get eventHandlerMap(){return this.all.get(this.namespace)}getHandlerNamespace(t){return this.all.get(t)||this.all.set(t,new Map),this.all.get(t)}getHandlers(t,r){let n=this.getHandlerNamespace(t);return n!=null&&n.get(r)||n==null||n.set(r,[]),n==null?void 0:n.get(r)}on(t,r,n){(Array.isArray(t)?t:Array.of(t)).forEach(i=>{let o=n??this.namespace,a=this.getHandlers(o,i);a==null||a.push(r)})}off(t,r,n){(Array.isArray(t)?t:Array.of(t)).forEach(i=>{let o=n??this.namespace,a=this.getHandlers(o,i);a!=null&&a.length&&a.splice(a.indexOf(r)>>>0,1)})}emit(t,r={}){this.all.forEach(n=>{var i,o;((i=n==null?void 0:n.get(t))!=null?i:[]).slice().map(a=>{try{a(r,t)}catch(s){this.logger.warn(`handler for "${String(t)}" failed with`,s)}}),((o=n==null?void 0:n.get("*"))!=null?o:[]).slice().map(a=>{try{a(t,r)}catch(s){this.logger.warn(`handler for "${String(t)}" failed with`,s)}})})}clear(t){let r=t??this.namespace;this.all.get(r)&&this.all.set(r,new Map)}clearAll(){this.all=new Map}};Pv.GLOBAL_NAMESPACE="global";var BC=Pv,GC=e=>e.replace(/[^\w_]/g,"_"),zC=(e,t)=>{e.on("ab:activated",r=>{const n=r,i=GC(n.activated.experiment);t.addFeatureFlagEvaluation(i,n.activated.variation)})};function Mv(){window.globalEventBus||(window.globalEventBus=new BC),zC(window.globalEventBus,Qt)}function HC(){return Mv(),window.globalEventBus}const Nl=window.APP_SHELL_CONFIG.OPTIMIZELY_ENVIRONMENT,Cl=HC(),kt=new NC({environment:Nl,eventBus:Cl,options:{logLevel:xv.ERROR},provider:{datafileProvider:SC,userIdProvider:yC(),eventDispatcherProvider:Dv({environment:Nl}),botDetectionProvider:AC(),userAttributeProviders:[TC(),IC(),OC()]},impressionSuspension:RC(Cl)}),ho=()=>{kt.track("fft_app-shell_user-interaction"),document.removeEventListener("mousemove",ho),document.removeEventListener("scroll",ho)};document.addEventListener("mousemove",ho);document.addEventListener("scroll",ho);kt.onReady().then(()=>{kt.isFeatureEnabled(AI),kt.isFeatureEnabled(RI),kt.isFeatureEnabled(OI),kt.isFeatureEnabled(NI),kt.isFeatureEnabled(CI)});const Ll=15e3,qi=new Map,jC=e=>({mount(t){const r=t.shadowRoot||t.attachShadow({mode:"open"});r.innerHTML=e}}),qC=e=>{const t=e.split("/");return t[t.length-1].slice(0,-5)},KC=Object.assign({"./loaders/default.html":RR,"./loaders/homepage.html":OR,"./loaders/search.html":NR}),$C=Object.fromEntries(Object.entries(KC).map(([e,t])=>[qC(e),jC(t)])),WC=e=>$C[e.loader||"default"],YC=e=>"singleSpa"in e&&!!e.singleSpa&&"singleSpaTrigger"in e&&typeof e.singleSpaTrigger=="string",XC=e=>{const t=document.querySelector(`.as-loader__container[data-app-name="${e.name}"]`);t&&(WC(e).mount(t),t.classList.remove("as-loader__container--hidden")),qi.set(e.name,window.setTimeout(()=>{kt.track("fft_app-shell_loading-timeout"),Qt.addError("App loading timeout",{app:e.name,timeout:Ll}),window.location.reload()},Ll))},JC=e=>{const t=e?`.as-loader__container[data-app-name="${e}"]`:".as-loader__container:not(.as-loader__container--hidden)";document.querySelectorAll(t).forEach(i=>{i.classList.add("as-loader__container--hidden"),i.shadowRoot&&(i.shadowRoot.innerHTML="")}),(e?[e]:Array.from(qi.keys())).forEach(i=>{const o=qi.get(i);clearTimeout(o),qi.delete(i)})},ZC=e=>{const t=document.getElementById(`single-spa-application:${e}`);t&&(t.dataset.mounted="true",t.classList.remove("as-app--hidden"))},QC=e=>{const t=document.getElementById(`single-spa-application:${e}`);t&&t.dataset.mounted!=="true"&&t.classList.add("as-app--hidden")},Dl=e=>e.detail.appsByNewStatus.NOT_MOUNTED.length===0,eL=()=>{window.addEventListener("single-spa:before-app-change",e=>{if(Dl(e))return;const{oldUrl:t,appsByNewStatus:r}=e.detail,n=r.NOT_MOUNTED[0],i=r.MOUNTED;i.length!==0&&(LR(n,t),window.scroll(0,0),i.forEach(o=>{const a=Nr(o);XC(a)}))}),window.addEventListener("single-spa:app-change",e=>{if(Dl(e))return;e.detail.appsByNewStatus.MOUNTED.forEach(r=>QC(r))}),window.addEventListener("single-spa:app-change",e=>{const{appsByNewStatus:t,newUrl:r,originalEvent:n}=e.detail;n&&YC(n)&&DR(r),t.MOUNTED.forEach(i=>{const o=Nr(i),a=o.routeName?Fp.get(o.routeName):void 0;a!=null&&a.notifiesWhenMounted||document.dispatchEvent(new CustomEvent("app-shell:application-mounted",{detail:{appName:o.name}}))})}),document.addEventListener("app-shell:application-mounted",e=>{var t,r;(t=e==null?void 0:e.detail)!=null&&t.hideLoader&&setTimeout(()=>{e.detail.appName&&ZC(e.detail.appName),JC(e.detail.appName)}),(r=e==null?void 0:e.detail)!=null&&r.restoreScrollPosition&&setTimeout(xR)})};var tL=Object.freeze({__proto__:null,get start(){return ag},get ensureJQuerySupport(){return Zv},get setBootstrapMaxTime(){return aL},get setMountMaxTime(){return Wv},get setUnmountMaxTime(){return sL},get setUnloadMaxTime(){return uL},get registerApplication(){return tg},get unregisterApplication(){return rg},get getMountedApps(){return Xo},get getAppStatus(){return eg},get unloadApplication(){return ng},get checkActivityFunctions(){return wu},get getAppNames(){return Su},get pathToActiveWhen(){return Tu},get navigateToUrl(){return go},get patchHistoryApi(){return Jv},get triggerAppChange(){return ig},get addErrorHandler(){return Fv},get removeErrorHandler(){return Vv},get mountRootParcel(){return bu},get NOT_LOADED(){return Pt},get LOADING_SOURCE_CODE(){return $o},get NOT_BOOTSTRAPPED(){return on},get BOOTSTRAPPING(){return Bv},get NOT_MOUNTED(){return Ut},get MOUNTING(){return Gv},get UPDATING(){return zv},get LOAD_ERROR(){return an},get MOUNTED(){return lt},get UNLOADING(){return Es},get UNMOUNTING(){return Hv},get SKIP_BECAUSE_BROKEN(){return me}}),xl=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}).CustomEvent,ms=function(){try{var e=new xl("cat",{detail:{foo:"bar"}});return e.type==="cat"&&e.detail.foo==="bar"}catch{}return!1}()?xl:typeof document<"u"&&typeof document.createEvent=="function"?function(e,t){var r=document.createEvent("CustomEvent");return t?r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):r.initCustomEvent(e,!1,!1,void 0),r}:function(e,t){var r=document.createEventObject();return r.type=e,t?(r.bubbles=!!t.bubbles,r.cancelable=!!t.cancelable,r.detail=t.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r};let Xn=[];function or(e,t,r){const n=nn(e,t,r);Xn.length?Xn.forEach(i=>i(n)):setTimeout(()=>{throw n})}function Fv(e){if(typeof e!="function")throw Error(M(28));Xn.push(e)}function Vv(e){if(typeof e!="function")throw Error(M(29));let t=!1;return Xn=Xn.filter(r=>{const n=r===e;return t=t||n,!n}),t}function M(e,t,...r){return`single-spa minified message #${e}: See https://single-spa.js.org/error/?code=${e}${r.length?`&arg=${r.join("&arg=")}`:""}`}function nn(e,t,r){const n=`${Wo(t)} '${ee(t)}' died in status ${t.status}: `;let i;if(e instanceof Error){try{e.message=n+e.message}catch{}i=e}else{console.warn(M(30,!1,t.status,ee(t)));try{i=Error(n+JSON.stringify(e))}catch{i=e}}return i.appOrParcelName=ee(t),t.status=r,i}const Pt="NOT_LOADED",$o="LOADING_SOURCE_CODE",on="NOT_BOOTSTRAPPED",Bv="BOOTSTRAPPING",Ut="NOT_MOUNTED",Gv="MOUNTING",lt="MOUNTED",zv="UPDATING",Hv="UNMOUNTING",Es="UNLOADING",an="LOAD_ERROR",me="SKIP_BECAUSE_BROKEN";function rL(e){return e.status===lt}function _s(e){try{return e.activeWhen(window.location)}catch(t){return or(t,e,me),!1}}function ee(e){return e.name}function jv(e){return!!e.unmountThisParcel}function Wo(e){return jv(e)?"parcel":"application"}function ci(){for(let e=arguments.length-1;e>0;e--)for(let t in arguments[e])t!=="__proto__"&&(arguments[e-1][t]=arguments[e][t]);return arguments[0]}function li(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return e[r];return null}function br(e){return e&&(typeof e=="function"||(t=e,Array.isArray(t)&&!li(t,r=>typeof r!="function")));var t}function Jt(e,t){let r=e[t]||[];r=Array.isArray(r)?r:[r],r.length===0&&(r=[()=>Promise.resolve()]);const n=Wo(e),i=ee(e);return function(o){return r.reduce((a,s,c)=>a.then(()=>{const u=s(o);return qv(u)?u:Promise.reject(M(15,!1,n,i,t,c))}),Promise.resolve())}}function qv(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}let nL=[];function yu(e,t){return Promise.resolve().then(()=>e.status!==on?e:(e.status=Bv,e.bootstrap?di(e,"bootstrap").then(r).catch(n=>{if(t)throw nn(n,e,me);return or(n,e,me),e}):Promise.resolve().then(r)));function r(){return e.status=Ut,e}}function Yo(e,t){return Promise.resolve().then(()=>{if(e.status!==lt)return e;e.status=Hv;const r=Object.keys(e.parcels).map(i=>e.parcels[i].unmountThisParcel());return Promise.all(r).then(n,i=>n().then(()=>{const o=Error(i.message);if(t)throw nn(o,e,me);or(o,e,me)})).then(()=>e);function n(){return di(e,"unmount").then(()=>{e.status=Ut},i=>{if(t)throw nn(i,e,me);or(i,e,me)})}})}let kl=!1,Pl=!1;function ys(e,t){return Promise.resolve().then(()=>e.status!==Ut?e:(kl||(window.dispatchEvent(new ms("single-spa:before-first-mount")),kl=!0),e.status=Gv,di(e,"mount").then(()=>(e.status=lt,Pl||(window.dispatchEvent(new ms("single-spa:first-mount")),Pl=!0),e)).catch(r=>{return e.status=lt,Yo(e,!0).then(n,n);function n(){if(t)throw nn(r,e,me);return or(r,e,me),e}})))}let iL=0;const oL={parcels:{}};function bu(){return Kv.apply(oL,arguments)}function Kv(e,t){const r=this;if(!e||typeof e!="object"&&typeof e!="function")throw Error(M(2));if(e.name&&typeof e.name!="string")throw Error(M(3,!1,typeof e.name));const n=iL++;let i=e.name||`parcel-${n}`;if(typeof t!="object")throw Error(M(4,!1,i,typeof t));if(!t.domElement)throw Error(M(5,!1,i));const o=typeof e=="function",a=o?e:()=>Promise.resolve(e),s={id:n,parcels:{},status:o?$o:on,customProps:t,parentName:ee(r),unmountThisParcel:()=>f.then(()=>{if(s.status!==lt)throw Error(M(6,!1,i,s.status));return Yo(s,!0)}).then(v=>(s.parentName&&delete r.parcels[s.id],v)).then(v=>(d(v),v)).catch(v=>{throw s.status=me,p(v),v})};let c;r.parcels[n]=s;let u=a();if(!u||typeof u.then!="function")throw Error(M(7));u=u.then(v=>{if(!v)throw Error(M(8));if(i=v.name||`parcel-${n}`,Object.prototype.hasOwnProperty.call(v,"bootstrap")&&!br(v.bootstrap))throw Error(M(9,!1,i));if(!br(v.mount))throw Error(M(10,!1,i));if(!br(v.unmount))throw Error(M(11,!1,i));if(v.update&&!br(v.update))throw Error(M(12,!1,i));const g=Jt(v,"bootstrap"),m=Jt(v,"mount"),I=Jt(v,"unmount");s.status=on,s.name=i,s.bootstrap=g,s.mount=m,s.unmount=I,s.timeouts=Yv(v.timeouts),v.update&&(s.update=Jt(v,"update"),c.update=function(S){return s.customProps=S,dr((_=s,Promise.resolve().then(()=>{if(_.status!==lt)throw Error(M(32,!1,ee(_)));return _.status=zv,di(_,"update").then(()=>(_.status=lt,_)).catch(E=>{throw nn(E,_,me)})})));var _})});const l=u.then(()=>yu(s,!0)),f=l.then(()=>ys(s,!0));let d,p;const h=new Promise((v,g)=>{d=v,p=g});return c={mount:()=>dr(Promise.resolve().then(()=>{if(s.status!==Ut)throw Error(M(13,!1,i,s.status));return r.parcels[n]=s,ys(s)})),unmount:()=>dr(s.unmountThisParcel()),getStatus:()=>s.status,loadPromise:dr(u),bootstrapPromise:dr(l),mountPromise:dr(f),unmountPromise:dr(h)},c}function dr(e){return e.then(()=>null)}function $v(e){const t=ee(e);let r=typeof e.customProps=="function"?e.customProps(t,window.location):e.customProps;(typeof r!="object"||r===null||Array.isArray(r))&&(r={},console.warn(M(40),t,r));const n=ci({},r,{name:t,mountParcel:Kv.bind(e),singleSpa:tL});return jv(e)&&(n.unmountSelf=e.unmountThisParcel),n}const sn={bootstrap:{millis:4e3,dieOnTimeout:!1,warningMillis:1e3},mount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unmount:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},unload:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3},update:{millis:3e3,dieOnTimeout:!1,warningMillis:1e3}};function aL(e,t,r){if(typeof e!="number"||e<=0)throw Error(M(16));sn.bootstrap={millis:e,dieOnTimeout:t,warningMillis:r||1e3}}function Wv(e,t,r){if(typeof e!="number"||e<=0)throw Error(M(17));sn.mount={millis:e,dieOnTimeout:t,warningMillis:r||1e3}}function sL(e,t,r){if(typeof e!="number"||e<=0)throw Error(M(18));sn.unmount={millis:e,dieOnTimeout:t,warningMillis:r||1e3}}function uL(e,t,r){if(typeof e!="number"||e<=0)throw Error(M(19));sn.unload={millis:e,dieOnTimeout:t,warningMillis:r||1e3}}function di(e,t){const r=e.timeouts[t],n=r.warningMillis,i=Wo(e);return new Promise((o,a)=>{let s=!1,c=!1;e[t]($v(e)).then(f=>{s=!0,o(f)}).catch(f=>{s=!0,a(f)}),setTimeout(()=>l(1),n),setTimeout(()=>l(!0),r.millis);const u=M(31,!1,t,i,ee(e),r.millis);function l(f){if(!s){if(f===!0)c=!0,r.dieOnTimeout?a(Error(u)):console.error(u);else if(!c){const d=f,p=d*n;console.warn(u),p+n<r.millis&&setTimeout(()=>l(d+1),n)}}}})}function Yv(e){const t={};for(let r in sn)t[r]=ci({},sn[r],e&&e[r]||{});return t}function bs(e){return Promise.resolve().then(()=>{if(e.loadPromise)return e.loadPromise;if(e.status!==Pt&&e.status!==an)return e;let t,r;return e.status=$o,e.loadPromise=Promise.resolve().then(()=>{const n=e.loadApp($v(e));if(!qv(n))throw r=!0,Error(M(33,!1,ee(e)));return n.then(i=>{let o;e.loadErrorTime=null,t=i,typeof t!="object"&&(o=34),Object.prototype.hasOwnProperty.call(t,"bootstrap")&&!br(t.bootstrap)&&(o=35),br(t.mount)||(o=36),br(t.unmount)||(o=37);const a=Wo(t);if(o){let s;try{s=JSON.stringify(t)}catch{}return console.error(M(o,!1,a,ee(e),s),t),or(void 0,e,me),e}return t.devtools&&t.devtools.overlays&&(e.devtools.overlays=ci({},e.devtools.overlays,t.devtools.overlays)),e.status=on,e.bootstrap=Jt(t,"bootstrap"),e.mount=Jt(t,"mount"),e.unmount=Jt(t,"unmount"),e.unload=Jt(t,"unload"),e.timeouts=Yv(t.timeouts),delete e.loadPromise,e})}).catch(n=>{let i;return delete e.loadPromise,r?i=me:(i=an,e.loadErrorTime=new Date().getTime()),or(n,e,i),e})})}const _n=typeof window<"u",Cn={hashchange:[],popstate:[]},vo=["hashchange","popstate"];function go(e){let t;if(typeof e=="string")t=e;else if(this&&this.href)t=this.href;else{if(!(e&&e.currentTarget&&e.currentTarget.href&&e.preventDefault))throw Error(M(14));t=e.currentTarget.href,e.preventDefault()}const r=Bl(window.location.href),n=Bl(t);t.indexOf("#")===0?window.location.hash=n.hash:r.host!==n.host&&n.host?window.location.href=t:n.pathname===r.pathname&&n.search===r.search?window.location.hash=n.hash:window.history.pushState(null,null,t)}function Ul(e){if(e){const t=e[0].type;vo.indexOf(t)>=0&&Cn[t].forEach(r=>{try{r.apply(this,e)}catch(n){setTimeout(()=>{throw n})}})}}let Xv;function Ml(){ar([],arguments)}function Fl(e,t){return function(){const r=window.location.href,n=e.apply(this,arguments),i=window.location.href;return Xv&&r===i||window.dispatchEvent(cL(window.history.state,t)),n}}function cL(e,t){let r;try{r=new PopStateEvent("popstate",{state:e})}catch{r=document.createEvent("PopStateEvent"),r.initPopStateEvent("popstate",!1,!1,e)}return r.singleSpa=!0,r.singleSpaTrigger=t,r}let Ss=null,Vl=!1;function Jv(e){if(Vl)throw Error(M(43));Xv=!e||!e.hasOwnProperty("urlRerouteOnly")||e.urlRerouteOnly,Vl=!0,Ss=window.history.replaceState,window.addEventListener("hashchange",Ml),window.addEventListener("popstate",Ml);const t=window.addEventListener,r=window.removeEventListener;window.addEventListener=function(n,i){if(!(typeof i=="function"&&vo.indexOf(n)>=0)||li(Cn[n],o=>o===i))return t.apply(this,arguments);Cn[n].push(i)},window.removeEventListener=function(n,i){if(!(typeof i=="function"&&vo.indexOf(n)>=0))return r.apply(this,arguments);Cn[n]=Cn[n].filter(o=>o!==i)},window.history.pushState=Fl(window.history.pushState,"pushState"),window.history.replaceState=Fl(Ss,"replaceState")}function Bl(e){const t=document.createElement("a");return t.href=e,t}_n&&(window.singleSpaNavigate?console.warn(M(41)):window.singleSpaNavigate=go);let Gl=!1;function Zv(e=window.jQuery){if(e||window.$&&window.$.fn&&window.$.fn.jquery&&(e=window.$),e&&!Gl){const t=e.fn.on,r=e.fn.off;e.fn.on=function(n,i){return zl.call(this,t,window.addEventListener,n,i,arguments)},e.fn.off=function(n,i){return zl.call(this,r,window.removeEventListener,n,i,arguments)},Gl=!0}}function zl(e,t,r,n,i){return typeof r!="string"?e.apply(this,i):(r.split(/\s+/).forEach(o=>{vo.indexOf(o)>=0&&(t(o,n),r=r.replace(o,""))}),r.trim()===""?this:e.apply(this,i))}const un={};function ws(e){return Promise.resolve().then(()=>{const t=un[ee(e)];if(!t)return e;if(e.status===Pt)return Hl(e,t),e;if(e.status===Es)return t.promise.then(()=>e);if(e.status!==Ut&&e.status!==an)return e;const r=e.status===an?Promise.resolve():di(e,"unload");return e.status=Es,r.then(()=>(Hl(e,t),e)).catch(n=>(function(i,o,a){delete un[ee(i)],delete i.bootstrap,delete i.mount,delete i.unmount,delete i.unload,or(a,i,me),o.reject(a)}(e,t,n),e))})}function Hl(e,t){delete un[ee(e)],delete e.bootstrap,delete e.mount,delete e.unmount,delete e.unload,e.status=Pt,t.resolve()}function jl(e,t,r,n){un[ee(e)]={app:e,resolve:r,reject:n},Object.defineProperty(un[ee(e)],"promise",{get:t})}function Qv(e){return un[e]}const dt=[];function Xo(){return dt.filter(rL).map(ee)}function Su(){return dt.map(ee)}function eg(e){const t=li(dt,r=>ee(r)===e);return t?t.status:null}let ql=!1;function tg(e,t,r,n){const i=function(o,a,s,c){const u={name:null,loadApp:null,activeWhen:null,customProps:null};return typeof o=="object"?(function(f){if(Array.isArray(f)||f===null)throw Error(M(39));const d=["name","app","activeWhen","customProps"],p=Object.keys(f).reduce((v,g)=>d.indexOf(g)>=0?v:v.concat(g),[]);if(p.length!==0)throw Error(M(38,!1,d.join(", "),p.join(", ")));if(typeof f.name!="string"||f.name.length===0||typeof f.app!="object"&&typeof f.app!="function")throw Error(M(20));const h=v=>typeof v=="string"||typeof v=="function";if(!(h(f.activeWhen)||Array.isArray(f.activeWhen)&&f.activeWhen.every(h)))throw Error(M(24));if(!$l(f.customProps))throw Error(M(22))}(o),u.name=o.name,u.loadApp=o.app,u.activeWhen=o.activeWhen,u.customProps=o.customProps):(function(f,d,p,h){if(typeof f!="string"||f.length===0)throw Error(M(20));if(!d)throw Error(M(23));if(typeof p!="function")throw Error(M(24));if(!$l(h))throw Error(M(22))}(o,a,s,c),u.name=o,u.loadApp=a,u.activeWhen=s,u.customProps=c),u.loadApp=typeof(l=u.loadApp)!="function"?()=>Promise.resolve(l):l,u.customProps=function(f){return f||{}}(u.customProps),u.activeWhen=function(f){let d=Array.isArray(f)?f:[f];return d=d.map(p=>typeof p=="function"?p:Tu(p)),p=>d.some(h=>h(p))}(u.activeWhen),u;var l}(e,t,r,n);if(Ts()||ql||(ql=!0,setTimeout(()=>{Ts()||console.warn(M(1))},5e3)),Su().indexOf(i.name)!==-1)throw Error(M(21,!1,i.name));dt.push(ci({loadErrorTime:null,status:Pt,parcels:{},devtools:{overlays:{options:{},selectors:[]}}},i)),_n&&(Zv(),ar())}function wu(e=window.location){return dt.filter(t=>t.activeWhen(e)).map(ee)}function rg(e){if(dt.filter(t=>ee(t)===e).length===0)throw Error(M(25,!1,e));return(_n?ng(e,{waitForUnmount:!1}):Promise.resolve()).then(()=>{const t=dt.map(ee).indexOf(e);dt.splice(t,1)})}function ng(e,t={waitForUnmount:!1}){if(typeof e!="string")throw Error(M(26));const r=li(dt,i=>ee(i)===e);if(!r)throw Error(M(27,!1,e));const n=Qv(ee(r));if(t&&t.waitForUnmount){if(n)return n.promise;{const i=new Promise((o,a)=>{jl(r,()=>i,o,a)});return i}}{let i;return n?(i=n.promise,Kl(r,n.resolve,n.reject)):i=new Promise((o,a)=>{jl(r,()=>i,o,a),Kl(r,o,a)}),i}}function Kl(e,t,r){Promise.resolve().then(()=>{if(li(wu(),n=>n===ee(e)))return ig()}).then(()=>Yo(e).then(ws).then(()=>{t(),setTimeout(()=>{ar()})})).catch(r)}function $l(e){return!e||typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)}function Tu(e,t){const r=function(n,i){let o=0,a=!1,s="^";n[0]!=="/"&&(n="/"+n);for(let u=0;u<n.length;u++){const l=n[u];(!a&&l===":"||a&&l==="/")&&c(u)}return c(n.length),new RegExp(s,"i");function c(u){const l=n.slice(o,u).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");if(s+=a?"[^/]+/?":l,u===n.length)if(a)i&&(s+="$");else{const f=i?"":".*";s=s.charAt(s.length-1)==="/"?`${s}${f}$`:`${s}(/${f})?(#.*)?$`}a=!a,o=u}}(e,t);return n=>{let i=n.origin;i||(i=`${n.protocol}//${n.host}`);const o=n.href.replace(i,"").replace(n.search,"").replace(n.hash,"").split("?")[0];return r.test(o)}}let xi=!1,ki=[],Da=_n&&window.location.href;function ig(){return ar()}function ar(e=[],t,r=!1){if(xi)return new Promise((g,m)=>{ki.push({resolve:g,reject:m,eventArguments:t})});const{appsToUnload:n,appsToUnmount:i,appsToLoad:o,appsToMount:a}=function(){const g=[],m=[],I=[],S=[],_=new Date().getTime();return dt.forEach(E=>{const y=E.status!==me&&_s(E);switch(E.status){case an:y&&_-E.loadErrorTime>=200&&I.push(E);break;case Pt:case $o:y&&I.push(E);break;case on:case Ut:!y&&Qv(ee(E))?g.push(E):y&&S.push(E);break;case lt:y||m.push(E)}}),{appsToUnload:g,appsToUnmount:m,appsToLoad:I,appsToMount:S}}();let s,c=[],u=Da,l=Da=window.location.href;return Ts()?(xi=!0,s=n.concat(o,i,a),Promise.resolve().then(()=>(v(s.length===0?"before-no-app-change":"before-app-change",h(!0)),v("before-routing-event",h(!0,{cancelNavigation:f})),Promise.all(c).then(g=>{if(g.some(y=>y))return Ss.call(window.history,history.state,"",u.substring(location.origin.length)),Da=location.href,xi=!1,ar(e,t,!0);const m=n.map(ws),I=i.map(Yo).map(y=>y.then(ws)).concat(m),S=Promise.all(I);S.then(()=>{v("before-mount-routing-event",h(!0))},y=>{throw y});const _=o.map(y=>bs(y).then(b=>Wl(b,S))),E=a.filter(y=>o.indexOf(y)<0).map(y=>Wl(y,S));return S.catch(y=>{throw p(),y}).then(()=>(p(),Promise.all(_.concat(E)).catch(y=>{throw e.forEach(b=>b.reject(y)),y}).then(d).then(()=>{},y=>{throw y})))})))):(s=o,Promise.resolve().then(()=>{const g=o.map(bs);return Promise.all(g).then(p).then(()=>[]).catch(m=>{throw p(),m}).finally(()=>{})}));function f(g=!0){const m=typeof(g==null?void 0:g.then)=="function"?g:Promise.resolve(g);c.push(m.catch(I=>(console.warn(Error(M(42))),console.warn(I),!1)))}function d(){const g=Xo();e.forEach(m=>m.resolve(g));try{v(s.length===0?"no-app-change":"app-change",h()),v("routing-event",h())}catch(m){setTimeout(()=>{throw m})}if(xi=!1,ki.length>0){const m=ki;ki=[],ar(m)}return g}function p(){r||(e.forEach(g=>{Ul(g.eventArguments)}),Ul(t))}function h(g=!1,m){const I={},S={[lt]:[],[Ut]:[],[Pt]:[],[me]:[]};g?(o.concat(a).forEach((y,b)=>{E(y,lt)}),n.forEach(y=>{E(y,Pt)}),i.forEach(y=>{E(y,Ut)})):s.forEach(y=>{E(y)});const _={detail:{newAppStatuses:I,appsByNewStatus:S,totalAppChanges:s.length,originalEvent:t==null?void 0:t[0],oldUrl:u,newUrl:l}};return m&&ci(_.detail,m),_;function E(y,b){const R=ee(y);b=b||eg(R),I[R]=b,(S[b]=S[b]||[]).push(R)}}function v(g,m){r||window.dispatchEvent(new ms(`single-spa:${g}`,m))}}function Wl(e,t){return _s(e)?yu(e).then(r=>t.then(()=>_s(r)?ys(r):r)):t.then(()=>e)}let og=!1;function ag(e){og=!0,_n&&(Jv(e),ar())}function Ts(){return og}var lL={getRawAppData:function(){return[...dt]},reroute:ar,NOT_LOADED:Pt,toLoadPromise:bs,toBootstrapPromise:yu,unregisterApplication:rg,getProfilerData:function(){return nL}};_n&&window.__SINGLE_SPA_DEVTOOLS__&&(window.__SINGLE_SPA_DEVTOOLS__.exposedMethods=lL);const dL=e=>{e.preloadApps&&e.preloadApps.forEach(t=>BI(Nr(t)))},fL=()=>new Promise(e=>{const t=setInterval(()=>{const r=Xo();r.length>0&&(e(r),clearInterval(t))},100)}),pL=()=>{document.addEventListener("app-shell:application-mounted",async()=>{(await fL()).forEach(t=>dL(Nr(t)))})},hL=()=>{window.addEventListener("single-spa:before-routing-event",e=>{const{oldUrl:t,newUrl:r,appsByNewStatus:n,cancelNavigation:i}=e.detail;if(n.MOUNTED.length===0&&n.NOT_MOUNTED.length>0){i(),setTimeout(()=>{window.location.assign(r)});return}t!==r&&(document[Symbol.for("internalReferrer")]=t)})},xa={},vL=e=>{document.querySelectorAll('link[rel="stylesheet"]:not([data-app])').forEach(t=>t.setAttribute("data-app",e))},gL=e=>{const t=[];return document.querySelectorAll(`link[data-app="${e}"]`).forEach(r=>{t.push(r.getAttribute("href"))}),[...new Set(t)]},mL=new Set(["apple-touch-icon","icon","manifest","mask-icon"]);function EL(){document.querySelectorAll("link:not([data-app])").forEach(e=>{mL.has(e.rel)||e.remove()})}const _L=()=>{window.addEventListener("single-spa:before-mount-routing-event",e=>{e.detail.appsByNewStatus.NOT_MOUNTED.forEach(t=>{vL(t),xa[t]||(xa[t]=gL(t))}),e.detail.appsByNewStatus.NOT_MOUNTED.length&&EL(),e.detail.appsByNewStatus.MOUNTED.forEach(t=>{const r=xa[t];r&&r.forEach(n=>{document.querySelector(`link[rel="stylesheet"][href="${n}"]`)||Vp(n,t)})})}),window.addEventListener("single-spa:app-change",e=>{e.detail.appsByNewStatus.NOT_MOUNTED.forEach(t=>{document.querySelectorAll(`link[data-app="${t}"]`).forEach(r=>r.remove())})})},yL=()=>{if(typeof window>"u")return;let e=document.referrer;const t=Object.create(null),r=Symbol.for("internalReferrer");t.configurable=!1,t.set=function(n){try{e=new URL(n).href}catch{}},t.get=function(){return e},Object.defineProperty(document,r,t)},Iu=[];function bL(e,t,r){t!==Ka.LOCAL||typeof r!="function"||Iu.push({appName:e,isActive:!1,updateFunction:r})}function Yl(e=[],t){Iu.forEach(r=>{e.includes(r.appName)&&(r.isActive=t)})}function SL(e){Iu.filter(({isActive:t})=>t).forEach(({appName:t,updateFunction:r})=>{r({name:t,...e})})}function wL(e,t){window.addEventListener("single-spa:app-change",r=>{const{appsByNewStatus:n}=r.detail,i=n.MOUNTED,o=n.NOT_MOUNTED;Yl(i,!0),Yl(o,!1);const a=t(i,e);SL(a)})}function Xl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xl(Object(r),!0).forEach(function(n){TL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lr(e){return(Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function TL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ki(e){return function(t){if(Array.isArray(t))return Is(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||sg(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sg(e,t){if(e){if(typeof e=="string")return Is(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Is(e,t):void 0}}function Is(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=typeof window<"u";function Pi(e,t){if(Lr(t)!=="object"||Array.isArray(t)||t===null)throw Error("Invalid ".concat(e,": received ").concat(Array.isArray(t)?"array":t," but expected a plain object"))}function Zl(e,t){if(typeof t!="boolean")throw Error("Invalid ".concat(e,": received ").concat(Lr(t),", but expected a boolean"))}function ka(e,t,r,n){if(!n){var i=Object.keys(t),o=[];i.forEach(function(a){r.indexOf(a)<0&&o.push(a)}),o.length>0&&console.warn(Error("Invalid ".concat(e,": received invalid properties '").concat(o.join(", "),"', but valid properties are ").concat(r.join(", "))))}}function Ln(e,t){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof t!="string"||r&&t.trim()==="")throw Error("Invalid ".concat(e,": received '").concat(t,"', but expected a").concat(r?" non-blank":""," string"))}function Ql(e,t){if(Ln(e,t),t.indexOf("/")<0)throw Error("Invalid ".concat(e,": received '").concat(t,"', but expected an absolute path that starts with /"))}function Pa(e,t,r){if(!Array.isArray(t)&&(Lr(Lr(t))!=="object"||t.length!=="number"))throw Error("Invalid ".concat(e,": received '").concat(t,"', but expected an array"));for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];for(var a=0;a<t.length;a++)r.apply(void 0,[t[a],"".concat(e,"[").concat(a,"]")].concat(i))}function As(e,t){var r;return(r=e.substr(-1)==="/"?t[0]==="/"?e+t.slice(1):e+t:t[0]==="/"?e+t:e+"/"+t).substr(-1)==="/"&&r.length>1&&(r=r.slice(0,r.length-1)),r}function Rs(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r];return null}var IL=typeof Symbol<"u"?Symbol():"@";function AL(e,t){if(e&&e.nodeName||typeof e=="string"){if(ke&&!t&&window.singleSpaLayoutData&&(t=window.singleSpaLayoutData),typeof e=="string"){if(!ke)throw Error("calling constructRoutes with a string on the server is not yet supported");if(!(e=new DOMParser().parseFromString(e,"text/html").documentElement.querySelector("single-spa-router")))throw Error("constructRoutes should be called with a string HTML document that contains a <single-spa-router> element.")}e=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r.nodeName.toLowerCase()==="template"&&(r=(r.content||r).querySelector("single-spa-router")),r.nodeName.toLowerCase()!=="single-spa-router")throw Error("single-spa-layout: The HTMLElement passed to constructRoutes must be <single-spa-router> or a <template> containing the router. Received ".concat(r.nodeName));ke&&r.isConnected&&r.parentNode.removeChild(r);var i={routes:[],redirects:{}};De(r,"mode")&&(i.mode=De(r,"mode")),De(r,"base")&&(i.base=De(r,"base")),De(r,"containerEl")&&(i.containerEl=De(r,"containerEl"));for(var o=0;o<r.childNodes.length;o++){var a;(a=i.routes).push.apply(a,Ki($i(r.childNodes[o],n,i)))}return i}(e,t)}else if(t)throw Error("constructRoutes should be called either with an HTMLElement and layoutData, or a single json object.");return function(r){Pi("routesConfig",r);var n,i=r.disableWarnings;if(ka("routesConfig",r,["mode","base","containerEl","routes","disableWarnings","redirects"],i),r.hasOwnProperty("containerEl")?function(u,l){if(typeof l=="string"?l.trim()==="":!(ke&&l instanceof HTMLElement))throw Error("Invalid ".concat("routesConfig.containerEl",": received ").concat(l," but expected either non-blank string or HTMLElement"))}(0,r.containerEl):r.containerEl="body",r.hasOwnProperty("mode")||(r.mode="history"),function(u,l,f){if(f.indexOf(l)<0)throw Error("Invalid ".concat("routesConfig.mode",": received '").concat(l,"' but expected ").concat(f.join(", ")))}(0,r.mode,["history","hash"]),r.hasOwnProperty("base")?(Ln("routesConfig.base",r.base),r.base=((n=r.base).indexOf("/")!==0&&(n="/"+n),n[n.length-1]!=="/"&&(n+="/"),n)):r.base="/",r.hasOwnProperty("redirects"))for(var o in Pi("routesConfig.redirects",r.redirects),r.redirects){var a=r.redirects[o];Ql("routesConfig.redirects key",o),Ql("routesConfig.redirects['".concat(o,"']"),a)}var s=ke?window.location.pathname:"/",c=r.mode==="hash"?s+"#":"";Pa("routesConfig.routes",r.routes,function u(l,f,d){var p=d.parentPath,h=d.siblingActiveWhens,v=d.parentActiveWhen;if(Pi(f,l),l.type==="application")ka(f,l,["type","name","props","loader","error","className"],i),l.props&&Pi("".concat(f,".props"),l.props),Ln("".concat(f,".name"),l.name);else if(l.type==="route"){ka(f,l,["type","path","routes","props","default","exact"],i),l.hasOwnProperty("exact")&&Zl("".concat(f,".exact"),l.exact);var g,m=l.hasOwnProperty("path"),I=l.hasOwnProperty("default");if(m)Ln("".concat(f,".path"),l.path),g=As(p,l.path),l.activeWhen=Tu(g,l.exact),h.push(l.activeWhen);else{if(!I)throw Error("Invalid ".concat(f,": routes must have either a path or default property."));Zl("".concat(f,".default"),l.default),g=p,l.activeWhen=function(_,E){return function(y){return E(y)&&!_.some(function(b){return b(y)})}}(h,v)}if(m&&I&&l.default)throw Error("Invalid ".concat(f,": cannot have both path and set default to true."));l.routes&&Pa("".concat(f,".routes"),l.routes,u,{parentPath:g,siblingActiveWhens:[],parentActiveWhen:l.activeWhen})}else{if(!(typeof Node<"u"&&l instanceof Node))for(var S in l)S!=="routes"&&S!=="attrs"&&Ln("".concat(f,"['").concat(S,"']"),l[S],!1);l.routes&&Pa("".concat(f,".routes"),l.routes,u,{parentPath:p,siblingActiveWhens:h,parentActiveWhen:v})}},{parentPath:c+r.base,parentActiveWhen:function(){return!0},siblingActiveWhens:[]}),delete r.disableWarnings}(e),e}function De(e,t){if(ke)return e.getAttribute(t);var r=Rs(e.attrs,function(n){return n.name===t.toLowerCase()});return r?r.value:null}function ed(e,t){return ke?e.hasAttribute(t):e.attrs.some(function(r){return r.name===t})}function $i(e,t,r){if(e.nodeName.toLowerCase()==="application"){if(e.childNodes.length>0)throw Error("<application> elements must not have childNodes. You must put in a closing </application> - self closing is not allowed");var n={type:"application",name:De(e,"name")},i=De(e,"loader");if(i){if(t.loaders&&t.loaders.hasOwnProperty(i))n.loader=t.loaders[i];else if(ke)throw Error("Application loader '".concat(i,"' was not defined in the htmlLayoutData"))}var o=De(e,"error");if(o){if(t.errors&&t.errors.hasOwnProperty(o))n.error=t.errors[o];else if(ke)throw Error("Application error handler '".concat(i,"' was not defined in the htmlLayoutData"))}var a=De(e,"class");return a&&(n.className=a),td(e,n,t),[n]}if(e.nodeName.toLowerCase()==="route"){var s={type:"route",routes:[]},c=De(e,"path");c&&(s.path=c),ed(e,"default")&&(s.default=!0),ed(e,"exact")&&(s.exact=!0),td(e,s,t);for(var u=0;u<e.childNodes.length;u++){var l;(l=s.routes).push.apply(l,Ki($i(e.childNodes[u],t,r)))}return[s]}if(e.nodeName.toLowerCase()==="redirect")return r.redirects[As("/",De(e,"from"))]=As("/",De(e,"to")),[];if(typeof Node<"u"&&e instanceof Node){if(e.nodeType===Node.TEXT_NODE&&e.textContent.trim()==="")return[];if(e.childNodes&&e.childNodes.length>0){e.routes=[];for(var f=0;f<e.childNodes.length;f++){var d;(d=e.routes).push.apply(d,Ki($i(e.childNodes[f],t,r)))}}return[e]}if(e.childNodes){for(var p={type:e.nodeName.toLowerCase(),routes:[],attrs:e.attrs},h=0;h<e.childNodes.length;h++){var v;(v=p.routes).push.apply(v,Ki($i(e.childNodes[h],t,r)))}return[p]}return e.nodeName==="#comment"?[{type:"#comment",value:e.data}]:e.nodeName==="#text"?[{type:"#text",value:e.value}]:void 0}function td(e,t,r){for(var n=(De(e,"props")||"").split(","),i=0;i<n.length;i++){var o=n[i].trim();if(o.length!==0)if(t.props||(t.props={}),r.props&&r.props.hasOwnProperty(o))t.props[o]=r.props[o];else{if(ke)throw Error("Prop '".concat(o,"' was not defined in the htmlLayoutData. Either remove this attribute from the HTML element or provide the prop's value"));t.props[o]=IL}}}function ug(e){return{bootstrap:function(){return Promise.resolve()},mount:function(t){return Promise.resolve().then(function(){t.domElement.innerHTML=e})},unmount:function(t){return Promise.resolve().then(function(){t.domElement.innerHTML=""})}}}function RL(e){var t=e.routes,r=e.active,n=r===void 0||r,i=!1,o={},a=ke&&!!window.singleSpaLayoutData;if(!t)throw Error("single-spa-layout constructLayoutEngine(opts): opts.routes must be provided. Value was ".concat(Lr(t)));var s=t.base.slice(0,t.base.length-1),c={isActive:function(){return i},activate:function(){i||(i=!0,ke&&(window.addEventListener("single-spa:before-routing-event",l),window.addEventListener("single-spa:before-mount-routing-event",f),window.addEventListener("single-spa:routing-event",d),Fv(u),a&&p(h(),t.routes),f()))},deactivate:function(){i&&(i=!1,ke&&(window.removeEventListener("single-spa:before-routing-event",l),window.removeEventListener("single-spa:before-mount-routing-event",f),window.removeEventListener("single-spa:routing-event",d),Vv(u)))}};return n&&c.activate(),c;function u(v){var g=Ns({applicationName:v.appOrParcelName,location:window.location,routes:t.routes});if(g&&g.error){var m=document.getElementById(Mn(g.name)),I=typeof g.error=="string"?ug(g.error):g.error;o[g.name]=bu(I,{domElement:m,error:v})}setTimeout(function(){throw v})}function l(v){var g=v.detail,m=g.cancelNavigation,I=g.newUrl,S=nd(t,lg(I)),_=function(R){var N=t.redirects[R];if(R===S){if(!m)throw Error("single-spa-layout: <redirect> requires single-spa@>=5.7.0");return m(),setTimeout(function(){go(N)}),{v:void 0}}};for(var E in t.redirects){var y=_(E);if(Lr(y)==="object")return y.v}var b=[];id(I).forEach(function(R){o[R]&&(b.push(o[R].unmount()),delete o[R])}),b.length>0&&(m(),Promise.all(b).then(function(){go(I)}))}function f(){if(nd(t).indexOf(s)===0){var v=Xo().reduce(function(g,m){return g[m]=document.getElementById(Mn(m)),g},{});Os({location:window.location,routes:t.routes,parentContainer:h(),shouldMount:!0,applicationContainers:v})}}function d(v){var g=v.detail,m=g.navigationIsCanceled,I=g.newUrl;m||id(I).forEach(function(S){var _=document.getElementById(Mn(S));_&&_.isConnected&&_.parentNode.removeChild(_)})}function p(v,g){if(v&&v.childNodes&&g)for(var m={nextSibling:v.childNodes[0]},I=0;I<g.length;I++){var S,_=g[I];if(_.type!=="route"){for(var E=(S=m)===null||S===void 0?void 0:S.nextSibling;((y=E)===null||y===void 0?void 0:y.nodeType)===Node.TEXT_NODE&&E.textContent.trim()==="";){var y;E=E.nextSibling}m=E,OL(_)&&NL(E,_)&&(_.connectedNode=E),_.routes&&p(E,_.routes)}else p(v,_.routes)}}function h(){return typeof t.containerEl=="string"?document.querySelector(t.containerEl):t.containerEl}}function OL(e){return t=["application","route","fragment","assets","redirect"],r=e.type,!t.some(function(n){return n===r});var t,r}function NL(e,t){var r,n;return!!e&&(n=t instanceof Node?t:function(i){switch(i.type){case"#text":return document.createTextNode(i.value);case"#comment":return document.createComment(i.value);default:var o=document.createElement(i.type);return i.attrs.forEach(function(a){o.setAttribute(a.name,a.value)}),o}}(t),(r=e).nodeType===n.nodeType&&r.nodeName===n.nodeName&&function(i,o){var a=i.getAttributeNames?i.getAttributeNames().sort():[],s=i.getAttributeNames?i.getAttributeNames().sort():[];return a.length===s.length&&!a.some(function(c){return i.getAttribute(c)!==o.getAttribute(c)})}(r,n))}function Os(e){var t=e.location,r=e.routes,n=e.parentContainer,i=e.previousSibling,o=e.shouldMount,a=e.applicationContainers;return r.forEach(function(s,c){if(s.type==="application"){if(o){var u,l=Mn(s.name);a[s.name]?u=a[s.name]:document.getElementById(l)?u=document.getElementById(l):(u=document.createElement("div")).id=l,typeof s.className=="string"?u.className=s.className:typeof s.className!="string"&&typeof u.className=="string"&&u.removeAttribute("class"),rd(u,n,i),i=u}}else if(s.type==="route")i=Os({location:t,routes:s.routes,parentContainer:n,previousSibling:i,shouldMount:o&&s.activeWhen(t),applicationContainers:a});else if(s instanceof Node||typeof s.type=="string")if(o){if(!s.connectedNode){var f=s instanceof Node?s.cloneNode(!1):cg(s);s.connectedNode=f}rd(s.connectedNode,n,i),s.routes&&Os({location:t,routes:s.routes,parentContainer:s.connectedNode,previousSibling:null,shouldMount:o,applicationContainers:a}),i=s.connectedNode}else(d=s.connectedNode)&&(d.remove?d.remove():d.parentNode.removeChild(d)),delete s.connectedNode;var d}),i}function Ns(e){for(var t=e.applicationName,r=e.location,n=e.routes,i=0;i<n.length;i++){var o=n[i];if(o.type==="application"){if(o.name===t)return o}else if(o.type==="route"){if(o.activeWhen(r)){var a=Ns({applicationName:t,location:r,routes:o.routes});if(a)return a}}else if(o.routes){var s=Ns({applicationName:t,location:r,routes:o.routes});if(s)return s}}}function rd(e,t,r){var n=r?r.nextSibling:t.firstChild;n!==e&&t.insertBefore(e,n)}function Mn(e){return"single-spa-application:".concat(e)}function cg(e){if(e.type.toLowerCase()==="#text")return document.createTextNode(e.value);if(e.type.toLowerCase()==="#comment")return document.createComment(e.value);var t=document.createElement(e.type);return(e.attrs||[]).forEach(function(r){t.setAttribute(r.name,r.value)}),t.routes&&t.routes.forEach(function(r){t.appendChild(cg(r))}),t}function nd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location;return t[e.mode==="hash"?"hash":"pathname"]}function lg(e){try{return new URL(e)}catch{var t=document.createElement("a");return t.href=e,t}}function id(e){var t=[],r=wu(e?lg(e):location);return Su().forEach(function(n){r.indexOf(n)<0&&t.push(n)}),t}function CL(e){var t=e.routes,r=e.loadApp,n={};return Cs(n,LL,{},t.routes),Object.keys(n).map(function(i){var o=n[i];return{name:i,customProps:function(a,s){var c=Rs(o,function(u){return u.activeWhen(s)});return c?c.props:{}},activeWhen:o.map(function(a){return a.activeWhen}),app:function(){var a;ke&&(a=Rs(o,function(c){return c.activeWhen(window.location)}));var s=r({name:i});return a&&a.loader?function(c,u,l){return Promise.resolve().then(function(){var f,d=Mn(c),p=document.getElementById(d);p||((p=document.createElement("div")).id=d,p.style.display="none",document.body.appendChild(p),f=function(){p.style.removeProperty("display"),p.getAttribute("style")===""&&p.removeAttribute("style"),window.removeEventListener("single-spa:before-mount-routing-event",f)},window.addEventListener("single-spa:before-mount-routing-event",f));var h=typeof u.loader=="string"?ug(u.loader):u.loader,v=bu(h,{name:"application-loader:".concat(c),domElement:p});function g(){return v.unmount().then(function(){f&&f()})}return Promise.all([v.mountPromise,l]).then(function(m){var I,S,_=(S=2,function(y){if(Array.isArray(y))return y}(I=m)||function(y,b){var R=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(R!=null){var N,x,J=[],ie=!0,_e=!1;try{for(R=R.call(y);!(ie=(N=R.next()).done)&&(J.push(N.value),!b||J.length!==b);ie=!0);}catch(Ce){_e=!0,x=Ce}finally{try{ie||R.return==null||R.return()}finally{if(_e)throw x}}return J}}(I,S)||sg(I,S)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());_[0];var E=_[1];return g().then(function(){return E})},function(m){return g().then(function(){throw m})})})}(i,a,s):s}}})}function Cs(e,t,r,n){n.forEach(function(i){i.type==="application"?(e[i.name]||(e[i.name]=[]),e[i.name].push({activeWhen:t,props:od(r,i.props),loader:i.loader})):i.type==="route"?Cs(e,i.activeWhen,od(r,i.props),i.routes):i.routes&&Cs(e,t,r,i.routes)})}function od(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jl(Jl({},e),t)}function LL(){return!0}const DL="single-spa-application:",xL="100px";function kL(e){return new Promise((t,r)=>{const n=`${DL}${e}`,i=document.getElementById(n);if(!i){r(new Error(`App ${e} not found in DOM.`));return}new IntersectionObserver((a,s)=>{a.some(c=>c.isIntersecting)&&(t(),s.disconnect())},{rootMargin:xL}).observe(i)})}const Au=new Map;function PL(e){const t=ad(),r=ad(),n={triggerLoad:t.resolve,mounted:r.promise,resolveMounted:r.resolve};return Au.set(e,n),t.promise}function ad(){let e=()=>{};return{promise:new Promise(r=>{e=r}),resolve:e}}function UL(){typeof window>"u"||(window.activateAppShellLazyLoadedApp=ML,document.addEventListener("app-shell:application-mounted",FL))}function ML(e){const t=Au.get(e);return t?(t.triggerLoad(),t.mounted):Promise.reject(new Error(`No activate trigger for app ${e} found`))}function FL(e){const t=e.detail.appName;if(t){const r=Au.get(t);r&&r.resolveMounted()}}async function VL(e,t){if(!e.lazyLoad||window.APP_SHELL_CONFIG.IS_CRAWLER)return t();const r={bootstrap:void 0,mount:void 0};let n;const i=a=>async s=>{const c=n==null?void 0:n[a];if(!c){(a==="bootstrap"||a==="mount")&&(r[a]=s);return}return c(s)},o={bootstrap:i("bootstrap"),mount:i("mount"),unmount:i("unmount"),update:i("update")};return Promise.race([kL(e.name),PL(e.name)]).then(async()=>{n=await t(),r.bootstrap&&await o.bootstrap(r.bootstrap),r.mount&&await o.mount(r.mount)}),o}const BL=e=>!(!Array.isArray(e)||typeof e[0]!="function"),GL=(e,t,r)=>{if(!BL(e.activeWhen))throw new Error("Activity has unexpected type. Only `ActivityFn[]` is supported.");return e.activeWhen.some(o=>o(r))&&[()=>!(t.hideInWebView===!0&&window.APP_SHELL_CONFIG.IS_WEB_VIEW)].every(o=>o())},zL=(e,t,r)=>{let n={};return typeof e.customProps=="function"?n=e.customProps(t,r):n=e.customProps||{},n.ssrState={hydrateOnce:()=>PI(window,t)},n},HL=e=>{for(const t of e){const r=Nr(t.name);tg({...t,activeWhen:n=>GL(t,r,n),customProps:(n,i)=>zL(t,n,i)})}Wv(15e3,!1)},jL=async({name:e})=>{const t=Nr(e);return VL(t,async()=>{const r=await FI(t);if(!r)throw new Error(`Error loading app: ${t.name}`);return bL(t.name,t.appType,r.update),r})},qL=()=>{const e=AL(document.querySelector("#single-spa-layout")),t=CL({routes:e,loadApp:jL});RL({routes:e,applications:t}),HL(t),ag({urlRerouteOnly:!0})};var Ls,$t,Fn,dg,mo,fg=-1,Ur=function(e){addEventListener("pageshow",function(t){t.persisted&&(fg=t.timeStamp,e(t))},!0)},Ru=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Jo=function(){var e=Ru();return e&&e.activationStart||0},Qe=function(e,t){var r=Ru(),n="navigate";return fg>=0?n="back-forward-cache":r&&(document.prerendering||Jo()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},yn=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch{}},et=function(e,t,r,n){var i,o;return function(a){t.value>=0&&(a||n)&&((o=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=o,t.rating=function(s,c){return s>c[1]?"poor":s>c[0]?"needs-improvement":"good"}(t.value,r),e(t))}},Ou=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},fi=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},Zo=function(e){var t=!1;return function(){t||(e(),t=!0)}},Yr=-1,sd=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Eo=function(e){document.visibilityState==="hidden"&&Yr>-1&&(Yr=e.type==="visibilitychange"?e.timeStamp:0,KL())},ud=function(){addEventListener("visibilitychange",Eo,!0),addEventListener("prerenderingchange",Eo,!0)},KL=function(){removeEventListener("visibilitychange",Eo,!0),removeEventListener("prerenderingchange",Eo,!0)},Nu=function(){return Yr<0&&(Yr=sd(),ud(),Ur(function(){setTimeout(function(){Yr=sd(),ud()},0)})),{get firstHiddenTime(){return Yr}}},pi=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},cd=[1800,3e3],pg=function(e,t){t=t||{},pi(function(){var r,n=Nu(),i=Qe("FCP"),o=yn("paint",function(a){a.forEach(function(s){s.name==="first-contentful-paint"&&(o.disconnect(),s.startTime<n.firstHiddenTime&&(i.value=Math.max(s.startTime-Jo(),0),i.entries.push(s),r(!0)))})});o&&(r=et(e,i,cd,t.reportAllChanges),Ur(function(a){i=Qe("FCP"),r=et(e,i,cd,t.reportAllChanges),Ou(function(){i.value=performance.now()-a.timeStamp,r(!0)})}))})},ld=[.1,.25],$L=function(e,t){t=t||{},pg(Zo(function(){var r,n=Qe("CLS",0),i=0,o=[],a=function(c){c.forEach(function(u){if(!u.hadRecentInput){var l=o[0],f=o[o.length-1];i&&u.startTime-f.startTime<1e3&&u.startTime-l.startTime<5e3?(i+=u.value,o.push(u)):(i=u.value,o=[u])}}),i>n.value&&(n.value=i,n.entries=o,r())},s=yn("layout-shift",a);s&&(r=et(e,n,ld,t.reportAllChanges),fi(function(){a(s.takeRecords()),r(!0)}),Ur(function(){i=0,n=Qe("CLS",0),r=et(e,n,ld,t.reportAllChanges),Ou(function(){return r()})}),setTimeout(r,0))}))},hg=0,Ua=1/0,Ui=0,WL=function(e){e.forEach(function(t){t.interactionId&&(Ua=Math.min(Ua,t.interactionId),Ui=Math.max(Ui,t.interactionId),hg=Ui?(Ui-Ua)/7+1:0)})},vg=function(){return Ls?hg:performance.interactionCount||0},YL=function(){"interactionCount"in performance||Ls||(Ls=yn("event",WL,{type:"event",buffered:!0,durationThreshold:0}))},yt=[],Wi=new Map,gg=0,XL=function(){var e=Math.min(yt.length-1,Math.floor((vg()-gg)/50));return yt[e]},JL=[],ZL=function(e){if(JL.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=yt[yt.length-1],r=Wi.get(e.interactionId);if(r||yt.length<10||e.duration>t.latency){if(r)e.duration>r.latency?(r.entries=[e],r.latency=e.duration):e.duration===r.latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Wi.set(n.id,n),yt.push(n)}yt.sort(function(i,o){return o.latency-i.latency}),yt.length>10&&yt.splice(10).forEach(function(i){return Wi.delete(i.id)})}}},mg=function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=Zo(e),document.visibilityState==="hidden"?e():(r=t(e),fi(e)),r},dd=[200,500],QL=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},pi(function(){var r;YL();var n,i=Qe("INP"),o=function(s){mg(function(){s.forEach(ZL);var c=XL();c&&c.latency!==i.value&&(i.value=c.latency,i.entries=c.entries,n())})},a=yn("event",o,{durationThreshold:(r=t.durationThreshold)!==null&&r!==void 0?r:40});n=et(e,i,dd,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),fi(function(){o(a.takeRecords()),n(!0)}),Ur(function(){gg=vg(),yt.length=0,Wi.clear(),i=Qe("INP"),n=et(e,i,dd,t.reportAllChanges)}))}))},fd=[2500,4e3],Ma={},eD=function(e,t){t=t||{},pi(function(){var r,n=Nu(),i=Qe("LCP"),o=function(c){t.reportAllChanges||(c=c.slice(-1)),c.forEach(function(u){u.startTime<n.firstHiddenTime&&(i.value=Math.max(u.startTime-Jo(),0),i.entries=[u],r())})},a=yn("largest-contentful-paint",o);if(a){r=et(e,i,fd,t.reportAllChanges);var s=Zo(function(){Ma[i.id]||(o(a.takeRecords()),a.disconnect(),Ma[i.id]=!0,r(!0))});["keydown","click"].forEach(function(c){addEventListener(c,function(){return mg(s)},{once:!0,capture:!0})}),fi(s),Ur(function(c){i=Qe("LCP"),r=et(e,i,fd,t.reportAllChanges),Ou(function(){i.value=performance.now()-c.timeStamp,Ma[i.id]=!0,r(!0)})})}})},pd=[800,1800],tD=function e(t){document.prerendering?pi(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},rD=function(e,t){t=t||{};var r=Qe("TTFB"),n=et(e,r,pd,t.reportAllChanges);tD(function(){var i=Ru();i&&(r.value=Math.max(i.responseStart-Jo(),0),r.entries=[i],n(!0),Ur(function(){r=Qe("TTFB",0),(n=et(e,r,pd,t.reportAllChanges))(!0)}))})},Dn={passive:!0,capture:!0},nD=new Date,hd=function(e,t){$t||($t=t,Fn=e,dg=new Date,_g(removeEventListener),Eg())},Eg=function(){if(Fn>=0&&Fn<dg-nD){var e={entryType:"first-input",name:$t.type,target:$t.target,cancelable:$t.cancelable,startTime:$t.timeStamp,processingStart:$t.timeStamp+Fn};mo.forEach(function(t){t(e)}),mo=[]}},iD=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(r,n){var i=function(){hd(r,n),a()},o=function(){a()},a=function(){removeEventListener("pointerup",i,Dn),removeEventListener("pointercancel",o,Dn)};addEventListener("pointerup",i,Dn),addEventListener("pointercancel",o,Dn)}(t,e):hd(t,e)}},_g=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,iD,Dn)})},vd=[100,300],oD=function(e,t){t=t||{},pi(function(){var r,n=Nu(),i=Qe("FID"),o=function(c){c.startTime<n.firstHiddenTime&&(i.value=c.processingStart-c.startTime,i.entries.push(c),r(!0))},a=function(c){c.forEach(o)},s=yn("first-input",a);r=et(e,i,vd,t.reportAllChanges),s&&(fi(Zo(function(){a(s.takeRecords()),s.disconnect()})),Ur(function(){var c;i=Qe("FID"),r=et(e,i,vd,t.reportAllChanges),mo=[],Fn=-1,$t=null,_g(addEventListener),c=o,mo.push(c),Eg()}))})},aD={useFallback:!0},yg=async(e,t,r=aD)=>{const n="text/plain",i=!!navigator.sendBeacon,{useFallback:o}=r;if(!i&&!o)return!1;if(navigator.sendBeacon){const a=new Blob([JSON.stringify(t)],{type:n});return navigator.sendBeacon(e.href,a)}try{await fetch(e.href,{method:"POST",headers:{"Content-Type":n},body:JSON.stringify(t),keepalive:!0})}catch{return!1}return!0},bg=500,gd=class{constructor(e){ae(this,"boundFlush");ae(this,"queue",[]);ae(this,"timeout",null);this.options=e,this.boundFlush=this.flush.bind(this)}async flush(){if(!this.queue.length)return;const e=[...this.queue];this.queue.length=0;try{await yg(this.options.url,e,this.options.sendConfig)}catch{this.queue.push(...e)}}add(e){this.timeout&&clearTimeout(this.timeout),this.queue.push(e),this.options.useTimeout!==!1&&(this.timeout=setTimeout(this.boundFlush,this.options.timeoutMs||bg))}},sD="/uts/events",uD=class Yi{constructor(t){ae(this,"performanceQueue");ae(this,"spadImpressionQueue");ae(this,"boundFlush");ae(this,"boundVisibilityHandler");ae(this,"spadClickUrl");ae(this,"shouldInitHandlers");const{timeoutMs:r,host:n,initHandlers:i}=t,o=r||bg;this.shouldInitHandlers=i??!0,this.spadClickUrl=Yi.buildUrl(n,"spad-click"),this.performanceQueue=new gd({url:Yi.buildUrl(n,"performance"),timeoutMs:o,useTimeout:!1,sendConfig:{useFallback:!1}}),this.spadImpressionQueue=new gd({url:Yi.buildUrl(n,"spad-impression"),timeoutMs:o}),this.boundFlush=this.flush.bind(this),this.boundVisibilityHandler=this.visibilityHandler.bind(this),this.initHandlers()}static buildUrl(t,r,n=1){const i=`${sD}/v${n}/${r}`;return new URL(i,t)}initHandlers(){this.shouldInitHandlers&&(window.addEventListener("visibilitychange",this.boundVisibilityHandler),window.addEventListener("pagehide",this.boundFlush),window.addEventListener("popstate",this.boundFlush),window.addEventListener("single-spa:routing-event",this.boundFlush))}removeHandlers(){this.shouldInitHandlers&&(window.removeEventListener("visibilitychange",this.boundVisibilityHandler),window.removeEventListener("pagehide",this.boundFlush),window.removeEventListener("popstate",this.boundFlush),window.removeEventListener("single-spa:routing-event",this.boundFlush))}visibilityHandler(){document.visibilityState==="hidden"&&this.boundFlush()}async flush(){return await Promise.all([this.performanceQueue.flush(),this.spadImpressionQueue.flush()])}trackPerformance(t){this.performanceQueue.add(t)}trackSpadClick(t){yg(this.spadClickUrl,t)}trackSpadImpression(t){this.spadImpressionQueue.add(t)}async drain(){this.removeHandlers(),await this.flush()}};const Cu="app-shell-metrics-enabled",cD="app-shell";let Fa=null,_o,Ds,yo;const lD=()=>(Fa||(Fa=new uD({host:window.APP_SHELL_CONFIG.UTS_BASE_URL})),Fa);function Sg(...e){(localStorage==null?void 0:localStorage.getItem(Cu))==="true"&&console.log(" [AppShell Metrics]",...e)}function dD(e){const t={"brand-pages":"brand-pages-frontend","content-pages":"content-pages-frontend"};for(const r in t)if(e.startsWith(r))return t[r];return e}function fD(e){const t=e.replace("@mf/","");return dD(t)}function pD(e,t,r){return`${cD}_${t.toLowerCase()}_${e}${r?"_hydrated":""}`}const wg=()=>({webView:ks()}),hD=e=>{[eD,oD,$L,rD,QL,pg].forEach(t=>t(({name:r,value:n})=>{Tg({metricName:r,appName:e,metricValue:n,dimensions:wg()})}))},Lu=new Set([...Mp,...II]);Lu.delete("@mf/header-frontend");Lu.delete("@mf/footer-frontend");const vD=(e,t)=>{const r=(Ds.get(e)||0)+1;Ds.set(e,r);const n=yo.includes(e)&&r===1;n&&Lu.has(e)&&hD(e);const i={mountTimeMs:t,mountCount:r,hydrated:n,...wg()};Tg({appName:e,metricName:"mount-time",metricValue:t,dimensions:i})};function gD(e){const t=e.detail.appsByNewStatus.MOUNTED;yo.length||(yo=t),t.forEach(n=>{_o.set(n,e.timeStamp)})}function mD(e){const t=performance.now();setTimeout(()=>{const{appName:r}=e.detail;if(r){const n=_o.get(r);if(!n)return;const i=Math.round(t-n);vD(r,i),_o.delete(r)}})}function ED(){localStorage.setItem(Cu,"true"),Sg("Enabled")}function _D(){localStorage.removeItem(Cu)}function yD(e,t,r){r>{TTFB:1e4,LCP:1e4,FID:1e3,FCP:3e3,CLS:1,INP:1e3,"mount-time":1e4}[e]||kt.track(`fft_${t}`,{},{value:r})}function Tg(e){const{metricName:t,metricValue:r,appName:n,dimensions:i}=e;if(r<0)return;const o=fD(n),a=pD(o,t,i==null?void 0:i.hydrated);Sg(`${a}: ${r}ms`,...i?[i]:[]),yD(t,a,r),wD({...e,appName:o})}function bD(){Gp()&&(_o=new Map,Ds=new Map,yo=[],window.enableAppShellMetricsLogging=ED,window.disableAppShellMetricsLogging=_D,window.addEventListener("single-spa:before-mount-routing-event",gD),document.addEventListener("app-shell:application-mounted",mD))}const SD=()=>window.location.pathname.split("/").filter(r=>r.length>0)[0]||void 0,wD=e=>{const{appName:t,metricValue:r}=e,n=window.APP_SHELL_CONFIG.ENV==="development",i=Object.entries(e.dimensions||{}).reduce((c,[u,l])=>({...c,[u]:l.toString()}),{}),o=e.metricName.toLowerCase(),a=SD(),s={stat:`shop_app-shell_${o}`,value:r,tags:{...i,app:t,...n?{env:"dev"}:{},...a?{path:a}:{}}};lD().trackPerformance(s)};yR();AR();pL();eL();hL();_L();Mv();yL();UL();wL(window.APP_SHELL_INITIAL_PROPS,TI);bD();qL();
//# sourceMappingURL=main-Djc538rL.js.map
